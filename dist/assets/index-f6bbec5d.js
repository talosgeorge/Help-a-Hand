(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function CT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var N0={exports:{}},xc={},M0={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=Symbol.for("react.element"),ST=Symbol.for("react.portal"),TT=Symbol.for("react.fragment"),IT=Symbol.for("react.strict_mode"),PT=Symbol.for("react.profiler"),bT=Symbol.for("react.provider"),kT=Symbol.for("react.context"),LT=Symbol.for("react.forward_ref"),RT=Symbol.for("react.suspense"),AT=Symbol.for("react.memo"),NT=Symbol.for("react.lazy"),bg=Symbol.iterator;function MT(t){return t===null||typeof t!="object"?null:(t=bg&&t[bg]||t["@@iterator"],typeof t=="function"?t:null)}var O0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D0=Object.assign,V0={};function Qs(t,e,n){this.props=t,this.context=e,this.refs=V0,this.updater=n||O0}Qs.prototype.isReactComponent={};Qs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function j0(){}j0.prototype=Qs.prototype;function zf(t,e,n){this.props=t,this.context=e,this.refs=V0,this.updater=n||O0}var Bf=zf.prototype=new j0;Bf.constructor=zf;D0(Bf,Qs.prototype);Bf.isPureReactComponent=!0;var kg=Array.isArray,U0=Object.prototype.hasOwnProperty,$f={current:null},F0={key:!0,ref:!0,__self:!0,__source:!0};function z0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)U0.call(e,r)&&!F0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ha,type:t,key:s,ref:o,props:i,_owner:$f.current}}function OT(t,e){return{$$typeof:Ha,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ha}function DT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lg=/\/+/g;function Th(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DT(""+t.key):e.toString(36)}function Jl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ha:case ST:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Th(o,0):r,kg(i)?(n="",t!=null&&(n=t.replace(Lg,"$&/")+"/"),Jl(i,e,n,"",function(c){return c})):i!=null&&(Hf(i)&&(i=OT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Lg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",kg(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+Th(s,a);o+=Jl(s,e,n,u,i)}else if(u=MT(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+Th(s,a++),o+=Jl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pl(t,e,n){if(t==null)return t;var r=[],i=0;return Jl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function VT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},eu={transition:null},jT={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:eu,ReactCurrentOwner:$f};function B0(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Pl,forEach:function(t,e,n){Pl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pl(t,function(){e++}),e},toArray:function(t){return Pl(t,function(e){return e})||[]},only:function(t){if(!Hf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=Qs;me.Fragment=TT;me.Profiler=PT;me.PureComponent=zf;me.StrictMode=IT;me.Suspense=RT;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jT;me.act=B0;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=D0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=$f.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)U0.call(e,u)&&!F0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ha,type:t.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:kT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bT,_context:t},t.Consumer=t};me.createElement=z0;me.createFactory=function(t){var e=z0.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:LT,render:t}};me.isValidElement=Hf;me.lazy=function(t){return{$$typeof:NT,_payload:{_status:-1,_result:t},_init:VT}};me.memo=function(t,e){return{$$typeof:AT,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=eu.transition;eu.transition={};try{t()}finally{eu.transition=e}};me.unstable_act=B0;me.useCallback=function(t,e){return Lt.current.useCallback(t,e)};me.useContext=function(t){return Lt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Lt.current.useEffect(t,e)};me.useId=function(){return Lt.current.useId()};me.useImperativeHandle=function(t,e,n){return Lt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Lt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Lt.current.useReducer(t,e,n)};me.useRef=function(t){return Lt.current.useRef(t)};me.useState=function(t){return Lt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Lt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Lt.current.useTransition()};me.version="18.3.1";M0.exports=me;var d=M0.exports;const UT=CT(d);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT=d,zT=Symbol.for("react.element"),BT=Symbol.for("react.fragment"),$T=Object.prototype.hasOwnProperty,HT=FT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WT={key:!0,ref:!0,__self:!0,__source:!0};function $0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)$T.call(e,r)&&!WT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:zT,type:t,key:s,ref:o,props:i,_owner:HT.current}}xc.Fragment=BT;xc.jsx=$0;xc.jsxs=$0;N0.exports=xc;var v=N0.exports,md={},H0={exports:{}},Kt={},W0={exports:{}},q0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,H){var W=U.length;U.push(H);e:for(;0<W;){var Y=W-1>>>1,ee=U[Y];if(0<i(ee,H))U[Y]=H,U[W]=ee,W=Y;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],W=U.pop();if(W!==H){U[0]=W;e:for(var Y=0,ee=U.length,G=ee>>>1;Y<G;){var fe=2*(Y+1)-1,F=U[fe],xe=fe+1,ge=U[xe];if(0>i(F,W))xe<ee&&0>i(ge,F)?(U[Y]=ge,U[xe]=W,Y=xe):(U[Y]=F,U[fe]=W,Y=fe);else if(xe<ee&&0>i(ge,W))U[Y]=ge,U[xe]=W,Y=xe;else break e}}return H}function i(U,H){var W=U.sortIndex-H.sortIndex;return W!==0?W:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,p=null,m=3,w=!1,y=!1,P=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(U){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=U)r(c),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(c)}}function A(U){if(P=!1,I(U),!y)if(n(u)!==null)y=!0,ue(N);else{var H=n(c);H!==null&&te(A,H.startTime-U)}}function N(U,H){y=!1,P&&(P=!1,C(x),x=-1),w=!0;var W=m;try{for(I(H),p=n(u);p!==null&&(!(p.expirationTime>H)||U&&!R());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,m=p.priorityLevel;var ee=Y(p.expirationTime<=H);H=t.unstable_now(),typeof ee=="function"?p.callback=ee:p===n(u)&&r(u),I(H)}else r(u);p=n(u)}if(p!==null)var G=!0;else{var fe=n(c);fe!==null&&te(A,fe.startTime-H),G=!1}return G}finally{p=null,m=W,w=!1}}var O=!1,S=null,x=-1,E=5,b=-1;function R(){return!(t.unstable_now()-b<E)}function M(){if(S!==null){var U=t.unstable_now();b=U;var H=!0;try{H=S(!0,U)}finally{H?L():(O=!1,S=null)}}else O=!1}var L;if(typeof _=="function")L=function(){_(M)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,re=J.port2;J.port1.onmessage=M,L=function(){re.postMessage(null)}}else L=function(){k(M,0)};function ue(U){S=U,O||(O=!0,L())}function te(U,H){x=k(function(){U(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){y||w||(y=!0,ue(N))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var W=m;m=H;try{return U()}finally{m=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var W=m;m=U;try{return H()}finally{m=W}},t.unstable_scheduleCallback=function(U,H,W){var Y=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Y+W:Y):W=Y,U){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=W+ee,U={id:h++,callback:H,priorityLevel:U,startTime:W,expirationTime:ee,sortIndex:-1},W>Y?(U.sortIndex=W,e(c,U),n(u)===null&&U===n(c)&&(P?(C(x),x=-1):P=!0,te(A,W-Y))):(U.sortIndex=ee,e(u,U),y||w||(y=!0,ue(N))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var H=m;return function(){var W=m;m=H;try{return U.apply(this,arguments)}finally{m=W}}}})(q0);W0.exports=q0;var qT=W0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT=d,Gt=qT;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var G0=new Set,da={};function Fi(t,e){Ns(t,e),Ns(t+"Capture",e)}function Ns(t,e){for(da[t]=e,t=0;t<e.length;t++)G0.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gd=Object.prototype.hasOwnProperty,KT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rg={},Ag={};function QT(t){return gd.call(Ag,t)?!0:gd.call(Rg,t)?!1:KT.test(t)?Ag[t]=!0:(Rg[t]=!0,!1)}function ZT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YT(t,e,n,r){if(e===null||typeof e>"u"||ZT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new Rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new Rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new Rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new Rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new Rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new Rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new Rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new Rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new Rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wf=/[\-:]([a-z])/g;function qf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wf,qf);pt[e]=new Rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wf,qf);pt[e]=new Rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wf,qf);pt[e]=new Rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new Rt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new Rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gf(t,e,n,r){var i=pt.hasOwnProperty(e)?pt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YT(e,n,i,r)&&(n=null),r||i===null?QT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=GT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bl=Symbol.for("react.element"),us=Symbol.for("react.portal"),cs=Symbol.for("react.fragment"),Kf=Symbol.for("react.strict_mode"),vd=Symbol.for("react.profiler"),K0=Symbol.for("react.provider"),Q0=Symbol.for("react.context"),Qf=Symbol.for("react.forward_ref"),yd=Symbol.for("react.suspense"),_d=Symbol.for("react.suspense_list"),Zf=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),Z0=Symbol.for("react.offscreen"),Ng=Symbol.iterator;function bo(t){return t===null||typeof t!="object"?null:(t=Ng&&t[Ng]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Ih;function zo(t){if(Ih===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ih=e&&e[1]||""}return`
`+Ih+t}var Ph=!1;function bh(t,e){if(!t||Ph)return"";Ph=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Ph=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zo(t):""}function XT(t){switch(t.tag){case 5:return zo(t.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return t=bh(t.type,!1),t;case 11:return t=bh(t.type.render,!1),t;case 1:return t=bh(t.type,!0),t;default:return""}}function wd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cs:return"Fragment";case us:return"Portal";case vd:return"Profiler";case Kf:return"StrictMode";case yd:return"Suspense";case _d:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Q0:return(t.displayName||"Context")+".Consumer";case K0:return(t._context.displayName||"Context")+".Provider";case Qf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zf:return e=t.displayName||null,e!==null?e:wd(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return wd(t(e))}catch{}}return null}function JT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wd(e);case 8:return e===Kf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Y0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eI(t){var e=Y0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kl(t){t._valueTracker||(t._valueTracker=eI(t))}function X0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Y0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ed(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Mg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function J0(t,e){e=e.checked,e!=null&&Gf(t,"checked",e,!1)}function xd(t,e){J0(t,e);var n=qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cd(t,e.type,qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Og(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cd(t,e,n){(e!=="number"||Cu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bo=Array.isArray;function xs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Sd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Bo(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qr(n)}}function ew(t,e){var n=qr(e.value),r=qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Vg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Td(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ll,nw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ll=Ll||document.createElement("div"),Ll.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ll.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tI=["Webkit","ms","Moz","O"];Object.keys(Yo).forEach(function(t){tI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yo[e]=Yo[t]})});function rw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yo.hasOwnProperty(t)&&Yo[t]?(""+e).trim():e+"px"}function iw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=rw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nI=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Id(t,e){if(e){if(nI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Pd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bd=null;function Yf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kd=null,Cs=null,Ss=null;function jg(t){if(t=Ga(t)){if(typeof kd!="function")throw Error($(280));var e=t.stateNode;e&&(e=Pc(e),kd(t.stateNode,t.type,e))}}function sw(t){Cs?Ss?Ss.push(t):Ss=[t]:Cs=t}function ow(){if(Cs){var t=Cs,e=Ss;if(Ss=Cs=null,jg(t),e)for(t=0;t<e.length;t++)jg(e[t])}}function aw(t,e){return t(e)}function lw(){}var kh=!1;function uw(t,e,n){if(kh)return t(e,n);kh=!0;try{return aw(t,e,n)}finally{kh=!1,(Cs!==null||Ss!==null)&&(lw(),ow())}}function pa(t,e){var n=t.stateNode;if(n===null)return null;var r=Pc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Ld=!1;if(Zn)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){Ld=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{Ld=!1}function rI(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Xo=!1,Su=null,Tu=!1,Rd=null,iI={onError:function(t){Xo=!0,Su=t}};function sI(t,e,n,r,i,s,o,a,u){Xo=!1,Su=null,rI.apply(iI,arguments)}function oI(t,e,n,r,i,s,o,a,u){if(sI.apply(this,arguments),Xo){if(Xo){var c=Su;Xo=!1,Su=null}else throw Error($(198));Tu||(Tu=!0,Rd=c)}}function zi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ug(t){if(zi(t)!==t)throw Error($(188))}function aI(t){var e=t.alternate;if(!e){if(e=zi(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ug(i),t;if(s===r)return Ug(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function hw(t){return t=aI(t),t!==null?dw(t):null}function dw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dw(t);if(e!==null)return e;t=t.sibling}return null}var fw=Gt.unstable_scheduleCallback,Fg=Gt.unstable_cancelCallback,lI=Gt.unstable_shouldYield,uI=Gt.unstable_requestPaint,Ge=Gt.unstable_now,cI=Gt.unstable_getCurrentPriorityLevel,Xf=Gt.unstable_ImmediatePriority,pw=Gt.unstable_UserBlockingPriority,Iu=Gt.unstable_NormalPriority,hI=Gt.unstable_LowPriority,mw=Gt.unstable_IdlePriority,Cc=null,Tn=null;function dI(t){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Cc,t,void 0,(t.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:mI,fI=Math.log,pI=Math.LN2;function mI(t){return t>>>=0,t===0?32:31-(fI(t)/pI|0)|0}var Rl=64,Al=4194304;function $o(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=$o(a):(s&=o,s!==0&&(r=$o(s)))}else o=n&~i,o!==0?r=$o(o):s!==0&&(r=$o(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mn(e),i=1<<n,r|=t[n],e&=~i;return r}function gI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-mn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=gI(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Ad(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gw(){var t=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),t}function Lh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mn(e),t[e]=n}function yI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-mn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Jf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function vw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yw,ep,_w,ww,Ew,Nd=!1,Nl=[],Nr=null,Mr=null,Or=null,ma=new Map,ga=new Map,Sr=[],_I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zg(t,e){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":ma.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ga.delete(e.pointerId)}}function Lo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ga(e),e!==null&&ep(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wI(t,e,n,r,i){switch(e){case"focusin":return Nr=Lo(Nr,t,e,n,r,i),!0;case"dragenter":return Mr=Lo(Mr,t,e,n,r,i),!0;case"mouseover":return Or=Lo(Or,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ma.set(s,Lo(ma.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ga.set(s,Lo(ga.get(s)||null,t,e,n,r,i)),!0}return!1}function xw(t){var e=xi(t.target);if(e!==null){var n=zi(e);if(n!==null){if(e=n.tag,e===13){if(e=cw(n),e!==null){t.blockedOn=e,Ew(t.priority,function(){_w(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Md(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bd=r,n.target.dispatchEvent(r),bd=null}else return e=Ga(n),e!==null&&ep(e),t.blockedOn=n,!1;e.shift()}return!0}function Bg(t,e,n){tu(t)&&n.delete(e)}function EI(){Nd=!1,Nr!==null&&tu(Nr)&&(Nr=null),Mr!==null&&tu(Mr)&&(Mr=null),Or!==null&&tu(Or)&&(Or=null),ma.forEach(Bg),ga.forEach(Bg)}function Ro(t,e){t.blockedOn===e&&(t.blockedOn=null,Nd||(Nd=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,EI)))}function va(t){function e(i){return Ro(i,t)}if(0<Nl.length){Ro(Nl[0],t);for(var n=1;n<Nl.length;n++){var r=Nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nr!==null&&Ro(Nr,t),Mr!==null&&Ro(Mr,t),Or!==null&&Ro(Or,t),ma.forEach(e),ga.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)xw(n),n.blockedOn===null&&Sr.shift()}var Ts=ar.ReactCurrentBatchConfig,bu=!0;function xI(t,e,n,r){var i=be,s=Ts.transition;Ts.transition=null;try{be=1,tp(t,e,n,r)}finally{be=i,Ts.transition=s}}function CI(t,e,n,r){var i=be,s=Ts.transition;Ts.transition=null;try{be=4,tp(t,e,n,r)}finally{be=i,Ts.transition=s}}function tp(t,e,n,r){if(bu){var i=Md(t,e,n,r);if(i===null)Fh(t,e,r,ku,n),zg(t,r);else if(wI(i,t,e,n,r))r.stopPropagation();else if(zg(t,r),e&4&&-1<_I.indexOf(t)){for(;i!==null;){var s=Ga(i);if(s!==null&&yw(s),s=Md(t,e,n,r),s===null&&Fh(t,e,r,ku,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Fh(t,e,r,null,n)}}var ku=null;function Md(t,e,n,r){if(ku=null,t=Yf(r),t=xi(t),t!==null)if(e=zi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ku=t,null}function Cw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cI()){case Xf:return 1;case pw:return 4;case Iu:case hI:return 16;case mw:return 536870912;default:return 16}default:return 16}}var Lr=null,np=null,nu=null;function Sw(){if(nu)return nu;var t,e=np,n=e.length,r,i="value"in Lr?Lr.value:Lr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return nu=i.slice(t,1<r?1-r:void 0)}function ru(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ml(){return!0}function $g(){return!1}function Qt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ml:$g,this.isPropagationStopped=$g,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),e}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rp=Qt(Zs),qa=Fe({},Zs,{view:0,detail:0}),SI=Qt(qa),Rh,Ah,Ao,Sc=Fe({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ip,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ao&&(Ao&&t.type==="mousemove"?(Rh=t.screenX-Ao.screenX,Ah=t.screenY-Ao.screenY):Ah=Rh=0,Ao=t),Rh)},movementY:function(t){return"movementY"in t?t.movementY:Ah}}),Hg=Qt(Sc),TI=Fe({},Sc,{dataTransfer:0}),II=Qt(TI),PI=Fe({},qa,{relatedTarget:0}),Nh=Qt(PI),bI=Fe({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),kI=Qt(bI),LI=Fe({},Zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RI=Qt(LI),AI=Fe({},Zs,{data:0}),Wg=Qt(AI),NI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OI[t])?!!e[t]:!1}function ip(){return DI}var VI=Fe({},qa,{key:function(t){if(t.key){var e=NI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ru(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?MI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ip,charCode:function(t){return t.type==="keypress"?ru(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ru(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jI=Qt(VI),UI=Fe({},Sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qg=Qt(UI),FI=Fe({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ip}),zI=Qt(FI),BI=Fe({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),$I=Qt(BI),HI=Fe({},Sc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WI=Qt(HI),qI=[9,13,27,32],sp=Zn&&"CompositionEvent"in window,Jo=null;Zn&&"documentMode"in document&&(Jo=document.documentMode);var GI=Zn&&"TextEvent"in window&&!Jo,Tw=Zn&&(!sp||Jo&&8<Jo&&11>=Jo),Gg=String.fromCharCode(32),Kg=!1;function Iw(t,e){switch(t){case"keyup":return qI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hs=!1;function KI(t,e){switch(t){case"compositionend":return Pw(e);case"keypress":return e.which!==32?null:(Kg=!0,Gg);case"textInput":return t=e.data,t===Gg&&Kg?null:t;default:return null}}function QI(t,e){if(hs)return t==="compositionend"||!sp&&Iw(t,e)?(t=Sw(),nu=np=Lr=null,hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tw&&e.locale!=="ko"?null:e.data;default:return null}}var ZI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZI[t.type]:e==="textarea"}function bw(t,e,n,r){sw(r),e=Lu(e,"onChange"),0<e.length&&(n=new rp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ea=null,ya=null;function YI(t){Uw(t,0)}function Tc(t){var e=ps(t);if(X0(e))return t}function XI(t,e){if(t==="change")return e}var kw=!1;if(Zn){var Mh;if(Zn){var Oh="oninput"in document;if(!Oh){var Zg=document.createElement("div");Zg.setAttribute("oninput","return;"),Oh=typeof Zg.oninput=="function"}Mh=Oh}else Mh=!1;kw=Mh&&(!document.documentMode||9<document.documentMode)}function Yg(){ea&&(ea.detachEvent("onpropertychange",Lw),ya=ea=null)}function Lw(t){if(t.propertyName==="value"&&Tc(ya)){var e=[];bw(e,ya,t,Yf(t)),uw(YI,e)}}function JI(t,e,n){t==="focusin"?(Yg(),ea=e,ya=n,ea.attachEvent("onpropertychange",Lw)):t==="focusout"&&Yg()}function eP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tc(ya)}function tP(t,e){if(t==="click")return Tc(e)}function nP(t,e){if(t==="input"||t==="change")return Tc(e)}function rP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:rP;function _a(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!gd.call(e,i)||!vn(t[i],e[i]))return!1}return!0}function Xg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jg(t,e){var n=Xg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xg(n)}}function Rw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Rw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Aw(){for(var t=window,e=Cu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cu(t.document)}return e}function op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iP(t){var e=Aw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Rw(n.ownerDocument.documentElement,n)){if(r!==null&&op(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Jg(n,s);var o=Jg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sP=Zn&&"documentMode"in document&&11>=document.documentMode,ds=null,Od=null,ta=null,Dd=!1;function ev(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dd||ds==null||ds!==Cu(r)||(r=ds,"selectionStart"in r&&op(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ta&&_a(ta,r)||(ta=r,r=Lu(Od,"onSelect"),0<r.length&&(e=new rp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ds)))}function Ol(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fs={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},Dh={},Nw={};Zn&&(Nw=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function Ic(t){if(Dh[t])return Dh[t];if(!fs[t])return t;var e=fs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Nw)return Dh[t]=e[n];return t}var Mw=Ic("animationend"),Ow=Ic("animationiteration"),Dw=Ic("animationstart"),Vw=Ic("transitionend"),jw=new Map,tv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(t,e){jw.set(t,e),Fi(e,[t])}for(var Vh=0;Vh<tv.length;Vh++){var jh=tv[Vh],oP=jh.toLowerCase(),aP=jh[0].toUpperCase()+jh.slice(1);ti(oP,"on"+aP)}ti(Mw,"onAnimationEnd");ti(Ow,"onAnimationIteration");ti(Dw,"onAnimationStart");ti("dblclick","onDoubleClick");ti("focusin","onFocus");ti("focusout","onBlur");ti(Vw,"onTransitionEnd");Ns("onMouseEnter",["mouseout","mouseover"]);Ns("onMouseLeave",["mouseout","mouseover"]);Ns("onPointerEnter",["pointerout","pointerover"]);Ns("onPointerLeave",["pointerout","pointerover"]);Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function nv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oI(r,e,void 0,t),t.currentTarget=null}function Uw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;nv(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;nv(i,a,c),s=u}}}if(Tu)throw t=Rd,Tu=!1,Rd=null,t}function Ae(t,e){var n=e[zd];n===void 0&&(n=e[zd]=new Set);var r=t+"__bubble";n.has(r)||(Fw(e,t,2,!1),n.add(r))}function Uh(t,e,n){var r=0;e&&(r|=4),Fw(n,t,r,e)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function wa(t){if(!t[Dl]){t[Dl]=!0,G0.forEach(function(n){n!=="selectionchange"&&(lP.has(n)||Uh(n,!1,t),Uh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dl]||(e[Dl]=!0,Uh("selectionchange",!1,e))}}function Fw(t,e,n,r){switch(Cw(e)){case 1:var i=xI;break;case 4:i=CI;break;default:i=tp}n=i.bind(null,e,n,t),i=void 0,!Ld||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=xi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}uw(function(){var c=s,h=Yf(n),p=[];e:{var m=jw.get(t);if(m!==void 0){var w=rp,y=t;switch(t){case"keypress":if(ru(n)===0)break e;case"keydown":case"keyup":w=jI;break;case"focusin":y="focus",w=Nh;break;case"focusout":y="blur",w=Nh;break;case"beforeblur":case"afterblur":w=Nh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Hg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=II;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=zI;break;case Mw:case Ow:case Dw:w=kI;break;case Vw:w=$I;break;case"scroll":w=SI;break;case"wheel":w=WI;break;case"copy":case"cut":case"paste":w=RI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=qg}var P=(e&4)!==0,k=!P&&t==="scroll",C=P?m!==null?m+"Capture":null:m;P=[];for(var _=c,I;_!==null;){I=_;var A=I.stateNode;if(I.tag===5&&A!==null&&(I=A,C!==null&&(A=pa(_,C),A!=null&&P.push(Ea(_,A,I)))),k)break;_=_.return}0<P.length&&(m=new w(m,y,null,n,h),p.push({event:m,listeners:P}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",m&&n!==bd&&(y=n.relatedTarget||n.fromElement)&&(xi(y)||y[Yn]))break e;if((w||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,w?(y=n.relatedTarget||n.toElement,w=c,y=y?xi(y):null,y!==null&&(k=zi(y),y!==k||y.tag!==5&&y.tag!==6)&&(y=null)):(w=null,y=c),w!==y)){if(P=Hg,A="onMouseLeave",C="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(P=qg,A="onPointerLeave",C="onPointerEnter",_="pointer"),k=w==null?m:ps(w),I=y==null?m:ps(y),m=new P(A,_+"leave",w,n,h),m.target=k,m.relatedTarget=I,A=null,xi(h)===c&&(P=new P(C,_+"enter",y,n,h),P.target=I,P.relatedTarget=k,A=P),k=A,w&&y)t:{for(P=w,C=y,_=0,I=P;I;I=is(I))_++;for(I=0,A=C;A;A=is(A))I++;for(;0<_-I;)P=is(P),_--;for(;0<I-_;)C=is(C),I--;for(;_--;){if(P===C||C!==null&&P===C.alternate)break t;P=is(P),C=is(C)}P=null}else P=null;w!==null&&rv(p,m,w,P,!1),y!==null&&k!==null&&rv(p,k,y,P,!0)}}e:{if(m=c?ps(c):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var N=XI;else if(Qg(m))if(kw)N=nP;else{N=eP;var O=JI}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=tP);if(N&&(N=N(t,c))){bw(p,N,n,h);break e}O&&O(t,m,c),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&Cd(m,"number",m.value)}switch(O=c?ps(c):window,t){case"focusin":(Qg(O)||O.contentEditable==="true")&&(ds=O,Od=c,ta=null);break;case"focusout":ta=Od=ds=null;break;case"mousedown":Dd=!0;break;case"contextmenu":case"mouseup":case"dragend":Dd=!1,ev(p,n,h);break;case"selectionchange":if(sP)break;case"keydown":case"keyup":ev(p,n,h)}var S;if(sp)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else hs?Iw(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Tw&&n.locale!=="ko"&&(hs||x!=="onCompositionStart"?x==="onCompositionEnd"&&hs&&(S=Sw()):(Lr=h,np="value"in Lr?Lr.value:Lr.textContent,hs=!0)),O=Lu(c,x),0<O.length&&(x=new Wg(x,t,null,n,h),p.push({event:x,listeners:O}),S?x.data=S:(S=Pw(n),S!==null&&(x.data=S)))),(S=GI?KI(t,n):QI(t,n))&&(c=Lu(c,"onBeforeInput"),0<c.length&&(h=new Wg("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:c}),h.data=S))}Uw(p,e)})}function Ea(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=pa(t,n),s!=null&&r.unshift(Ea(t,s,i)),s=pa(t,e),s!=null&&r.push(Ea(t,s,i))),t=t.return}return r}function is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=pa(n,s),u!=null&&o.unshift(Ea(n,u,a))):i||(u=pa(n,s),u!=null&&o.push(Ea(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uP=/\r\n?/g,cP=/\u0000|\uFFFD/g;function iv(t){return(typeof t=="string"?t:""+t).replace(uP,`
`).replace(cP,"")}function Vl(t,e,n){if(e=iv(e),iv(t)!==e&&n)throw Error($(425))}function Ru(){}var Vd=null,jd=null;function Ud(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fd=typeof setTimeout=="function"?setTimeout:void 0,hP=typeof clearTimeout=="function"?clearTimeout:void 0,sv=typeof Promise=="function"?Promise:void 0,dP=typeof queueMicrotask=="function"?queueMicrotask:typeof sv<"u"?function(t){return sv.resolve(null).then(t).catch(fP)}:Fd;function fP(t){setTimeout(function(){throw t})}function zh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),va(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);va(e)}function Dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ov(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ys=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Ys,xa="__reactProps$"+Ys,Yn="__reactContainer$"+Ys,zd="__reactEvents$"+Ys,pP="__reactListeners$"+Ys,mP="__reactHandles$"+Ys;function xi(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yn]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ov(t);t!==null;){if(n=t[Sn])return n;t=ov(t)}return e}t=n,n=t.parentNode}return null}function Ga(t){return t=t[Sn]||t[Yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Pc(t){return t[xa]||null}var Bd=[],ms=-1;function ni(t){return{current:t}}function Me(t){0>ms||(t.current=Bd[ms],Bd[ms]=null,ms--)}function Le(t,e){ms++,Bd[ms]=t.current,t.current=e}var Gr={},Tt=ni(Gr),Dt=ni(!1),ki=Gr;function Ms(t,e){var n=t.type.contextTypes;if(!n)return Gr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Vt(t){return t=t.childContextTypes,t!=null}function Au(){Me(Dt),Me(Tt)}function av(t,e,n){if(Tt.current!==Gr)throw Error($(168));Le(Tt,e),Le(Dt,n)}function zw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,JT(t)||"Unknown",i));return Fe({},n,r)}function Nu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gr,ki=Tt.current,Le(Tt,t),Le(Dt,Dt.current),!0}function lv(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=zw(t,e,ki),r.__reactInternalMemoizedMergedChildContext=t,Me(Dt),Me(Tt),Le(Tt,t)):Me(Dt),Le(Dt,n)}var zn=null,bc=!1,Bh=!1;function Bw(t){zn===null?zn=[t]:zn.push(t)}function gP(t){bc=!0,Bw(t)}function ri(){if(!Bh&&zn!==null){Bh=!0;var t=0,e=be;try{var n=zn;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,bc=!1}catch(i){throw zn!==null&&(zn=zn.slice(t+1)),fw(Xf,ri),i}finally{be=e,Bh=!1}}return null}var gs=[],vs=0,Mu=null,Ou=0,Xt=[],Jt=0,Li=null,Bn=1,$n="";function _i(t,e){gs[vs++]=Ou,gs[vs++]=Mu,Mu=t,Ou=e}function $w(t,e,n){Xt[Jt++]=Bn,Xt[Jt++]=$n,Xt[Jt++]=Li,Li=t;var r=Bn;t=$n;var i=32-mn(r)-1;r&=~(1<<i),n+=1;var s=32-mn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Bn=1<<32-mn(e)+i|n<<i|r,$n=s+t}else Bn=1<<s|n<<i|r,$n=t}function ap(t){t.return!==null&&(_i(t,1),$w(t,1,0))}function lp(t){for(;t===Mu;)Mu=gs[--vs],gs[vs]=null,Ou=gs[--vs],gs[vs]=null;for(;t===Li;)Li=Xt[--Jt],Xt[Jt]=null,$n=Xt[--Jt],Xt[Jt]=null,Bn=Xt[--Jt],Xt[Jt]=null}var qt=null,Ht=null,Oe=!1,fn=null;function Hw(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function uv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Ht=Dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Li!==null?{id:Bn,overflow:$n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,Ht=null,!0):!1;default:return!1}}function $d(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hd(t){if(Oe){var e=Ht;if(e){var n=e;if(!uv(t,e)){if($d(t))throw Error($(418));e=Dr(n.nextSibling);var r=qt;e&&uv(t,e)?Hw(r,n):(t.flags=t.flags&-4097|2,Oe=!1,qt=t)}}else{if($d(t))throw Error($(418));t.flags=t.flags&-4097|2,Oe=!1,qt=t}}}function cv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function jl(t){if(t!==qt)return!1;if(!Oe)return cv(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ud(t.type,t.memoizedProps)),e&&(e=Ht)){if($d(t))throw Ww(),Error($(418));for(;e;)Hw(t,e),e=Dr(e.nextSibling)}if(cv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=Dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=qt?Dr(t.stateNode.nextSibling):null;return!0}function Ww(){for(var t=Ht;t;)t=Dr(t.nextSibling)}function Os(){Ht=qt=null,Oe=!1}function up(t){fn===null?fn=[t]:fn.push(t)}var vP=ar.ReactCurrentBatchConfig;function No(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Ul(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hv(t){var e=t._init;return e(t._payload)}function qw(t){function e(C,_){if(t){var I=C.deletions;I===null?(C.deletions=[_],C.flags|=16):I.push(_)}}function n(C,_){if(!t)return null;for(;_!==null;)e(C,_),_=_.sibling;return null}function r(C,_){for(C=new Map;_!==null;)_.key!==null?C.set(_.key,_):C.set(_.index,_),_=_.sibling;return C}function i(C,_){return C=Fr(C,_),C.index=0,C.sibling=null,C}function s(C,_,I){return C.index=I,t?(I=C.alternate,I!==null?(I=I.index,I<_?(C.flags|=2,_):I):(C.flags|=2,_)):(C.flags|=1048576,_)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function a(C,_,I,A){return _===null||_.tag!==6?(_=Qh(I,C.mode,A),_.return=C,_):(_=i(_,I),_.return=C,_)}function u(C,_,I,A){var N=I.type;return N===cs?h(C,_,I.props.children,A,I.key):_!==null&&(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Er&&hv(N)===_.type)?(A=i(_,I.props),A.ref=No(C,_,I),A.return=C,A):(A=cu(I.type,I.key,I.props,null,C.mode,A),A.ref=No(C,_,I),A.return=C,A)}function c(C,_,I,A){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=Zh(I,C.mode,A),_.return=C,_):(_=i(_,I.children||[]),_.return=C,_)}function h(C,_,I,A,N){return _===null||_.tag!==7?(_=bi(I,C.mode,A,N),_.return=C,_):(_=i(_,I),_.return=C,_)}function p(C,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Qh(""+_,C.mode,I),_.return=C,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bl:return I=cu(_.type,_.key,_.props,null,C.mode,I),I.ref=No(C,null,_),I.return=C,I;case us:return _=Zh(_,C.mode,I),_.return=C,_;case Er:var A=_._init;return p(C,A(_._payload),I)}if(Bo(_)||bo(_))return _=bi(_,C.mode,I,null),_.return=C,_;Ul(C,_)}return null}function m(C,_,I,A){var N=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return N!==null?null:a(C,_,""+I,A);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case bl:return I.key===N?u(C,_,I,A):null;case us:return I.key===N?c(C,_,I,A):null;case Er:return N=I._init,m(C,_,N(I._payload),A)}if(Bo(I)||bo(I))return N!==null?null:h(C,_,I,A,null);Ul(C,I)}return null}function w(C,_,I,A,N){if(typeof A=="string"&&A!==""||typeof A=="number")return C=C.get(I)||null,a(_,C,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case bl:return C=C.get(A.key===null?I:A.key)||null,u(_,C,A,N);case us:return C=C.get(A.key===null?I:A.key)||null,c(_,C,A,N);case Er:var O=A._init;return w(C,_,I,O(A._payload),N)}if(Bo(A)||bo(A))return C=C.get(I)||null,h(_,C,A,N,null);Ul(_,A)}return null}function y(C,_,I,A){for(var N=null,O=null,S=_,x=_=0,E=null;S!==null&&x<I.length;x++){S.index>x?(E=S,S=null):E=S.sibling;var b=m(C,S,I[x],A);if(b===null){S===null&&(S=E);break}t&&S&&b.alternate===null&&e(C,S),_=s(b,_,x),O===null?N=b:O.sibling=b,O=b,S=E}if(x===I.length)return n(C,S),Oe&&_i(C,x),N;if(S===null){for(;x<I.length;x++)S=p(C,I[x],A),S!==null&&(_=s(S,_,x),O===null?N=S:O.sibling=S,O=S);return Oe&&_i(C,x),N}for(S=r(C,S);x<I.length;x++)E=w(S,C,x,I[x],A),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?x:E.key),_=s(E,_,x),O===null?N=E:O.sibling=E,O=E);return t&&S.forEach(function(R){return e(C,R)}),Oe&&_i(C,x),N}function P(C,_,I,A){var N=bo(I);if(typeof N!="function")throw Error($(150));if(I=N.call(I),I==null)throw Error($(151));for(var O=N=null,S=_,x=_=0,E=null,b=I.next();S!==null&&!b.done;x++,b=I.next()){S.index>x?(E=S,S=null):E=S.sibling;var R=m(C,S,b.value,A);if(R===null){S===null&&(S=E);break}t&&S&&R.alternate===null&&e(C,S),_=s(R,_,x),O===null?N=R:O.sibling=R,O=R,S=E}if(b.done)return n(C,S),Oe&&_i(C,x),N;if(S===null){for(;!b.done;x++,b=I.next())b=p(C,b.value,A),b!==null&&(_=s(b,_,x),O===null?N=b:O.sibling=b,O=b);return Oe&&_i(C,x),N}for(S=r(C,S);!b.done;x++,b=I.next())b=w(S,C,x,b.value,A),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?x:b.key),_=s(b,_,x),O===null?N=b:O.sibling=b,O=b);return t&&S.forEach(function(M){return e(C,M)}),Oe&&_i(C,x),N}function k(C,_,I,A){if(typeof I=="object"&&I!==null&&I.type===cs&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case bl:e:{for(var N=I.key,O=_;O!==null;){if(O.key===N){if(N=I.type,N===cs){if(O.tag===7){n(C,O.sibling),_=i(O,I.props.children),_.return=C,C=_;break e}}else if(O.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Er&&hv(N)===O.type){n(C,O.sibling),_=i(O,I.props),_.ref=No(C,O,I),_.return=C,C=_;break e}n(C,O);break}else e(C,O);O=O.sibling}I.type===cs?(_=bi(I.props.children,C.mode,A,I.key),_.return=C,C=_):(A=cu(I.type,I.key,I.props,null,C.mode,A),A.ref=No(C,_,I),A.return=C,C=A)}return o(C);case us:e:{for(O=I.key;_!==null;){if(_.key===O)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(C,_.sibling),_=i(_,I.children||[]),_.return=C,C=_;break e}else{n(C,_);break}else e(C,_);_=_.sibling}_=Zh(I,C.mode,A),_.return=C,C=_}return o(C);case Er:return O=I._init,k(C,_,O(I._payload),A)}if(Bo(I))return y(C,_,I,A);if(bo(I))return P(C,_,I,A);Ul(C,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(C,_.sibling),_=i(_,I),_.return=C,C=_):(n(C,_),_=Qh(I,C.mode,A),_.return=C,C=_),o(C)):n(C,_)}return k}var Ds=qw(!0),Gw=qw(!1),Du=ni(null),Vu=null,ys=null,cp=null;function hp(){cp=ys=Vu=null}function dp(t){var e=Du.current;Me(Du),t._currentValue=e}function Wd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Is(t,e){Vu=t,cp=ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function on(t){var e=t._currentValue;if(cp!==t)if(t={context:t,memoizedValue:e,next:null},ys===null){if(Vu===null)throw Error($(308));ys=t,Vu.dependencies={lanes:0,firstContext:t}}else ys=ys.next=t;return e}var Ci=null;function fp(t){Ci===null?Ci=[t]:Ci.push(t)}function Kw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,fp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Xn(t,r)}function Xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xr=!1;function pp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Xn(t,n)}return i=r.interleaved,i===null?(e.next=e,fp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Xn(t,n)}function iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jf(t,n)}}function dv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ju(t,e,n,r){var i=t.updateQueue;xr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var p=i.baseState;o=0,h=c=u=null,a=s;do{var m=a.lane,w=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,P=a;switch(m=e,w=n,P.tag){case 1:if(y=P.payload,typeof y=="function"){p=y.call(w,p,m);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=P.payload,m=typeof y=="function"?y.call(w,p,m):y,m==null)break e;p=Fe({},p,m);break e;case 2:xr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else w={eventTime:w,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=w,u=p):h=h.next=w,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(h===null&&(u=p),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ai|=o,t.lanes=o,t.memoizedState=p}}function fv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Ka={},In=ni(Ka),Ca=ni(Ka),Sa=ni(Ka);function Si(t){if(t===Ka)throw Error($(174));return t}function mp(t,e){switch(Le(Sa,e),Le(Ca,t),Le(In,Ka),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Td(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Td(e,t)}Me(In),Le(In,e)}function Vs(){Me(In),Me(Ca),Me(Sa)}function Zw(t){Si(Sa.current);var e=Si(In.current),n=Td(e,t.type);e!==n&&(Le(Ca,t),Le(In,n))}function gp(t){Ca.current===t&&(Me(In),Me(Ca))}var Ve=ni(0);function Uu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $h=[];function vp(){for(var t=0;t<$h.length;t++)$h[t]._workInProgressVersionPrimary=null;$h.length=0}var su=ar.ReactCurrentDispatcher,Hh=ar.ReactCurrentBatchConfig,Ri=0,je=null,Ye=null,st=null,Fu=!1,na=!1,Ta=0,yP=0;function yt(){throw Error($(321))}function yp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function _p(t,e,n,r,i,s){if(Ri=s,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,su.current=t===null||t.memoizedState===null?xP:CP,t=n(r,i),na){s=0;do{if(na=!1,Ta=0,25<=s)throw Error($(301));s+=1,st=Ye=null,e.updateQueue=null,su.current=SP,t=n(r,i)}while(na)}if(su.current=zu,e=Ye!==null&&Ye.next!==null,Ri=0,st=Ye=je=null,Fu=!1,e)throw Error($(300));return t}function wp(){var t=Ta!==0;return Ta=0,t}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?je.memoizedState=st=t:st=st.next=t,st}function an(){if(Ye===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=st===null?je.memoizedState:st.next;if(e!==null)st=e,Ye=t;else{if(t===null)throw Error($(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},st===null?je.memoizedState=st=t:st=st.next=t}return st}function Ia(t,e){return typeof e=="function"?e(t):e}function Wh(t){var e=an(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ye,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var h=c.lane;if((Ri&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=p,o=r):u=u.next=p,je.lanes|=h,Ai|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,vn(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,je.lanes|=s,Ai|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qh(t){var e=an(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);vn(s,e.memoizedState)||(Ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Yw(){}function Xw(t,e){var n=je,r=an(),i=e(),s=!vn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ot=!0),r=r.queue,Ep(tE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,Pa(9,eE.bind(null,n,r,i,e),void 0,null),ot===null)throw Error($(349));Ri&30||Jw(n,e,i)}return i}function Jw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function eE(t,e,n,r){e.value=n,e.getSnapshot=r,nE(e)&&rE(t)}function tE(t,e,n){return n(function(){nE(e)&&rE(t)})}function nE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function rE(t){var e=Xn(t,1);e!==null&&gn(e,t,1,-1)}function pv(t){var e=xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},e.queue=t,t=t.dispatch=EP.bind(null,je,t),[e.memoizedState,t]}function Pa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function iE(){return an().memoizedState}function ou(t,e,n,r){var i=xn();je.flags|=t,i.memoizedState=Pa(1|e,n,void 0,r===void 0?null:r)}function kc(t,e,n,r){var i=an();r=r===void 0?null:r;var s=void 0;if(Ye!==null){var o=Ye.memoizedState;if(s=o.destroy,r!==null&&yp(r,o.deps)){i.memoizedState=Pa(e,n,s,r);return}}je.flags|=t,i.memoizedState=Pa(1|e,n,s,r)}function mv(t,e){return ou(8390656,8,t,e)}function Ep(t,e){return kc(2048,8,t,e)}function sE(t,e){return kc(4,2,t,e)}function oE(t,e){return kc(4,4,t,e)}function aE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lE(t,e,n){return n=n!=null?n.concat([t]):null,kc(4,4,aE.bind(null,e,t),n)}function xp(){}function uE(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function cE(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hE(t,e,n){return Ri&21?(vn(n,e)||(n=gw(),je.lanes|=n,Ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function _P(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=Hh.transition;Hh.transition={};try{t(!1),e()}finally{be=n,Hh.transition=r}}function dE(){return an().memoizedState}function wP(t,e,n){var r=Ur(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fE(t))pE(e,n);else if(n=Kw(t,e,n,r),n!==null){var i=kt();gn(n,t,r,i),mE(n,e,r)}}function EP(t,e,n){var r=Ur(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fE(t))pE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,vn(a,o)){var u=e.interleaved;u===null?(i.next=i,fp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Kw(t,e,i,r),n!==null&&(i=kt(),gn(n,t,r,i),mE(n,e,r))}}function fE(t){var e=t.alternate;return t===je||e!==null&&e===je}function pE(t,e){na=Fu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jf(t,n)}}var zu={readContext:on,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},xP={readContext:on,useCallback:function(t,e){return xn().memoizedState=[t,e===void 0?null:e],t},useContext:on,useEffect:mv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ou(4194308,4,aE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ou(4194308,4,t,e)},useInsertionEffect:function(t,e){return ou(4,2,t,e)},useMemo:function(t,e){var n=xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wP.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=xn();return t={current:t},e.memoizedState=t},useState:pv,useDebugValue:xp,useDeferredValue:function(t){return xn().memoizedState=t},useTransition:function(){var t=pv(!1),e=t[0];return t=_P.bind(null,t[1]),xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,i=xn();if(Oe){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ot===null)throw Error($(349));Ri&30||Jw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,mv(tE.bind(null,r,s,t),[t]),r.flags|=2048,Pa(9,eE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=xn(),e=ot.identifierPrefix;if(Oe){var n=$n,r=Bn;n=(r&~(1<<32-mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ta++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CP={readContext:on,useCallback:uE,useContext:on,useEffect:Ep,useImperativeHandle:lE,useInsertionEffect:sE,useLayoutEffect:oE,useMemo:cE,useReducer:Wh,useRef:iE,useState:function(){return Wh(Ia)},useDebugValue:xp,useDeferredValue:function(t){var e=an();return hE(e,Ye.memoizedState,t)},useTransition:function(){var t=Wh(Ia)[0],e=an().memoizedState;return[t,e]},useMutableSource:Yw,useSyncExternalStore:Xw,useId:dE,unstable_isNewReconciler:!1},SP={readContext:on,useCallback:uE,useContext:on,useEffect:Ep,useImperativeHandle:lE,useInsertionEffect:sE,useLayoutEffect:oE,useMemo:cE,useReducer:qh,useRef:iE,useState:function(){return qh(Ia)},useDebugValue:xp,useDeferredValue:function(t){var e=an();return Ye===null?e.memoizedState=t:hE(e,Ye.memoizedState,t)},useTransition:function(){var t=qh(Ia)[0],e=an().memoizedState;return[t,e]},useMutableSource:Yw,useSyncExternalStore:Xw,useId:dE,unstable_isNewReconciler:!1};function hn(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Lc={isMounted:function(t){return(t=t._reactInternals)?zi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kt(),i=Ur(t),s=qn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Vr(t,s,i),e!==null&&(gn(e,t,i,r),iu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kt(),i=Ur(t),s=qn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Vr(t,s,i),e!==null&&(gn(e,t,i,r),iu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kt(),r=Ur(t),i=qn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Vr(t,i,r),e!==null&&(gn(e,t,r,n),iu(e,t,r))}};function gv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!_a(n,r)||!_a(i,s):!0}function gE(t,e,n){var r=!1,i=Gr,s=e.contextType;return typeof s=="object"&&s!==null?s=on(s):(i=Vt(e)?ki:Tt.current,r=e.contextTypes,s=(r=r!=null)?Ms(t,i):Gr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function vv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Lc.enqueueReplaceState(e,e.state,null)}function Gd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},pp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=on(s):(s=Vt(e)?ki:Tt.current,i.context=Ms(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Lc.enqueueReplaceState(i,i.state,null),ju(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function js(t,e){try{var n="",r=e;do n+=XT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Gh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TP=typeof WeakMap=="function"?WeakMap:Map;function vE(t,e,n){n=qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$u||($u=!0,sf=r),Kd(t,e)},n}function yE(t,e,n){n=qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Kd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Kd(t,e),typeof r!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function yv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=UP.bind(null,t,e,n),e.then(t,t))}function _v(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function wv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qn(-1,1),e.tag=2,Vr(n,e,1))),n.lanes|=1),t)}var IP=ar.ReactCurrentOwner,Ot=!1;function bt(t,e,n,r){e.child=t===null?Gw(e,null,n,r):Ds(e,t.child,n,r)}function Ev(t,e,n,r,i){n=n.render;var s=e.ref;return Is(e,i),r=_p(t,e,n,r,s,i),n=wp(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jn(t,e,i)):(Oe&&n&&ap(e),e.flags|=1,bt(t,e,r,i),e.child)}function xv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Lp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,_E(t,e,s,r,i)):(t=cu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:_a,n(o,r)&&t.ref===e.ref)return Jn(t,e,i)}return e.flags|=1,t=Fr(s,r),t.ref=e.ref,t.return=e,e.child=t}function _E(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(_a(s,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,Jn(t,e,i)}return Qd(t,e,n,r,i)}function wE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(ws,Bt),Bt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(ws,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Le(ws,Bt),Bt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Le(ws,Bt),Bt|=r;return bt(t,e,i,n),e.child}function EE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qd(t,e,n,r,i){var s=Vt(n)?ki:Tt.current;return s=Ms(e,s),Is(e,i),n=_p(t,e,n,r,s,i),r=wp(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jn(t,e,i)):(Oe&&r&&ap(e),e.flags|=1,bt(t,e,n,i),e.child)}function Cv(t,e,n,r,i){if(Vt(n)){var s=!0;Nu(e)}else s=!1;if(Is(e,i),e.stateNode===null)au(t,e),gE(e,n,r),Gd(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=on(c):(c=Vt(n)?ki:Tt.current,c=Ms(e,c));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&vv(e,o,r,c),xr=!1;var m=e.memoizedState;o.state=m,ju(e,r,o,i),u=e.memoizedState,a!==r||m!==u||Dt.current||xr?(typeof h=="function"&&(qd(e,n,h,r),u=e.memoizedState),(a=xr||gv(e,n,a,r,m,u,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Qw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:hn(e.type,a),o.props=c,p=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=on(u):(u=Vt(n)?ki:Tt.current,u=Ms(e,u));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==u)&&vv(e,o,r,u),xr=!1,m=e.memoizedState,o.state=m,ju(e,r,o,i);var y=e.memoizedState;a!==p||m!==y||Dt.current||xr?(typeof w=="function"&&(qd(e,n,w,r),y=e.memoizedState),(c=xr||gv(e,n,c,r,m,y,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Zd(t,e,n,r,s,i)}function Zd(t,e,n,r,i,s){EE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&lv(e,n,!1),Jn(t,e,s);r=e.stateNode,IP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ds(e,t.child,null,s),e.child=Ds(e,null,a,s)):bt(t,e,a,s),e.memoizedState=r.state,i&&lv(e,n,!0),e.child}function xE(t){var e=t.stateNode;e.pendingContext?av(t,e.pendingContext,e.pendingContext!==e.context):e.context&&av(t,e.context,!1),mp(t,e.containerInfo)}function Sv(t,e,n,r,i){return Os(),up(i),e.flags|=256,bt(t,e,n,r),e.child}var Yd={dehydrated:null,treeContext:null,retryLane:0};function Xd(t){return{baseLanes:t,cachePool:null,transitions:null}}function CE(t,e,n){var r=e.pendingProps,i=Ve.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le(Ve,i&1),t===null)return Hd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Nc(o,r,0,null),t=bi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Xd(n),e.memoizedState=Yd,t):Cp(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return PP(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Fr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fr(a,s):(s=bi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Xd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Yd,r}return s=t.child,t=s.sibling,r=Fr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Cp(t,e){return e=Nc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fl(t,e,n,r){return r!==null&&up(r),Ds(e,t.child,null,n),t=Cp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Gh(Error($(422))),Fl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Nc({mode:"visible",children:r.children},i,0,null),s=bi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ds(e,t.child,null,o),e.child.memoizedState=Xd(o),e.memoizedState=Yd,s);if(!(e.mode&1))return Fl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=Gh(s,r,void 0),Fl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ot||a){if(r=ot,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Xn(t,i),gn(r,t,i,-1))}return kp(),r=Gh(Error($(421))),Fl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=FP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ht=Dr(i.nextSibling),qt=e,Oe=!0,fn=null,t!==null&&(Xt[Jt++]=Bn,Xt[Jt++]=$n,Xt[Jt++]=Li,Bn=t.id,$n=t.overflow,Li=e),e=Cp(e,r.children),e.flags|=4096,e)}function Tv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wd(t.return,e,n)}function Kh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function SE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(bt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tv(t,n,e);else if(t.tag===19)Tv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Uu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Kh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Uu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Kh(e,!0,n,null,s);break;case"together":Kh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function au(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bP(t,e,n){switch(e.tag){case 3:xE(e),Os();break;case 5:Zw(e);break;case 1:Vt(e.type)&&Nu(e);break;case 4:mp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(Du,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?CE(t,e,n):(Le(Ve,Ve.current&1),t=Jn(t,e,n),t!==null?t.sibling:null);Le(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return SE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,wE(t,e,n)}return Jn(t,e,n)}var TE,Jd,IE,PE;TE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jd=function(){};IE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Si(In.current);var s=null;switch(n){case"input":i=Ed(t,i),r=Ed(t,r),s=[];break;case"select":i=Fe({},i,{value:void 0}),r=Fe({},r,{value:void 0}),s=[];break;case"textarea":i=Sd(t,i),r=Sd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ru)}Id(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(da.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(da.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ae("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};PE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mo(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kP(t,e,n){var r=e.pendingProps;switch(lp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Vt(e.type)&&Au(),_t(e),null;case 3:return r=e.stateNode,Vs(),Me(Dt),Me(Tt),vp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(lf(fn),fn=null))),Jd(t,e),_t(e),null;case 5:gp(e);var i=Si(Sa.current);if(n=e.type,t!==null&&e.stateNode!=null)IE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return _t(e),null}if(t=Si(In.current),jl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Sn]=e,r[xa]=s,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(i=0;i<Ho.length;i++)Ae(Ho[i],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":Mg(r,s),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",r);break;case"textarea":Dg(r,s),Ae("invalid",r)}Id(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Vl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Vl(r.textContent,a,t),i=["children",""+a]):da.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":kl(r),Og(r,s,!0);break;case"textarea":kl(r),Vg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ru)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sn]=e,t[xa]=r,TE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pd(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),i=r;break;case"iframe":case"object":case"embed":Ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ho.length;i++)Ae(Ho[i],t);i=r;break;case"source":Ae("error",t),i=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),i=r;break;case"details":Ae("toggle",t),i=r;break;case"input":Mg(t,r),i=Ed(t,r),Ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fe({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":Dg(t,r),i=Sd(t,r),Ae("invalid",t);break;default:i=r}Id(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?iw(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&nw(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&fa(t,u):typeof u=="number"&&fa(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(da.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ae("scroll",t):u!=null&&Gf(t,s,u,o))}switch(n){case"input":kl(t),Og(t,r,!1);break;case"textarea":kl(t),Vg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?xs(t,!!r.multiple,s,!1):r.defaultValue!=null&&xs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ru)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)PE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Si(Sa.current),Si(In.current),jl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sn]=e,(s=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Vl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=e,e.stateNode=r}return _t(e),null;case 13:if(Me(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Ht!==null&&e.mode&1&&!(e.flags&128))Ww(),Os(),e.flags|=98560,s=!1;else if(s=jl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Sn]=e}else Os(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),s=!1}else fn!==null&&(lf(fn),fn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?Xe===0&&(Xe=3):kp())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return Vs(),Jd(t,e),t===null&&wa(e.stateNode.containerInfo),_t(e),null;case 10:return dp(e.type._context),_t(e),null;case 17:return Vt(e.type)&&Au(),_t(e),null;case 19:if(Me(Ve),s=e.memoizedState,s===null)return _t(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Mo(s,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Uu(t),o!==null){for(e.flags|=128,Mo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Ve,Ve.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ge()>Us&&(e.flags|=128,r=!0,Mo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Uu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Oe)return _t(e),null}else 2*Ge()-s.renderingStartTime>Us&&n!==1073741824&&(e.flags|=128,r=!0,Mo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ge(),e.sibling=null,n=Ve.current,Le(Ve,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return bp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bt&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function LP(t,e){switch(lp(e),e.tag){case 1:return Vt(e.type)&&Au(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vs(),Me(Dt),Me(Tt),vp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gp(e),null;case 13:if(Me(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Os()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Me(Ve),null;case 4:return Vs(),null;case 10:return dp(e.type._context),null;case 22:case 23:return bp(),null;case 24:return null;default:return null}}var zl=!1,xt=!1,RP=typeof WeakSet=="function"?WeakSet:Set,Z=null;function _s(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function ef(t,e,n){try{n()}catch(r){He(t,e,r)}}var Iv=!1;function AP(t,e){if(Vd=bu,t=Aw(),op(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,p=t,m=null;t:for(;;){for(var w;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)m=p,p=w;for(;;){if(p===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++h===r&&(u=o),(w=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=w}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(jd={focusedElem:t,selectionRange:n},bu=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var P=y.memoizedProps,k=y.memoizedState,C=e.stateNode,_=C.getSnapshotBeforeUpdate(e.elementType===e.type?P:hn(e.type,P),k);C.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(A){He(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return y=Iv,Iv=!1,y}function ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ef(e,n,s)}i=i.next}while(i!==r)}}function Rc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function tf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bE(t){var e=t.alternate;e!==null&&(t.alternate=null,bE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[xa],delete e[zd],delete e[pP],delete e[mP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kE(t){return t.tag===5||t.tag===3||t.tag===4}function Pv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ru));else if(r!==4&&(t=t.child,t!==null))for(nf(t,e,n),t=t.sibling;t!==null;)nf(t,e,n),t=t.sibling}function rf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(rf(t,e,n),t=t.sibling;t!==null;)rf(t,e,n),t=t.sibling}var lt=null,dn=!1;function yr(t,e,n){for(n=n.child;n!==null;)LE(t,e,n),n=n.sibling}function LE(t,e,n){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Cc,n)}catch{}switch(n.tag){case 5:xt||_s(n,e);case 6:var r=lt,i=dn;lt=null,yr(t,e,n),lt=r,dn=i,lt!==null&&(dn?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(dn?(t=lt,n=n.stateNode,t.nodeType===8?zh(t.parentNode,n):t.nodeType===1&&zh(t,n),va(t)):zh(lt,n.stateNode));break;case 4:r=lt,i=dn,lt=n.stateNode.containerInfo,dn=!0,yr(t,e,n),lt=r,dn=i;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ef(n,e,o),i=i.next}while(i!==r)}yr(t,e,n);break;case 1:if(!xt&&(_s(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,e,a)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,yr(t,e,n),xt=r):yr(t,e,n);break;default:yr(t,e,n)}}function bv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RP),e.forEach(function(r){var i=zP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lt=a.stateNode,dn=!1;break e;case 3:lt=a.stateNode.containerInfo,dn=!0;break e;case 4:lt=a.stateNode.containerInfo,dn=!0;break e}a=a.return}if(lt===null)throw Error($(160));LE(s,o,i),lt=null,dn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){He(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)RE(e,t),e=e.sibling}function RE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(un(e,t),En(t),r&4){try{ra(3,t,t.return),Rc(3,t)}catch(P){He(t,t.return,P)}try{ra(5,t,t.return)}catch(P){He(t,t.return,P)}}break;case 1:un(e,t),En(t),r&512&&n!==null&&_s(n,n.return);break;case 5:if(un(e,t),En(t),r&512&&n!==null&&_s(n,n.return),t.flags&32){var i=t.stateNode;try{fa(i,"")}catch(P){He(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&J0(i,s),Pd(a,o);var c=Pd(a,s);for(o=0;o<u.length;o+=2){var h=u[o],p=u[o+1];h==="style"?iw(i,p):h==="dangerouslySetInnerHTML"?nw(i,p):h==="children"?fa(i,p):Gf(i,h,p,c)}switch(a){case"input":xd(i,s);break;case"textarea":ew(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?xs(i,!!s.multiple,w,!1):m!==!!s.multiple&&(s.defaultValue!=null?xs(i,!!s.multiple,s.defaultValue,!0):xs(i,!!s.multiple,s.multiple?[]:"",!1))}i[xa]=s}catch(P){He(t,t.return,P)}}break;case 6:if(un(e,t),En(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){He(t,t.return,P)}}break;case 3:if(un(e,t),En(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{va(e.containerInfo)}catch(P){He(t,t.return,P)}break;case 4:un(e,t),En(t);break;case 13:un(e,t),En(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ip=Ge())),r&4&&bv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(xt=(c=xt)||h,un(e,t),xt=c):un(e,t),En(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(p=Z=h;Z!==null;){switch(m=Z,w=m.child,m.tag){case 0:case 11:case 14:case 15:ra(4,m,m.return);break;case 1:_s(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(P){He(r,n,P)}}break;case 5:_s(m,m.return);break;case 22:if(m.memoizedState!==null){Lv(p);continue}}w!==null?(w.return=m,Z=w):Lv(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=rw("display",o))}catch(P){He(t,t.return,P)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(P){He(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:un(e,t),En(t),r&4&&bv(t);break;case 21:break;default:un(e,t),En(t)}}function En(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(kE(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fa(i,""),r.flags&=-33);var s=Pv(t);rf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Pv(t);nf(t,a,o);break;default:throw Error($(161))}}catch(u){He(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NP(t,e,n){Z=t,AE(t)}function AE(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||zl;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||xt;a=zl;var c=xt;if(zl=o,(xt=u)&&!c)for(Z=i;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?Rv(i):u!==null?(u.return=o,Z=u):Rv(i);for(;s!==null;)Z=s,AE(s),s=s.sibling;Z=i,zl=a,xt=c}kv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):kv(t)}}function kv(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||Rc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&fv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&va(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}xt||e.flags&512&&tf(e)}catch(m){He(e,e.return,m)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Lv(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Rv(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rc(4,e)}catch(u){He(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){He(e,i,u)}}var s=e.return;try{tf(e)}catch(u){He(e,s,u)}break;case 5:var o=e.return;try{tf(e)}catch(u){He(e,o,u)}}}catch(u){He(e,e.return,u)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var MP=Math.ceil,Bu=ar.ReactCurrentDispatcher,Sp=ar.ReactCurrentOwner,rn=ar.ReactCurrentBatchConfig,Ce=0,ot=null,Qe=null,ht=0,Bt=0,ws=ni(0),Xe=0,ba=null,Ai=0,Ac=0,Tp=0,ia=null,Nt=null,Ip=0,Us=1/0,Fn=null,$u=!1,sf=null,jr=null,Bl=!1,Rr=null,Hu=0,sa=0,of=null,lu=-1,uu=0;function kt(){return Ce&6?Ge():lu!==-1?lu:lu=Ge()}function Ur(t){return t.mode&1?Ce&2&&ht!==0?ht&-ht:vP.transition!==null?(uu===0&&(uu=gw()),uu):(t=be,t!==0||(t=window.event,t=t===void 0?16:Cw(t.type)),t):1}function gn(t,e,n,r){if(50<sa)throw sa=0,of=null,Error($(185));Wa(t,n,r),(!(Ce&2)||t!==ot)&&(t===ot&&(!(Ce&2)&&(Ac|=n),Xe===4&&Tr(t,ht)),jt(t,r),n===1&&Ce===0&&!(e.mode&1)&&(Us=Ge()+500,bc&&ri()))}function jt(t,e){var n=t.callbackNode;vI(t,e);var r=Pu(t,t===ot?ht:0);if(r===0)n!==null&&Fg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Fg(n),e===1)t.tag===0?gP(Av.bind(null,t)):Bw(Av.bind(null,t)),dP(function(){!(Ce&6)&&ri()}),n=null;else{switch(vw(r)){case 1:n=Xf;break;case 4:n=pw;break;case 16:n=Iu;break;case 536870912:n=mw;break;default:n=Iu}n=FE(n,NE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function NE(t,e){if(lu=-1,uu=0,Ce&6)throw Error($(327));var n=t.callbackNode;if(Ps()&&t.callbackNode!==n)return null;var r=Pu(t,t===ot?ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wu(t,r);else{e=r;var i=Ce;Ce|=2;var s=OE();(ot!==t||ht!==e)&&(Fn=null,Us=Ge()+500,Pi(t,e));do try{VP();break}catch(a){ME(t,a)}while(1);hp(),Bu.current=s,Ce=i,Qe!==null?e=0:(ot=null,ht=0,e=Xe)}if(e!==0){if(e===2&&(i=Ad(t),i!==0&&(r=i,e=af(t,i))),e===1)throw n=ba,Pi(t,0),Tr(t,r),jt(t,Ge()),n;if(e===6)Tr(t,r);else{if(i=t.current.alternate,!(r&30)&&!OP(i)&&(e=Wu(t,r),e===2&&(s=Ad(t),s!==0&&(r=s,e=af(t,s))),e===1))throw n=ba,Pi(t,0),Tr(t,r),jt(t,Ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:wi(t,Nt,Fn);break;case 3:if(Tr(t,r),(r&130023424)===r&&(e=Ip+500-Ge(),10<e)){if(Pu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Fd(wi.bind(null,t,Nt,Fn),e);break}wi(t,Nt,Fn);break;case 4:if(Tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-mn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MP(r/1960))-r,10<r){t.timeoutHandle=Fd(wi.bind(null,t,Nt,Fn),r);break}wi(t,Nt,Fn);break;case 5:wi(t,Nt,Fn);break;default:throw Error($(329))}}}return jt(t,Ge()),t.callbackNode===n?NE.bind(null,t):null}function af(t,e){var n=ia;return t.current.memoizedState.isDehydrated&&(Pi(t,e).flags|=256),t=Wu(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&lf(e)),t}function lf(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function OP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tr(t,e){for(e&=~Tp,e&=~Ac,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mn(e),r=1<<n;t[n]=-1,e&=~r}}function Av(t){if(Ce&6)throw Error($(327));Ps();var e=Pu(t,0);if(!(e&1))return jt(t,Ge()),null;var n=Wu(t,e);if(t.tag!==0&&n===2){var r=Ad(t);r!==0&&(e=r,n=af(t,r))}if(n===1)throw n=ba,Pi(t,0),Tr(t,e),jt(t,Ge()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wi(t,Nt,Fn),jt(t,Ge()),null}function Pp(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(Us=Ge()+500,bc&&ri())}}function Ni(t){Rr!==null&&Rr.tag===0&&!(Ce&6)&&Ps();var e=Ce;Ce|=1;var n=rn.transition,r=be;try{if(rn.transition=null,be=1,t)return t()}finally{be=r,rn.transition=n,Ce=e,!(Ce&6)&&ri()}}function bp(){Bt=ws.current,Me(ws)}function Pi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hP(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(lp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Au();break;case 3:Vs(),Me(Dt),Me(Tt),vp();break;case 5:gp(r);break;case 4:Vs();break;case 13:Me(Ve);break;case 19:Me(Ve);break;case 10:dp(r.type._context);break;case 22:case 23:bp()}n=n.return}if(ot=t,Qe=t=Fr(t.current,null),ht=Bt=e,Xe=0,ba=null,Tp=Ac=Ai=0,Nt=ia=null,Ci!==null){for(e=0;e<Ci.length;e++)if(n=Ci[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ci=null}return t}function ME(t,e){do{var n=Qe;try{if(hp(),su.current=zu,Fu){for(var r=je.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fu=!1}if(Ri=0,st=Ye=je=null,na=!1,Ta=0,Sp.current=null,n===null||n.return===null){Xe=1,ba=e,Qe=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=ht,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=_v(o);if(w!==null){w.flags&=-257,wv(w,o,a,s,e),w.mode&1&&yv(s,c,e),e=w,u=c;var y=e.updateQueue;if(y===null){var P=new Set;P.add(u),e.updateQueue=P}else y.add(u);break e}else{if(!(e&1)){yv(s,c,e),kp();break e}u=Error($(426))}}else if(Oe&&a.mode&1){var k=_v(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),wv(k,o,a,s,e),up(js(u,a));break e}}s=u=js(u,a),Xe!==4&&(Xe=2),ia===null?ia=[s]:ia.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=vE(s,u,e);dv(s,C);break e;case 1:a=u;var _=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(jr===null||!jr.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=yE(s,a,e);dv(s,A);break e}}s=s.return}while(s!==null)}VE(n)}catch(N){e=N,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(1)}function OE(){var t=Bu.current;return Bu.current=zu,t===null?zu:t}function kp(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),ot===null||!(Ai&268435455)&&!(Ac&268435455)||Tr(ot,ht)}function Wu(t,e){var n=Ce;Ce|=2;var r=OE();(ot!==t||ht!==e)&&(Fn=null,Pi(t,e));do try{DP();break}catch(i){ME(t,i)}while(1);if(hp(),Ce=n,Bu.current=r,Qe!==null)throw Error($(261));return ot=null,ht=0,Xe}function DP(){for(;Qe!==null;)DE(Qe)}function VP(){for(;Qe!==null&&!lI();)DE(Qe)}function DE(t){var e=UE(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?VE(t):Qe=e,Sp.current=null}function VE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=LP(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,Qe=null;return}}else if(n=kP(n,e,Bt),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);Xe===0&&(Xe=5)}function wi(t,e,n){var r=be,i=rn.transition;try{rn.transition=null,be=1,jP(t,e,n,r)}finally{rn.transition=i,be=r}return null}function jP(t,e,n,r){do Ps();while(Rr!==null);if(Ce&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yI(t,s),t===ot&&(Qe=ot=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bl||(Bl=!0,FE(Iu,function(){return Ps(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=rn.transition,rn.transition=null;var o=be;be=1;var a=Ce;Ce|=4,Sp.current=null,AP(t,n),RE(n,t),iP(jd),bu=!!Vd,jd=Vd=null,t.current=n,NP(n),uI(),Ce=a,be=o,rn.transition=s}else t.current=n;if(Bl&&(Bl=!1,Rr=t,Hu=i),s=t.pendingLanes,s===0&&(jr=null),dI(n.stateNode),jt(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($u)throw $u=!1,t=sf,sf=null,t;return Hu&1&&t.tag!==0&&Ps(),s=t.pendingLanes,s&1?t===of?sa++:(sa=0,of=t):sa=0,ri(),null}function Ps(){if(Rr!==null){var t=vw(Hu),e=rn.transition,n=be;try{if(rn.transition=null,be=16>t?16:t,Rr===null)var r=!1;else{if(t=Rr,Rr=null,Hu=0,Ce&6)throw Error($(331));var i=Ce;for(Ce|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(Z=c;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:ra(8,h,s)}var p=h.child;if(p!==null)p.return=h,Z=p;else for(;Z!==null;){h=Z;var m=h.sibling,w=h.return;if(bE(h),h===c){Z=null;break}if(m!==null){m.return=w,Z=m;break}Z=w}}}var y=s.alternate;if(y!==null){var P=y.child;if(P!==null){y.child=null;do{var k=P.sibling;P.sibling=null,P=k}while(P!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ra(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,Z=C;break e}Z=s.return}}var _=t.current;for(Z=_;Z!==null;){o=Z;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Z=I;else e:for(o=_;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Rc(9,a)}}catch(N){He(a,a.return,N)}if(a===o){Z=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Z=A;break e}Z=a.return}}if(Ce=i,ri(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Cc,t)}catch{}r=!0}return r}finally{be=n,rn.transition=e}}return!1}function Nv(t,e,n){e=js(n,e),e=vE(t,e,1),t=Vr(t,e,1),e=kt(),t!==null&&(Wa(t,1,e),jt(t,e))}function He(t,e,n){if(t.tag===3)Nv(t,t,n);else for(;e!==null;){if(e.tag===3){Nv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jr===null||!jr.has(r))){t=js(n,t),t=yE(e,t,1),e=Vr(e,t,1),t=kt(),e!==null&&(Wa(e,1,t),jt(e,t));break}}e=e.return}}function UP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kt(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(ht&n)===n&&(Xe===4||Xe===3&&(ht&130023424)===ht&&500>Ge()-Ip?Pi(t,0):Tp|=n),jt(t,e)}function jE(t,e){e===0&&(t.mode&1?(e=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):e=1);var n=kt();t=Xn(t,e),t!==null&&(Wa(t,e,n),jt(t,n))}function FP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jE(t,n)}function zP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),jE(t,n)}var UE;UE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,bP(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,Oe&&e.flags&1048576&&$w(e,Ou,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;au(t,e),t=e.pendingProps;var i=Ms(e,Tt.current);Is(e,n),i=_p(null,e,r,t,i,n);var s=wp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vt(r)?(s=!0,Nu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pp(e),i.updater=Lc,e.stateNode=i,i._reactInternals=e,Gd(e,r,t,n),e=Zd(null,e,r,!0,s,n)):(e.tag=0,Oe&&s&&ap(e),bt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(au(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=$P(r),t=hn(r,t),i){case 0:e=Qd(null,e,r,t,n);break e;case 1:e=Cv(null,e,r,t,n);break e;case 11:e=Ev(null,e,r,t,n);break e;case 14:e=xv(null,e,r,hn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),Qd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),Cv(t,e,r,i,n);case 3:e:{if(xE(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Qw(t,e),ju(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=js(Error($(423)),e),e=Sv(t,e,r,n,i);break e}else if(r!==i){i=js(Error($(424)),e),e=Sv(t,e,r,n,i);break e}else for(Ht=Dr(e.stateNode.containerInfo.firstChild),qt=e,Oe=!0,fn=null,n=Gw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Os(),r===i){e=Jn(t,e,n);break e}bt(t,e,r,n)}e=e.child}return e;case 5:return Zw(e),t===null&&Hd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ud(r,i)?o=null:s!==null&&Ud(r,s)&&(e.flags|=32),EE(t,e),bt(t,e,o,n),e.child;case 6:return t===null&&Hd(e),null;case 13:return CE(t,e,n);case 4:return mp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ds(e,null,r,n):bt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),Ev(t,e,r,i,n);case 7:return bt(t,e,e.pendingProps,n),e.child;case 8:return bt(t,e,e.pendingProps.children,n),e.child;case 12:return bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Le(Du,r._currentValue),r._currentValue=o,s!==null)if(vn(s.value,o)){if(s.children===i.children&&!Dt.current){e=Jn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=qn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Wd(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Wd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}bt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Is(e,n),i=on(i),r=r(i),e.flags|=1,bt(t,e,r,n),e.child;case 14:return r=e.type,i=hn(r,e.pendingProps),i=hn(r.type,i),xv(t,e,r,i,n);case 15:return _E(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),au(t,e),e.tag=1,Vt(r)?(t=!0,Nu(e)):t=!1,Is(e,n),gE(e,r,i),Gd(e,r,i,n),Zd(null,e,r,!0,t,n);case 19:return SE(t,e,n);case 22:return wE(t,e,n)}throw Error($(156,e.tag))};function FE(t,e){return fw(t,e)}function BP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new BP(t,e,n,r)}function Lp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $P(t){if(typeof t=="function")return Lp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qf)return 11;if(t===Zf)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Lp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case cs:return bi(n.children,i,s,e);case Kf:o=8,i|=8;break;case vd:return t=tn(12,n,e,i|2),t.elementType=vd,t.lanes=s,t;case yd:return t=tn(13,n,e,i),t.elementType=yd,t.lanes=s,t;case _d:return t=tn(19,n,e,i),t.elementType=_d,t.lanes=s,t;case Z0:return Nc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K0:o=10;break e;case Q0:o=9;break e;case Qf:o=11;break e;case Zf:o=14;break e;case Er:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=tn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function bi(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function Nc(t,e,n,r){return t=tn(22,t,r,e),t.elementType=Z0,t.lanes=n,t.stateNode={isHidden:!1},t}function Qh(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function Zh(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lh(0),this.expirationTimes=Lh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rp(t,e,n,r,i,s,o,a,u){return t=new HP(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=tn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pp(s),t}function WP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:us,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function zE(t){if(!t)return Gr;t=t._reactInternals;e:{if(zi(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Vt(n))return zw(t,n,e)}return e}function BE(t,e,n,r,i,s,o,a,u){return t=Rp(n,r,!0,t,i,s,o,a,u),t.context=zE(null),n=t.current,r=kt(),i=Ur(n),s=qn(r,i),s.callback=e??null,Vr(n,s,i),t.current.lanes=i,Wa(t,i,r),jt(t,r),t}function Mc(t,e,n,r){var i=e.current,s=kt(),o=Ur(i);return n=zE(n),e.context===null?e.context=n:e.pendingContext=n,e=qn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vr(i,e,o),t!==null&&(gn(t,i,o,s),iu(t,i,o)),o}function qu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ap(t,e){Mv(t,e),(t=t.alternate)&&Mv(t,e)}function qP(){return null}var $E=typeof reportError=="function"?reportError:function(t){console.error(t)};function Np(t){this._internalRoot=t}Oc.prototype.render=Np.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Mc(t,e,null,null)};Oc.prototype.unmount=Np.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ni(function(){Mc(null,t,null,null)}),e[Yn]=null}};function Oc(t){this._internalRoot=t}Oc.prototype.unstable_scheduleHydration=function(t){if(t){var e=ww();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&xw(t)}};function Mp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ov(){}function GP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=qu(o);s.call(c)}}var o=BE(e,r,t,0,null,!1,!1,"",Ov);return t._reactRootContainer=o,t[Yn]=o.current,wa(t.nodeType===8?t.parentNode:t),Ni(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=qu(u);a.call(c)}}var u=Rp(t,0,!1,null,null,!1,!1,"",Ov);return t._reactRootContainer=u,t[Yn]=u.current,wa(t.nodeType===8?t.parentNode:t),Ni(function(){Mc(e,u,n,r)}),u}function Vc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=qu(o);a.call(u)}}Mc(e,o,t,i)}else o=GP(n,e,t,i,r);return qu(o)}yw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$o(e.pendingLanes);n!==0&&(Jf(e,n|1),jt(e,Ge()),!(Ce&6)&&(Us=Ge()+500,ri()))}break;case 13:Ni(function(){var r=Xn(t,1);if(r!==null){var i=kt();gn(r,t,1,i)}}),Ap(t,1)}};ep=function(t){if(t.tag===13){var e=Xn(t,134217728);if(e!==null){var n=kt();gn(e,t,134217728,n)}Ap(t,134217728)}};_w=function(t){if(t.tag===13){var e=Ur(t),n=Xn(t,e);if(n!==null){var r=kt();gn(n,t,e,r)}Ap(t,e)}};ww=function(){return be};Ew=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};kd=function(t,e,n){switch(e){case"input":if(xd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Pc(r);if(!i)throw Error($(90));X0(r),xd(r,i)}}}break;case"textarea":ew(t,n);break;case"select":e=n.value,e!=null&&xs(t,!!n.multiple,e,!1)}};aw=Pp;lw=Ni;var KP={usingClientEntryPoint:!1,Events:[Ga,ps,Pc,sw,ow,Pp]},Oo={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QP={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hw(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||qP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{Cc=$l.inject(QP),Tn=$l}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KP;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mp(e))throw Error($(200));return WP(t,e,null,n)};Kt.createRoot=function(t,e){if(!Mp(t))throw Error($(299));var n=!1,r="",i=$E;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rp(t,1,!1,null,null,n,!1,r,i),t[Yn]=e.current,wa(t.nodeType===8?t.parentNode:t),new Np(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=hw(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return Ni(t)};Kt.hydrate=function(t,e,n){if(!Dc(e))throw Error($(200));return Vc(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Mp(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=$E;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=BE(e,null,t,1,n??null,i,!1,s,o),t[Yn]=e.current,wa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Oc(e)};Kt.render=function(t,e,n){if(!Dc(e))throw Error($(200));return Vc(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!Dc(t))throw Error($(40));return t._reactRootContainer?(Ni(function(){Vc(null,null,t,!1,function(){t._reactRootContainer=null,t[Yn]=null})}),!0):!1};Kt.unstable_batchedUpdates=Pp;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dc(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Vc(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function HE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HE)}catch(t){console.error(t)}}HE(),H0.exports=Kt;var Bi=H0.exports,Dv=Bi;md.createRoot=Dv.createRoot,md.hydrateRoot=Dv.hydrateRoot;function ka(t){"@babel/helpers - typeof";return ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ka(t)}function ZP(t,e){if(ka(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ka(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YP(t){var e=ZP(t,"string");return ka(e)=="symbol"?e:e+""}function j(t,e,n){return(e=YP(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yh,Vv;function XP(){if(Vv)return Yh;Vv=1;var t=function(n,r,i,s,o,a,u,c){if(!n){var h;if(r===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[i,s,o,a,u,c],m=0;h=new Error(r.replace(/%s/g,function(){return p[m++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return Yh=t,Yh}var JP=XP(),tt=WE(JP),he=d.createContext(null);function eb(){tt(!!d.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=d.useContext(he);return tt(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function tb(t,e,n){return Object.keys(t).reduce(function(i,s){return e(i,t[s],s)},n)}function nb(t,e){Object.keys(t).forEach(n=>e(t[n],n))}function rb(t,e,n,r){var i={},s=(o,a)=>{var u=n[a];u!==e[a]&&(i[a]=u,o(r,u))};return nb(t,s),i}function ib(t,e,n){var r=tb(n,function(s,o,a){return typeof t[a]=="function"&&s.push(google.maps.event.addListener(e,o,t[a])),s},[]);return r}function sb(t){google.maps.event.removeListener(t)}function we(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(sb)}function _e(t){var{updaterMap:e,eventMap:n,prevProps:r,nextProps:i,instance:s}=t,o=ib(i,s,n);return rb(e,r,i,s),o}function ob(t){var{children:e,options:n,id:r,mapContainerStyle:i,mapContainerClassName:s,center:o,onClick:a,onDblClick:u,onDrag:c,onDragEnd:h,onDragStart:p,onMouseMove:m,onMouseOut:w,onMouseOver:y,onMouseDown:P,onMouseUp:k,onRightClick:C,onCenterChanged:_,onLoad:I,onUnmount:A}=t,[N,O]=d.useState(null),S=d.useRef(null),[x,E]=d.useState(null),[b,R]=d.useState(null),[M,L]=d.useState(null),[J,re]=d.useState(null),[ue,te]=d.useState(null),[U,H]=d.useState(null),[W,Y]=d.useState(null),[ee,G]=d.useState(null),[fe,F]=d.useState(null),[xe,ge]=d.useState(null),[ce,Be]=d.useState(null),[ie,pe]=d.useState(null);return d.useEffect(()=>{n&&N!==null&&N.setOptions(n)},[N,n]),d.useEffect(()=>{N!==null&&typeof o<"u"&&N.setCenter(o)},[N,o]),d.useEffect(()=>{N&&u&&(b!==null&&google.maps.event.removeListener(b),R(google.maps.event.addListener(N,"dblclick",u)))},[u]),d.useEffect(()=>{N&&h&&(M!==null&&google.maps.event.removeListener(M),L(google.maps.event.addListener(N,"dragend",h)))},[h]),d.useEffect(()=>{N&&p&&(J!==null&&google.maps.event.removeListener(J),re(google.maps.event.addListener(N,"dragstart",p)))},[p]),d.useEffect(()=>{N&&P&&(ue!==null&&google.maps.event.removeListener(ue),te(google.maps.event.addListener(N,"mousedown",P)))},[P]),d.useEffect(()=>{N&&m&&(U!==null&&google.maps.event.removeListener(U),H(google.maps.event.addListener(N,"mousemove",m)))},[m]),d.useEffect(()=>{N&&w&&(W!==null&&google.maps.event.removeListener(W),Y(google.maps.event.addListener(N,"mouseout",w)))},[w]),d.useEffect(()=>{N&&y&&(ee!==null&&google.maps.event.removeListener(ee),G(google.maps.event.addListener(N,"mouseover",y)))},[y]),d.useEffect(()=>{N&&k&&(fe!==null&&google.maps.event.removeListener(fe),F(google.maps.event.addListener(N,"mouseup",k)))},[k]),d.useEffect(()=>{N&&C&&(xe!==null&&google.maps.event.removeListener(xe),ge(google.maps.event.addListener(N,"rightclick",C)))},[C]),d.useEffect(()=>{N&&a&&(ce!==null&&google.maps.event.removeListener(ce),Be(google.maps.event.addListener(N,"click",a)))},[a]),d.useEffect(()=>{N&&c&&(ie!==null&&google.maps.event.removeListener(ie),pe(google.maps.event.addListener(N,"drag",c)))},[c]),d.useEffect(()=>{N&&_&&(x!==null&&google.maps.event.removeListener(x),E(google.maps.event.addListener(N,"center_changed",_)))},[a]),d.useEffect(()=>{var Pt=S.current===null?null:new google.maps.Map(S.current,n);return O(Pt),Pt!==null&&I&&I(Pt),()=>{Pt!==null&&A&&A(Pt)}},[]),v.jsx("div",{id:r,ref:S,style:i,className:s,children:v.jsx(he.Provider,{value:N,children:N!==null?e:null})})}d.memo(ob);function jv(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function qE(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(u){jv(s,r,i,o,a,"next",u)}function a(u){jv(s,r,i,o,a,"throw",u)}o(void 0)})}}function GE(t){var{googleMapsApiKey:e,googleMapsClientId:n,version:r="weekly",language:i,region:s,libraries:o,channel:a,mapIds:u,authReferrerPolicy:c}=t,h=[];return tt(e&&n||!(e&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?h.push("key=".concat(e)):n&&h.push("client=".concat(n)),r&&h.push("v=".concat(r)),i&&h.push("language=".concat(i)),s&&h.push("region=".concat(s)),o&&o.length&&h.push("libraries=".concat(o.sort().join(","))),a&&h.push("channel=".concat(a)),u&&u.length&&h.push("map_ids=".concat(u.join(","))),c&&h.push("auth_referrer_policy=".concat(c)),h.push("loading=async"),h.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(h.join("&"))}var Ti=typeof document<"u";function KE(t){var{url:e,id:n,nonce:r}=t;return Ti?new Promise(function(s,o){var a=document.getElementById(n),u=window;if(a){var c=a.getAttribute("data-state");if(a.src===e&&c!=="error"){if(c==="ready")return s(n);var h=u.initMap,p=a.onerror;u.initMap=function(){h&&h(),s(n)},a.onerror=function(w){p&&p(w),o(w)};return}else a.remove()}var m=document.createElement("script");m.type="text/javascript",m.src=e,m.id=n,m.async=!0,m.nonce=r||"",m.onerror=function(y){m.setAttribute("data-state","error"),o(y)},u.initMap=function(){m.setAttribute("data-state","ready"),s(n)},document.head.appendChild(m)}).catch(i=>{throw console.error("injectScript error: ",i),i}):Promise.reject(new Error("document is undefined"))}function Uv(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function QE(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(i,s){return Uv(i)||Reflect.apply(e,t,[i,s]),i};var n=t.appendChild.bind(t);t.appendChild=function(i){return Uv(i)||Reflect.apply(n,t,[i]),i}}}var Do=!1;function ZE(){return v.jsx("div",{children:"Loading..."})}var uf={id:"script-loader",version:"weekly"};class YE extends d.PureComponent{constructor(){super(...arguments),j(this,"check",null),j(this,"state",{loaded:!1}),j(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),j(this,"isCleaningUp",qE(function*(){function e(n){if(!Do)n();else if(Ti)var r=window.setInterval(function(){Do||(window.clearInterval(r),n())},1)}return new Promise(e)})),j(this,"cleanup",()=>{Do=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(r){return typeof r.src=="string"&&r.src.includes("maps.googleapis")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(r){return r.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(r){return r.innerText!==void 0&&r.innerText.length>0&&r.innerText.includes(".gm-")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)})}),j(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&QE(),tt(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:GE(this.props)};KE(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(n=>{this.props.onError&&this.props.onError(n),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),j(this,"getRef",e=>{this.check=e})}componentDidMount(){if(Ti){if(window.google&&window.google.maps&&!Do){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(n){console.error("Error at injecting script after cleaning up: ",n)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Ti&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(Ti){this.cleanup();var e=()=>{this.check||(delete window.google,Do=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return v.jsxs(v.Fragment,{children:[v.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||v.jsx(ZE,{})]})}}j(YE,"defaultProps",uf);function ab(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function Op(t,e){if(t==null)return{};var n,r,i=ab(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Fv;function lb(t){var{id:e=uf.id,version:n=uf.version,nonce:r,googleMapsApiKey:i,googleMapsClientId:s,language:o,region:a,libraries:u,preventGoogleFontsLoading:c,channel:h,mapIds:p,authReferrerPolicy:m}=t,w=d.useRef(!1),[y,P]=d.useState(!1),[k,C]=d.useState(void 0);d.useEffect(function(){return w.current=!0,()=>{w.current=!1}},[]),d.useEffect(function(){Ti&&c&&QE()},[c]),d.useEffect(function(){y&&tt(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[y]);var _=GE({version:n,googleMapsApiKey:i,googleMapsClientId:s,language:o,region:a,libraries:u,channel:h,mapIds:p,authReferrerPolicy:m});d.useEffect(function(){if(!Ti)return;function N(){w.current&&(P(!0),Fv=_)}if(window.google&&window.google.maps&&Fv===_){N();return}KE({id:e,url:_,nonce:r}).then(N).catch(function(S){w.current&&C(S),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(i||"-",") or Client ID (").concat(s||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(S)})},[e,_,r]);var I=d.useRef(void 0);return d.useEffect(function(){I.current&&u!==I.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),I.current=u},[u]),{isLoaded:y,loadError:k,url:_}}var ub=["loadingElement","onLoad","onError","onUnmount","children"],cb=v.jsx(ZE,{});function hb(t){var{loadingElement:e,onLoad:n,onError:r,onUnmount:i,children:s}=t,o=Op(t,ub),{isLoaded:a,loadError:u}=lb(o);return d.useEffect(function(){a&&typeof n=="function"&&n()},[a,n]),d.useEffect(function(){u&&typeof r=="function"&&r(u)},[u,r]),d.useEffect(function(){return()=>{i&&i()}},[i]),a?s:e||cb}d.memo(hb);var zv;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(zv||(zv={}));function Bv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bv(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var $v={},Hv={options(t,e){t.setOptions(e)}};function db(t){var{options:e,onLoad:n,onUnmount:r}=t,i=d.useContext(he),[s,o]=d.useState(null);return d.useEffect(()=>{s!==null&&s.setMap(i)},[i]),d.useEffect(()=>{e&&s!==null&&s.setOptions(e)},[s,e]),d.useEffect(()=>{var a=new google.maps.TrafficLayer(Gu(Gu({},e),{},{map:i}));return o(a),n&&n(a),()=>{s!==null&&(r&&r(s),s.setMap(null))}},[]),null}d.memo(db);class fb extends d.PureComponent{constructor(){super(...arguments),j(this,"state",{trafficLayer:null}),j(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),j(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(Gu(Gu({},this.props.options),{},{map:this.context}));this.registeredEvents=_e({updaterMap:Hv,eventMap:$v,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:Hv,eventMap:$v,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),we(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}j(fb,"contextType",he);function pb(t){var{onLoad:e,onUnmount:n}=t,r=d.useContext(he),[i,s]=d.useState(null);return d.useEffect(()=>{i!==null&&i.setMap(r)},[r]),d.useEffect(()=>{var o=new google.maps.BicyclingLayer;return s(o),o.setMap(r),e&&e(o),()=>{o!==null&&(n&&n(o),o.setMap(null))}},[]),null}d.memo(pb);class mb extends d.PureComponent{constructor(){super(...arguments),j(this,"state",{bicyclingLayer:null}),j(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}j(mb,"contextType",he);function gb(t){var{onLoad:e,onUnmount:n}=t,r=d.useContext(he),[i,s]=d.useState(null);return d.useEffect(()=>{i!==null&&i.setMap(r)},[r]),d.useEffect(()=>{var o=new google.maps.TransitLayer;return s(o),o.setMap(r),e&&e(o),()=>{i!==null&&(n&&n(i),i.setMap(null))}},[]),null}d.memo(gb);class vb extends d.PureComponent{constructor(){super(...arguments),j(this,"state",{transitLayer:null}),j(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}j(vb,"contextType",he);function Wv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ku(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wv(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var qv={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},Gv={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function yb(t){var{options:e,drawingMode:n,onCircleComplete:r,onMarkerComplete:i,onOverlayComplete:s,onPolygonComplete:o,onPolylineComplete:a,onRectangleComplete:u,onLoad:c,onUnmount:h}=t,p=d.useContext(he),[m,w]=d.useState(null),[y,P]=d.useState(null),[k,C]=d.useState(null),[_,I]=d.useState(null),[A,N]=d.useState(null),[O,S]=d.useState(null),[x,E]=d.useState(null);return d.useEffect(()=>{m!==null&&m.setMap(p)},[p]),d.useEffect(()=>{e&&m!==null&&m.setOptions(e)},[m,e]),d.useEffect(()=>{m!==null&&m.setDrawingMode(n??null)},[m,n]),d.useEffect(()=>{m&&r&&(y!==null&&google.maps.event.removeListener(y),P(google.maps.event.addListener(m,"circlecomplete",r)))},[m,r]),d.useEffect(()=>{m&&i&&(k!==null&&google.maps.event.removeListener(k),C(google.maps.event.addListener(m,"markercomplete",i)))},[m,i]),d.useEffect(()=>{m&&s&&(_!==null&&google.maps.event.removeListener(_),I(google.maps.event.addListener(m,"overlaycomplete",s)))},[m,s]),d.useEffect(()=>{m&&o&&(A!==null&&google.maps.event.removeListener(A),N(google.maps.event.addListener(m,"polygoncomplete",o)))},[m,o]),d.useEffect(()=>{m&&a&&(O!==null&&google.maps.event.removeListener(O),S(google.maps.event.addListener(m,"polylinecomplete",a)))},[m,a]),d.useEffect(()=>{m&&u&&(x!==null&&google.maps.event.removeListener(x),E(google.maps.event.addListener(m,"rectanglecomplete",u)))},[m,u]),d.useEffect(()=>{tt(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var b=new google.maps.drawing.DrawingManager(Ku(Ku({},e),{},{map:p}));return n&&b.setDrawingMode(n),r&&P(google.maps.event.addListener(b,"circlecomplete",r)),i&&C(google.maps.event.addListener(b,"markercomplete",i)),s&&I(google.maps.event.addListener(b,"overlaycomplete",s)),o&&N(google.maps.event.addListener(b,"polygoncomplete",o)),a&&S(google.maps.event.addListener(b,"polylinecomplete",a)),u&&E(google.maps.event.addListener(b,"rectanglecomplete",u)),w(b),c&&c(b),()=>{m!==null&&(y&&google.maps.event.removeListener(y),k&&google.maps.event.removeListener(k),_&&google.maps.event.removeListener(_),A&&google.maps.event.removeListener(A),O&&google.maps.event.removeListener(O),x&&google.maps.event.removeListener(x),h&&h(m),m.setMap(null))}},[]),null}d.memo(yb);class _b extends d.PureComponent{constructor(e){super(e),j(this,"registeredEvents",[]),j(this,"state",{drawingManager:null}),j(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),tt(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(Ku(Ku({},this.props.options),{},{map:this.context}));this.registeredEvents=_e({updaterMap:Gv,eventMap:qv,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:Gv,eventMap:qv,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),we(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}j(_b,"contextType",he);function Kv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kv(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Qv={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Zv={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},Qu={};function wb(t){var{position:e,options:n,clusterer:r,noClustererRedraw:i,children:s,draggable:o,visible:a,animation:u,clickable:c,cursor:h,icon:p,label:m,opacity:w,shape:y,title:P,zIndex:k,onClick:C,onDblClick:_,onDrag:I,onDragEnd:A,onDragStart:N,onMouseOut:O,onMouseOver:S,onMouseUp:x,onMouseDown:E,onRightClick:b,onClickableChanged:R,onCursorChanged:M,onAnimationChanged:L,onDraggableChanged:J,onFlatChanged:re,onIconChanged:ue,onPositionChanged:te,onShapeChanged:U,onTitleChanged:H,onVisibleChanged:W,onZindexChanged:Y,onLoad:ee,onUnmount:G}=t,fe=d.useContext(he),[F,xe]=d.useState(null),[ge,ce]=d.useState(null),[Be,ie]=d.useState(null),[pe,Pt]=d.useState(null),[Ft,On]=d.useState(null),[Se,lo]=d.useState(null),[ci,cl]=d.useState(null),[hi,uo]=d.useState(null),[cr,co]=d.useState(null),[Gi,Ki]=d.useState(null),[Qi,Zi]=d.useState(null),[We,rt]=d.useState(null),[Dn,ho]=d.useState(null),[di,hl]=d.useState(null),[wn,fo]=d.useState(null),[fi,Yi]=d.useState(null),[Xi,dl]=d.useState(null),[hr,po]=d.useState(null),[mo,dr]=d.useState(null),[fr,Ji]=d.useState(null),[Zt,go]=d.useState(null),[Vn,vo]=d.useState(null);d.useEffect(()=>{F!==null&&F.setMap(fe)},[fe]),d.useEffect(()=>{typeof n<"u"&&F!==null&&F.setOptions(n)},[F,n]),d.useEffect(()=>{typeof o<"u"&&F!==null&&F.setDraggable(o)},[F,o]),d.useEffect(()=>{e&&F!==null&&F.setPosition(e)},[F,e]),d.useEffect(()=>{typeof a<"u"&&F!==null&&F.setVisible(a)},[F,a]),d.useEffect(()=>{F==null||F.setAnimation(u)},[F,u]),d.useEffect(()=>{F&&c!==void 0&&F.setClickable(c)},[F,c]),d.useEffect(()=>{F&&h!==void 0&&F.setCursor(h)},[F,h]),d.useEffect(()=>{F&&p!==void 0&&F.setIcon(p)},[F,p]),d.useEffect(()=>{F&&m!==void 0&&F.setLabel(m)},[F,m]),d.useEffect(()=>{F&&w!==void 0&&F.setOpacity(w)},[F,w]),d.useEffect(()=>{F&&y!==void 0&&F.setShape(y)},[F,y]),d.useEffect(()=>{F&&P!==void 0&&F.setTitle(P)},[F,P]),d.useEffect(()=>{F&&k!==void 0&&F.setZIndex(k)},[F,k]),d.useEffect(()=>{F&&_&&(ge!==null&&google.maps.event.removeListener(ge),ce(google.maps.event.addListener(F,"dblclick",_)))},[_]),d.useEffect(()=>{F&&A&&(Be!==null&&google.maps.event.removeListener(Be),ie(google.maps.event.addListener(F,"dragend",A)))},[A]),d.useEffect(()=>{F&&N&&(pe!==null&&google.maps.event.removeListener(pe),Pt(google.maps.event.addListener(F,"dragstart",N)))},[N]),d.useEffect(()=>{F&&E&&(Ft!==null&&google.maps.event.removeListener(Ft),On(google.maps.event.addListener(F,"mousedown",E)))},[E]),d.useEffect(()=>{F&&O&&(Se!==null&&google.maps.event.removeListener(Se),lo(google.maps.event.addListener(F,"mouseout",O)))},[O]),d.useEffect(()=>{F&&S&&(ci!==null&&google.maps.event.removeListener(ci),cl(google.maps.event.addListener(F,"mouseover",S)))},[S]),d.useEffect(()=>{F&&x&&(hi!==null&&google.maps.event.removeListener(hi),uo(google.maps.event.addListener(F,"mouseup",x)))},[x]),d.useEffect(()=>{F&&b&&(cr!==null&&google.maps.event.removeListener(cr),co(google.maps.event.addListener(F,"rightclick",b)))},[b]),d.useEffect(()=>{F&&C&&(Gi!==null&&google.maps.event.removeListener(Gi),Ki(google.maps.event.addListener(F,"click",C)))},[C]),d.useEffect(()=>{F&&I&&(Qi!==null&&google.maps.event.removeListener(Qi),Zi(google.maps.event.addListener(F,"drag",I)))},[I]),d.useEffect(()=>{F&&R&&(We!==null&&google.maps.event.removeListener(We),rt(google.maps.event.addListener(F,"clickable_changed",R)))},[R]),d.useEffect(()=>{F&&M&&(Dn!==null&&google.maps.event.removeListener(Dn),ho(google.maps.event.addListener(F,"cursor_changed",M)))},[M]),d.useEffect(()=>{F&&L&&(di!==null&&google.maps.event.removeListener(di),hl(google.maps.event.addListener(F,"animation_changed",L)))},[L]),d.useEffect(()=>{F&&J&&(wn!==null&&google.maps.event.removeListener(wn),fo(google.maps.event.addListener(F,"draggable_changed",J)))},[J]),d.useEffect(()=>{F&&re&&(fi!==null&&google.maps.event.removeListener(fi),Yi(google.maps.event.addListener(F,"flat_changed",re)))},[re]),d.useEffect(()=>{F&&ue&&(Xi!==null&&google.maps.event.removeListener(Xi),dl(google.maps.event.addListener(F,"icon_changed",ue)))},[ue]),d.useEffect(()=>{F&&te&&(hr!==null&&google.maps.event.removeListener(hr),po(google.maps.event.addListener(F,"position_changed",te)))},[te]),d.useEffect(()=>{F&&U&&(mo!==null&&google.maps.event.removeListener(mo),dr(google.maps.event.addListener(F,"shape_changed",U)))},[U]),d.useEffect(()=>{F&&H&&(fr!==null&&google.maps.event.removeListener(fr),Ji(google.maps.event.addListener(F,"title_changed",H)))},[H]),d.useEffect(()=>{F&&W&&(Zt!==null&&google.maps.event.removeListener(Zt),go(google.maps.event.addListener(F,"visible_changed",W)))},[W]),d.useEffect(()=>{F&&Y&&(Vn!==null&&google.maps.event.removeListener(Vn),vo(google.maps.event.addListener(F,"zindex_changed",Y)))},[Y]),d.useEffect(()=>{var pr=bs(bs(bs({},n||Qu),r?Qu:{map:fe}),{},{position:e}),X=new google.maps.Marker(pr);return r?r.addMarker(X,!!i):X.setMap(fe),e&&X.setPosition(e),typeof a<"u"&&X.setVisible(a),typeof o<"u"&&X.setDraggable(o),typeof c<"u"&&X.setClickable(c),typeof h=="string"&&X.setCursor(h),p&&X.setIcon(p),typeof m<"u"&&X.setLabel(m),typeof w<"u"&&X.setOpacity(w),y&&X.setShape(y),typeof P=="string"&&X.setTitle(P),typeof k=="number"&&X.setZIndex(k),_&&ce(google.maps.event.addListener(X,"dblclick",_)),A&&ie(google.maps.event.addListener(X,"dragend",A)),N&&Pt(google.maps.event.addListener(X,"dragstart",N)),E&&On(google.maps.event.addListener(X,"mousedown",E)),O&&lo(google.maps.event.addListener(X,"mouseout",O)),S&&cl(google.maps.event.addListener(X,"mouseover",S)),x&&uo(google.maps.event.addListener(X,"mouseup",x)),b&&co(google.maps.event.addListener(X,"rightclick",b)),C&&Ki(google.maps.event.addListener(X,"click",C)),I&&Zi(google.maps.event.addListener(X,"drag",I)),R&&rt(google.maps.event.addListener(X,"clickable_changed",R)),M&&ho(google.maps.event.addListener(X,"cursor_changed",M)),L&&hl(google.maps.event.addListener(X,"animation_changed",L)),J&&fo(google.maps.event.addListener(X,"draggable_changed",J)),re&&Yi(google.maps.event.addListener(X,"flat_changed",re)),ue&&dl(google.maps.event.addListener(X,"icon_changed",ue)),te&&po(google.maps.event.addListener(X,"position_changed",te)),U&&dr(google.maps.event.addListener(X,"shape_changed",U)),H&&Ji(google.maps.event.addListener(X,"title_changed",H)),W&&go(google.maps.event.addListener(X,"visible_changed",W)),Y&&vo(google.maps.event.addListener(X,"zindex_changed",Y)),xe(X),ee&&ee(X),()=>{ge!==null&&google.maps.event.removeListener(ge),Be!==null&&google.maps.event.removeListener(Be),pe!==null&&google.maps.event.removeListener(pe),Ft!==null&&google.maps.event.removeListener(Ft),Se!==null&&google.maps.event.removeListener(Se),ci!==null&&google.maps.event.removeListener(ci),hi!==null&&google.maps.event.removeListener(hi),cr!==null&&google.maps.event.removeListener(cr),Gi!==null&&google.maps.event.removeListener(Gi),We!==null&&google.maps.event.removeListener(We),Dn!==null&&google.maps.event.removeListener(Dn),di!==null&&google.maps.event.removeListener(di),wn!==null&&google.maps.event.removeListener(wn),fi!==null&&google.maps.event.removeListener(fi),Xi!==null&&google.maps.event.removeListener(Xi),hr!==null&&google.maps.event.removeListener(hr),fr!==null&&google.maps.event.removeListener(fr),Zt!==null&&google.maps.event.removeListener(Zt),Vn!==null&&google.maps.event.removeListener(Vn),G&&G(X),r?r.removeMarker(X,!!i):X&&X.setMap(null)}},[]);var pi=d.useMemo(()=>s?d.Children.map(s,pr=>{if(!d.isValidElement(pr))return pr;var X=pr;return d.cloneElement(X,{anchor:F})}):null,[s,F]);return v.jsx(v.Fragment,{children:pi})||null}d.memo(wb);class Eb extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[])}componentDidMount(){var e=this;return qE(function*(){var n=bs(bs(bs({},e.props.options||Qu),e.props.clusterer?Qu:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(n),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=_e({updaterMap:Zv,eventMap:Qv,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:Zv,eventMap:Qv,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),we(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?d.Children.map(this.props.children,n=>{if(!d.isValidElement(n))return n;var r=n;return d.cloneElement(r,{anchor:this.marker})}):null;return e||null}}j(Eb,"contextType",he);var xb=function(){function t(e,n){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var n=this.cluster.getClusterer();if(google.maps.event.trigger(n,"click",this.cluster),google.maps.event.trigger(n,"clusterclick",this.cluster),n.getZoomOnClick()){var r=n.getMaxZoom(),i=this.cluster.getBounds(),s=n.getMap();s!==null&&"fitBounds"in s&&s.fitBounds(i),this.timeOut=window.setTimeout(function(){var o=n.getMap();if(o!==null){"fitBounds"in o&&o.fitBounds(i);var a=o.getZoom()||0;r!==null&&a>r&&o.setZoom(r+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var n=this.getMap();n!==null&&(this.boundsChangedListener=google.maps.event.addListener(n,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,n,r,i,s,o;if(this.div&&this.center){var a=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,u=this.backgroundPosition.split(" "),c=parseInt(((e=u[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),h=parseInt(((n=u[1])===null||n===void 0?void 0:n.replace(/^\s+|\s+$/g,""))||"0",10),p=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(p!==null?"".concat(p.y,"px"):"0","; left: ").concat(p!==null?"".concat(p.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var m=document.createElement("img");m.alt=a,m.src=this.url,m.width=this.width,m.height=this.height,m.setAttribute("style","position: absolute; top: ".concat(h,"px; left: ").concat(c,"px")),this.cluster.getClusterer().enableRetinaIcons||(m.style.clip="rect(-".concat(h,"px, -").concat(c+this.width,"px, -").concat(h+this.height,", -").concat(c,")"));var w=document.createElement("div");w.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((r=this.sums)===null||r===void 0)&&r.text&&(w.innerText="".concat((i=this.sums)===null||i===void 0?void 0:i.text)),!((s=this.sums)===null||s===void 0)&&s.html&&(w.innerHTML="".concat((o=this.sums)===null||o===void 0?void 0:o.html)),this.div.innerHTML="",this.div.appendChild(m),this.div.appendChild(w),this.div.title=a,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var n=this.cluster.getClusterer().getStyles(),r=n[Math.min(n.length-1,Math.max(0,e.index-1))];r&&(this.url=r.url,this.height=r.height,this.width=r.width,r.className&&(this.className="".concat(this.clusterClassName," ").concat(r.className)),this.anchorText=r.anchorText||[0,0],this.anchorIcon=r.anchorIcon||[this.height/2,this.width/2],this.textColor=r.textColor||"black",this.textSize=r.textSize||11,this.textDecoration=r.textDecoration||"none",this.fontWeight=r.fontWeight||"bold",this.fontStyle=r.fontStyle||"normal",this.fontFamily=r.fontFamily||"Arial,sans-serif",this.backgroundPosition=r.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var n=this.getProjection().fromLatLngToDivPixel(e);return n!==null&&(n.x-=this.anchorIcon[1],n.y-=this.anchorIcon[0]),n},t}(),Cb=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new xb(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),n=this.getMarkers(),r=0,i=n;r<i.length;r++){var s=i[r],o=s.getPosition();o&&e.extend(o)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var r=e.getPosition();if(r){var i=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(i-1)+r.lat())/i,(this.center.lng()*(i-1)+r.lng())/i),this.calculateBounds()}}}else{var r=e.getPosition();r&&(this.center=r,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var s=this.markers.length,o=this.markerClusterer.getMaxZoom(),a=(n=this.map)===null||n===void 0?void 0:n.getZoom();if(o!==null&&typeof a<"u"&&a>o)e.getMap()!==this.map&&e.setMap(this.map);else if(s<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(s===this.minClusterSize)for(var u=0,c=this.markers;u<c.length;u++){var h=c[u];h.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var n=e.getPosition();if(n)return this.bounds.contains(n)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,n=this.markers.length,r=this.markerClusterer.getMaxZoom(),i=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(r!==null&&typeof i<"u"&&i>r){this.clusterIcon.hide();return}if(n<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var n=0;n<this.markers.length;n++)if(e===this.markers[n])return!0;return!1},t}();function Sb(t,e){var n=t.length,r=n.toString().length,i=Math.min(r,e);return{text:n.toString(),index:i,title:""}}var Tb=2e3,Ib=500,Pb="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",bb="png",kb=[53,56,66,78,90],Lb="cluster",XE=function(){function t(e,n,r){n===void 0&&(n=[]),r===void 0&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,r.zoomOnClick!==void 0&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,r.averageCenter!==void 0&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,r.ignoreHidden!==void 0&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,r.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||Pb,this.imageExtension=r.imageExtension||bb,this.imageSizes=r.imageSizes||kb,this.calculator=r.calculator||Sb,this.batchSize=r.batchSize||Tb,this.batchSizeIE=r.batchSizeIE||Ib,this.clusterClass=r.clusterClass||Lb,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,n;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((n=this.getMap())===null||n===void 0?void 0:n.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,n=this.markers;e<n.length;e++){var r=n[e];r.getMap()!==this.activeMap&&r.setMap(this.activeMap)}for(var i=0,s=this.clusters;i<s.length;i++){var o=s[i];o.remove()}this.clusters=[];for(var a=0,u=this.listeners;a<u.length;a++){var c=u[a];google.maps.event.removeListener(c)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),n=new google.maps.LatLngBounds,r=0,i=e;r<i.length;r++){var s=i[r],o=s.getPosition();o&&n.extend(o)}var a=this.getMap();a!==null&&"fitBounds"in a&&a.fitBounds(n)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,n){this.pushMarkerTo(e),n||this.redraw()},t.prototype.addMarkers=function(e,n){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];i&&this.pushMarkerTo(i)}n||this.redraw()},t.prototype.pushMarkerTo=function(e){var n=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){n.ready&&(e.isAdded=!1,n.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var n=-1;if(this.markers.indexOf)n=this.markers.indexOf(e);else for(var r=0;r<this.markers.length;r++)if(e===this.markers[r]){n=r;break}return n===-1?!1:(e.setMap(null),this.markers.splice(n,1),!0)},t.prototype.removeMarker=function(e,n){var r=this.removeMarker_(e);return!n&&r&&this.repaint(),r},t.prototype.removeMarkers=function(e,n){for(var r=!1,i=0,s=e;i<s.length;i++){var o=s[i];r=r||this.removeMarker_(o)}return!n&&r&&this.repaint(),r},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var r=0,i=e;r<i.length;r++){var s=i[r];s.remove()}},0)},t.prototype.getExtendedBounds=function(e){var n=this.getProjection(),r=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));r!==null&&(r.x+=this.gridSize,r.y-=this.gridSize);var i=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(i!==null&&(i.x-=this.gridSize,i.y+=this.gridSize),r!==null){var s=n.fromDivPixelToLatLng(r);s!==null&&e.extend(s)}if(i!==null){var o=n.fromDivPixelToLatLng(i);o!==null&&e.extend(o)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var n=0,r=this.clusters;n<r.length;n++){var i=r[n];i.remove()}this.clusters=[];for(var s=0,o=this.markers;s<o.length;s++){var a=o[s];a.isAdded=!1,e&&a.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,n){var r=6371,i=(n.lat()-e.lat())*Math.PI/180,s=(n.lng()-e.lng())*Math.PI/180,o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(n.lat()*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return r*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},t.prototype.isMarkerInBounds=function(e,n){var r=e.getPosition();return r?n.contains(r):!1},t.prototype.addToClosestCluster=function(e){for(var n,r=4e4,i=null,s=0,o=this.clusters;s<o.length;s++){var a=o[s];n=a;var u=n.getCenter(),c=e.getPosition();if(u&&c){var h=this.distanceBetweenPoints(u,c);h<r&&(r=h,i=n)}}i&&i.isMarkerInClusterBounds(e)?i.addMarker(e):(n=new Cb(this),n.addMarker(e),this.clusters.push(n))},t.prototype.createClusters=function(e){var n=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var r=this.getMap(),i=r!==null&&("getBounds"in r)?r.getBounds():null,s=(r==null?void 0:r.getZoom())||0,o=s>3?new google.maps.LatLngBounds(i==null?void 0:i.getSouthWest(),i==null?void 0:i.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),a=this.getExtendedBounds(o),u=Math.min(e+this.batchSize,this.markers.length),c=e;c<u;c++){var h=this.markers[c];h&&!h.isAdded&&this.isMarkerInBounds(h,a)&&(!this.ignoreHidden||this.ignoreHidden&&h.getVisible())&&this.addToClosestCluster(h)}if(u<this.markers.length)this.timerRefStatic=window.setTimeout(function(){n.createClusters(u)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var p=0,m=this.clusters;p<m.length;p++){var w=m[p];w.updateIcon()}}}},t.prototype.extend=function(e,n){return(function(i){for(var s in i.prototype){var o=s;this.prototype[o]=i.prototype[o]}return this}).apply(e,[n])},t}();function Yv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yv(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Yt={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Ie={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},Ab={};function Nb(t){var{children:e,options:n,averageCenter:r,batchSizeIE:i,calculator:s,clusterClass:o,enableRetinaIcons:a,gridSize:u,ignoreHidden:c,imageExtension:h,imagePath:p,imageSizes:m,maxZoom:w,minimumClusterSize:y,styles:P,title:k,zoomOnClick:C,onClick:_,onClusteringBegin:I,onClusteringEnd:A,onMouseOver:N,onMouseOut:O,onLoad:S,onUnmount:x}=t,[E,b]=d.useState(null),R=d.useContext(he),[M,L]=d.useState(null),[J,re]=d.useState(null),[ue,te]=d.useState(null),[U,H]=d.useState(null),[W,Y]=d.useState(null);return d.useEffect(()=>{E&&O&&(U!==null&&google.maps.event.removeListener(U),H(google.maps.event.addListener(E,Yt.onMouseOut,O)))},[O]),d.useEffect(()=>{E&&N&&(W!==null&&google.maps.event.removeListener(W),Y(google.maps.event.addListener(E,Yt.onMouseOver,N)))},[N]),d.useEffect(()=>{E&&_&&(M!==null&&google.maps.event.removeListener(M),L(google.maps.event.addListener(E,Yt.onClick,_)))},[_]),d.useEffect(()=>{E&&I&&(J!==null&&google.maps.event.removeListener(J),re(google.maps.event.addListener(E,Yt.onClusteringBegin,I)))},[I]),d.useEffect(()=>{E&&A&&(ue!==null&&google.maps.event.removeListener(ue),re(google.maps.event.addListener(E,Yt.onClusteringEnd,A)))},[A]),d.useEffect(()=>{typeof r<"u"&&E!==null&&Ie.averageCenter(E,r)},[E,r]),d.useEffect(()=>{typeof i<"u"&&E!==null&&Ie.batchSizeIE(E,i)},[E,i]),d.useEffect(()=>{typeof s<"u"&&E!==null&&Ie.calculator(E,s)},[E,s]),d.useEffect(()=>{typeof o<"u"&&E!==null&&Ie.clusterClass(E,o)},[E,o]),d.useEffect(()=>{typeof a<"u"&&E!==null&&Ie.enableRetinaIcons(E,a)},[E,a]),d.useEffect(()=>{typeof u<"u"&&E!==null&&Ie.gridSize(E,u)},[E,u]),d.useEffect(()=>{typeof c<"u"&&E!==null&&Ie.ignoreHidden(E,c)},[E,c]),d.useEffect(()=>{typeof h<"u"&&E!==null&&Ie.imageExtension(E,h)},[E,h]),d.useEffect(()=>{typeof p<"u"&&E!==null&&Ie.imagePath(E,p)},[E,p]),d.useEffect(()=>{typeof m<"u"&&E!==null&&Ie.imageSizes(E,m)},[E,m]),d.useEffect(()=>{typeof w<"u"&&E!==null&&Ie.maxZoom(E,w)},[E,w]),d.useEffect(()=>{typeof y<"u"&&E!==null&&Ie.minimumClusterSize(E,y)},[E,y]),d.useEffect(()=>{typeof P<"u"&&E!==null&&Ie.styles(E,P)},[E,P]),d.useEffect(()=>{typeof k<"u"&&E!==null&&Ie.title(E,k)},[E,k]),d.useEffect(()=>{typeof C<"u"&&E!==null&&Ie.zoomOnClick(E,C)},[E,C]),d.useEffect(()=>{if(R){var ee=Rb({},n||Ab),G=new XE(R,[],ee);return r&&Ie.averageCenter(G,r),i&&Ie.batchSizeIE(G,i),s&&Ie.calculator(G,s),o&&Ie.clusterClass(G,o),a&&Ie.enableRetinaIcons(G,a),u&&Ie.gridSize(G,u),c&&Ie.ignoreHidden(G,c),h&&Ie.imageExtension(G,h),p&&Ie.imagePath(G,p),m&&Ie.imageSizes(G,m),w&&Ie.maxZoom(G,w),y&&Ie.minimumClusterSize(G,y),P&&Ie.styles(G,P),k&&Ie.title(G,k),C&&Ie.zoomOnClick(G,C),O&&H(google.maps.event.addListener(G,Yt.onMouseOut,O)),N&&Y(google.maps.event.addListener(G,Yt.onMouseOver,N)),_&&L(google.maps.event.addListener(G,Yt.onClick,_)),I&&re(google.maps.event.addListener(G,Yt.onClusteringBegin,I)),A&&te(google.maps.event.addListener(G,Yt.onClusteringEnd,A)),b(G),S&&S(G),()=>{U!==null&&google.maps.event.removeListener(U),W!==null&&google.maps.event.removeListener(W),M!==null&&google.maps.event.removeListener(M),J!==null&&google.maps.event.removeListener(J),ue!==null&&google.maps.event.removeListener(ue),x&&x(G)}}},[]),E!==null&&e(E)||null}d.memo(Nb);class Mb extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"state",{markerClusterer:null}),j(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new XE(this.context,[],this.props.options);this.registeredEvents=_e({updaterMap:Ie,eventMap:Yt,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:Ie,eventMap:Yt,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),we(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}j(Mb,"contextType",he);function Xv(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var JE=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,n=function(h){h.returnValue=!1,h.preventDefault&&h.preventDefault(),e.enableEventPropagation||Xv(h)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var r=this.getPanes();if(r!==null&&r[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var i=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-i.left-i.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var s=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],o=0,a=s;o<a.length;o++){var u=a[o];this.eventListeners.push(google.maps.event.addListener(this.div,u,Xv))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",n),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var n=this.getMap();if(n instanceof google.maps.Map){var r=0,i=0,s=n.getBounds();s&&!s.contains(this.position)&&n.setCenter(this.position);var o=n.getDiv(),a=o.offsetWidth,u=o.offsetHeight,c=this.pixelOffset.width,h=this.pixelOffset.height,p=this.div.offsetWidth,m=this.div.offsetHeight,w=this.infoBoxClearance.width,y=this.infoBoxClearance.height,P=this.getProjection(),k=P.fromLatLngToContainerPixel(this.position);k!==null&&(k.x<-c+w?r=k.x+c-w:k.x+p+c+w>a&&(r=k.x+p+c+w-a),this.alignBottom?k.y<-h+y+m?i=k.y+h-y-m:k.y+h+y>u&&(i=k.y+h+y-u):k.y<-h+y?i=k.y+h-y:k.y+m+h+y>u&&(i=k.y+m+h+y-u)),r===0&&i===0||n.panBy(r,i)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.div.style[n]=e[n]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var r=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+r*100+')"',this.div.style.filter="alpha(opacity="+r*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var n=this.div.ownerDocument,r=n&&n.defaultView?n.defaultView.getComputedStyle(this.div,""):null;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var i=this.div.currentStyle;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),n=e.fromLatLngToDivPixel(this.position);n!==null&&(this.div.style.left=n.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(n.y+this.pixelOffset.height)+"px":this.div.style.top=n.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,n){var r=this;n&&(this.position=n.getPosition(),this.moveListener=google.maps.event.addListener(n,"position_changed",function(){var i=n.getPosition();r.setPosition(i)}),this.mapListener=google.maps.event.addListener(n,"map_changed",function(){r.setMap(n.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,n=this.eventListeners;e<n.length;e++){var r=n[e];google.maps.event.removeListener(r)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,n){return(function(i){for(var s in i.prototype)Object.prototype.hasOwnProperty.call(this,s)||(this.prototype[s]=i.prototype[s]);return this}).apply(e,[n])},t}(),Ob=["position"],Db=["position"];function Jv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jv(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ey={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},ty={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},Vb={};function jb(t){var{children:e,anchor:n,options:r,position:i,zIndex:s,onCloseClick:o,onDomReady:a,onContentChanged:u,onPositionChanged:c,onZindexChanged:h,onLoad:p,onUnmount:m}=t,w=d.useContext(he),[y,P]=d.useState(null),[k,C]=d.useState(null),[_,I]=d.useState(null),[A,N]=d.useState(null),[O,S]=d.useState(null),[x,E]=d.useState(null),b=d.useRef(null);return d.useEffect(()=>{w&&y!==null&&(y.close(),n?y.open(w,n):y.getPosition()&&y.open(w))},[w,y,n]),d.useEffect(()=>{r&&y!==null&&y.setOptions(r)},[y,r]),d.useEffect(()=>{if(i&&y!==null){var R=i instanceof google.maps.LatLng?i:new google.maps.LatLng(i.lat,i.lng);y.setPosition(R)}},[i]),d.useEffect(()=>{typeof s=="number"&&y!==null&&y.setZIndex(s)},[s]),d.useEffect(()=>{y&&o&&(k!==null&&google.maps.event.removeListener(k),C(google.maps.event.addListener(y,"closeclick",o)))},[o]),d.useEffect(()=>{y&&a&&(_!==null&&google.maps.event.removeListener(_),I(google.maps.event.addListener(y,"domready",a)))},[a]),d.useEffect(()=>{y&&u&&(A!==null&&google.maps.event.removeListener(A),N(google.maps.event.addListener(y,"content_changed",u)))},[u]),d.useEffect(()=>{y&&c&&(O!==null&&google.maps.event.removeListener(O),S(google.maps.event.addListener(y,"position_changed",c)))},[c]),d.useEffect(()=>{y&&h&&(x!==null&&google.maps.event.removeListener(x),E(google.maps.event.addListener(y,"zindex_changed",h)))},[h]),d.useEffect(()=>{if(w){var R=r||Vb,{position:M}=R,L=Op(R,Ob),J;M&&!(M instanceof google.maps.LatLng)&&(J=new google.maps.LatLng(M.lat,M.lng));var re=new JE(Zu(Zu({},L),J?{position:J}:{}));b.current=document.createElement("div"),P(re),o&&C(google.maps.event.addListener(re,"closeclick",o)),a&&I(google.maps.event.addListener(re,"domready",a)),u&&N(google.maps.event.addListener(re,"content_changed",u)),c&&S(google.maps.event.addListener(re,"position_changed",c)),h&&E(google.maps.event.addListener(re,"zindex_changed",h)),re.setContent(b.current),n?re.open(w,n):re.getPosition()?re.open(w):tt(!1,"You must provide either an anchor or a position prop for <InfoBox>."),p&&p(re)}return()=>{y!==null&&(k&&google.maps.event.removeListener(k),A&&google.maps.event.removeListener(A),_&&google.maps.event.removeListener(_),O&&google.maps.event.removeListener(O),x&&google.maps.event.removeListener(x),m&&m(y),y.close())}},[]),b.current?Bi.createPortal(d.Children.only(e),b.current):null}d.memo(jb);class Ub extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"containerElement",null),j(this,"state",{infoBox:null}),j(this,"open",(e,n)=>{n?this.context!==null&&e.open(this.context,n):e.getPosition()?this.context!==null&&e.open(this.context):tt(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),j(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:n}=e,r=Op(e,Db),i;n&&!(n instanceof google.maps.LatLng)&&(i=new google.maps.LatLng(n.lat,n.lng));var s=new JE(Zu(Zu({},r),i?{position:i}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=_e({updaterMap:ty,eventMap:ey,prevProps:{},nextProps:this.props,instance:s}),this.setState({infoBox:s},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:n}=this.state;n!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:ty,eventMap:ey,prevProps:e,nextProps:this.props,instance:n}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:n}=this.state;n!==null&&(e&&e(n),we(this.registeredEvents),n.close())}render(){return this.containerElement?Bi.createPortal(d.Children.only(this.props.children),this.containerElement):null}}j(Ub,"contextType",he);var Xh,ny;function Fb(){return ny||(ny=1,Xh=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),Xh}var zb=Fb(),ry=WE(zb),iy=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Jh=1,Vo=8;class Dp{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[n,r]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");var i=r>>4;if(i!==Jh)throw new Error("Got v".concat(i," data when expected v").concat(Jh,"."));var s=iy[r&15];if(!s)throw new Error("Unrecognized array type.");var[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new Dp(a,o,s,e)}constructor(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var s=iy.indexOf(this.ArrayType),o=e*2*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,u=(8-a%8)%8;if(s<0)throw new Error("Unexpected typed array class: ".concat(r,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,Vo,e),this.coords=new this.ArrayType(this.data,Vo+a+u,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Vo+o+a+u),this.ids=new this.IndexArrayType(this.data,Vo,e),this.coords=new this.ArrayType(this.data,Vo+a+u,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Jh<<4)+s]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){var r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=n,r}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return cf(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:s,coords:o,nodeSize:a}=this,u=[0,s.length-1,0],c=[];u.length;){var h=u.pop()||0,p=u.pop()||0,m=u.pop()||0;if(p-m<=a){for(var w=m;w<=p;w++){var y=o[2*w],P=o[2*w+1];y>=e&&y<=r&&P>=n&&P<=i&&c.push(s[w])}continue}var k=m+p>>1,C=o[2*k],_=o[2*k+1];C>=e&&C<=r&&_>=n&&_<=i&&c.push(s[k]),(h===0?e<=C:n<=_)&&(u.push(m),u.push(k-1),u.push(1-h)),(h===0?r>=C:i>=_)&&(u.push(k+1),u.push(p),u.push(1-h))}return c}within(e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:s,nodeSize:o}=this,a=[0,i.length-1,0],u=[],c=r*r;a.length;){var h=a.pop()||0,p=a.pop()||0,m=a.pop()||0;if(p-m<=o){for(var w=m;w<=p;w++)sy(s[2*w],s[2*w+1],e,n)<=c&&u.push(i[w]);continue}var y=m+p>>1,P=s[2*y],k=s[2*y+1];sy(P,k,e,n)<=c&&u.push(i[y]),(h===0?e-r<=P:n-r<=k)&&(a.push(m),a.push(y-1),a.push(1-h)),(h===0?e+r>=P:n+r>=k)&&(a.push(y+1),a.push(p),a.push(1-h))}return u}}function cf(t,e,n,r,i,s){if(!(i-r<=n)){var o=r+i>>1;ex(t,e,o,r,i,s),cf(t,e,n,r,o-1,1-s),cf(t,e,n,o+1,i,1-s)}}function ex(t,e,n,r,i,s){for(;i>r;){if(i-r>600){var o=i-r+1,a=n-r+1,u=Math.log(o),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(o-c)/o)*(a-o/2<0?-1:1),p=Math.max(r,Math.floor(n-a*c/o+h)),m=Math.min(i,Math.floor(n+(o-a)*c/o+h));ex(t,e,n,p,m,s)}var w=e[2*n+s],y=r,P=i;for(jo(t,e,r,n),e[2*i+s]>w&&jo(t,e,r,i);y<P;){for(jo(t,e,y,P),y++,P--;e[2*y+s]<w;)y++;for(;e[2*P+s]>w;)P--}e[2*r+s]===w?jo(t,e,r,P):(P++,jo(t,e,P,i)),P<=n&&(r=P+1),n<=P&&(i=P-1)}}function jo(t,e,n,r){ed(t,n,r),ed(e,2*n,2*r),ed(e,2*n+1,2*r+1)}function ed(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function sy(t,e,n,r){var i=t-n,s=e-r;return i*i+s*s}var Bb={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},oy=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),yi=2,Cr=3,td=4,wr=5,tx=6;class $b{constructor(e){this.options=Object.assign(Object.create(Bb),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:n,minZoom:r,maxZoom:i}=this.options;n&&console.time("total time");var s="prepare ".concat(e.length," points");n&&console.time(s),this.points=e;for(var o=[],a=0;a<e.length;a++){var u=e[a];if(u.geometry){var[c,h]=u.geometry.coordinates,p=oy(Hl(c)),m=oy(Wl(h));o.push(p,m,1/0,a,-1,1),this.options.reduce&&o.push(0)}}var w=this.trees[i+1]=this._createTree(o);n&&console.timeEnd(s);for(var y=i;y>=r;y--){var P=+Date.now();w=this.trees[y]=this._createTree(this._cluster(w,y)),n&&console.log("z%d: %d clusters in %dms",y,w.numItems,+Date.now()-P)}return n&&console.timeEnd("total time"),this}getClusters(e,n){var r=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),s=e[2]===180?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,s=180;else if(r>s){var a=this.getClusters([r,i,180,o],n),u=this.getClusters([-180,i,s,o],n);return a.concat(u)}var c=this.trees[this._limitZoom(n)],h=c.range(Hl(r),Wl(o),Hl(s),Wl(i)),p=c.data,m=[];for(var w of h){var y=this.stride*w;m.push(p[y+wr]>1?ay(p,y,this.clusterProps):this.points[p[y+Cr]])}return m}getChildren(e){var n=this._getOriginId(e),r=this._getOriginZoom(e),i="No cluster with the specified id.",s=this.trees[r];if(!s)throw new Error(i);var o=s.data;if(n*this.stride>=o.length)throw new Error(i);var a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),u=o[n*this.stride],c=o[n*this.stride+1],h=s.within(u,c,a),p=[];for(var m of h){var w=m*this.stride;o[w+td]===e&&p.push(o[w+wr]>1?ay(o,w,this.clusterProps):this.points[o[w+Cr]])}if(p.length===0)throw new Error(i);return p}getLeaves(e,n,r){n=n||10,r=r||0;var i=[];return this._appendLeaves(i,e,n,r,0),i}getTile(e,n,r){var i=this.trees[this._limitZoom(e)],s=Math.pow(2,e),{extent:o,radius:a}=this.options,u=a/o,c=(r-u)/s,h=(r+1+u)/s,p={features:[]};return this._addTileFeatures(i.range((n-u)/s,c,(n+1+u)/s,h),i.data,n,r,s,p),n===0&&this._addTileFeatures(i.range(1-u/s,c,1,h),i.data,s,r,s,p),n===s-1&&this._addTileFeatures(i.range(0,c,u/s,h),i.data,-1,r,s,p),p.features.length?p:null}getClusterExpansionZoom(e){for(var n=this._getOriginZoom(e)-1;n<=this.options.maxZoom;){var r=this.getChildren(e);if(n++,r.length!==1)break;e=r[0].properties.cluster_id}return n}_appendLeaves(e,n,r,i,s){var o=this.getChildren(n);for(var a of o){var u=a.properties;if(u&&u.cluster?s+u.point_count<=i?s+=u.point_count:s=this._appendLeaves(e,u.cluster_id,r,i,s):s<i?s++:e.push(a),e.length===r)break}return s}_createTree(e){for(var n=new Dp(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)n.add(e[r],e[r+1]);return n.finish(),n.data=e,n}_addTileFeatures(e,n,r,i,s,o){for(var a of e){var u=a*this.stride,c=n[u+wr]>1,h=void 0,p=void 0,m=void 0;if(c)h=nx(n,u,this.clusterProps),p=n[u],m=n[u+1];else{var w=this.points[n[u+Cr]];h=w.properties;var[y,P]=w.geometry.coordinates;p=Hl(y),m=Wl(P)}var k={type:1,geometry:[[Math.round(this.options.extent*(p*s-r)),Math.round(this.options.extent*(m*s-i))]],tags:h},C=void 0;c||this.options.generateId?C=n[u+Cr]:C=this.points[n[u+Cr]].id,C!==void 0&&(k.id=C),o.features.push(k)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,n){for(var{radius:r,extent:i,reduce:s,minPoints:o}=this.options,a=r/(i*Math.pow(2,n)),u=e.data,c=[],h=this.stride,p=0;p<u.length;p+=h)if(!(u[p+yi]<=n)){u[p+yi]=n;var m=u[p],w=u[p+1],y=e.within(u[p],u[p+1],a),P=u[p+wr],k=P;for(var C of y){var _=C*h;u[_+yi]>n&&(k+=u[_+wr])}if(k>P&&k>=o){var I=m*P,A=w*P,N=void 0,O=-1,S=((p/h|0)<<5)+(n+1)+this.points.length;for(var x of y){var E=x*h;if(!(u[E+yi]<=n)){u[E+yi]=n;var b=u[E+wr];I+=u[E]*b,A+=u[E+1]*b,u[E+td]=S,s&&(N||(N=this._map(u,p,!0),O=this.clusterProps.length,this.clusterProps.push(N)),s(N,this._map(u,E)))}}u[p+td]=S,c.push(I/k,A/k,1/0,S,-1,k),s&&c.push(O)}else{for(var R=0;R<h;R++)c.push(u[p+R]);if(k>1)for(var M of y){var L=M*h;if(!(u[L+yi]<=n)){u[L+yi]=n;for(var J=0;J<h;J++)c.push(u[L+J])}}}}return c}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,n,r){if(e[n+wr]>1){var i=this.clusterProps[e[n+tx]];return r?Object.assign({},i):i}var s=this.points[e[n+Cr]].properties,o=this.options.map(s);return r&&o===s?Object.assign({},o):o}}function ay(t,e,n){return{type:"Feature",id:t[e+Cr],properties:nx(t,e,n),geometry:{type:"Point",coordinates:[Hb(t[e]),Wb(t[e+1])]}}}function nx(t,e,n){var r=t[e+wr],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,s=t[e+tx],o=s===-1?{}:Object.assign({},n[s]);return Object.assign(o,{cluster:!0,cluster_id:t[e+Cr],point_count:r,point_count_abbreviated:i})}function Hl(t){return t/360+.5}function Wl(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function Hb(t){return(t-.5)*360}function Wb(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function qb(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}class $t{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,n){this.isAdvancedMarker(e)?e.map=n:e.setMap(n)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class hf{constructor(e){var{markers:n,position:r}=e;this.markers=n,r&&(r instanceof google.maps.LatLng?this._position=r:this._position=new google.maps.LatLng(r))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var n of this.markers)e.extend($t.getPosition(n));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>$t.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&($t.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class Gb{constructor(e){var{maxZoom:n=16}=e;this.maxZoom=n}noop(e){var{markers:n}=e;return Kb(n)}}var Kb=t=>{var e=t.map(n=>new hf({position:$t.getPosition(n),markers:[n]}));return e};class Qb extends Gb{constructor(e){var{maxZoom:n,radius:r=60}=e,i=qb(e,["maxZoom","radius"]);super({maxZoom:n}),this.state={zoom:-1},this.superCluster=new $b(Object.assign({maxZoom:this.maxZoom,radius:r},i))}calculate(e){var n=!1,r={zoom:e.map.getZoom()};if(!ry(e.markers,this.markers)){n=!0,this.markers=[...e.markers];var i=this.markers.map(s=>{var o=$t.getPosition(s),a=[o.lng(),o.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:a},properties:{marker:s}}});this.superCluster.load(i)}return n||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(n=!ry(this.state,r)),this.state=r,n&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:n}}cluster(e){var{map:n}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(n.getZoom())).map(r=>this.transformCluster(r))}transformCluster(e){var{geometry:{coordinates:[n,r]},properties:i}=e;if(i.cluster)return new hf({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map(o=>o.properties.marker),position:{lat:r,lng:n}});var s=i.marker;return new hf({markers:[s],position:$t.getPosition(s)})}}class Zb{constructor(e,n){this.markers={sum:e.length};var r=n.map(s=>s.count),i=r.reduce((s,o)=>s+o,0);this.clusters={count:n.length,markers:{mean:i/n.length,sum:i,min:Math.min(...r),max:Math.max(...r)}}}}class Yb{render(e,n,r){var{count:i,position:s}=e,o=i>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff",a='<svg fill="'.concat(o,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(i,`</text>
</svg>`),u="Cluster of ".concat(i," markers"),c=Number(google.maps.Marker.MAX_ZINDEX)+i;if($t.isAdvancedMarkerAvailable(r)){var h=new DOMParser,p=h.parseFromString(a,"image/svg+xml").documentElement;p.setAttribute("transform","translate(0 25)");var m={map:r,position:s,zIndex:c,title:u,content:p};return new google.maps.marker.AdvancedMarkerElement(m)}var w={position:s,zIndex:c,title:u,icon:{url:"data:image/svg+xml;base64,".concat(btoa(a)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(w)}}function Xb(t,e){for(var n in e.prototype)t.prototype[n]=e.prototype[n]}class Vp{constructor(){Xb(Vp,google.maps.OverlayView)}}var oa;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(oa||(oa={}));var Jb=(t,e,n)=>{n.fitBounds(e.bounds)};class e1 extends Vp{constructor(e){var{map:n,markers:r=[],algorithmOptions:i={},algorithm:s=new Qb(i),renderer:o=new Yb,onClusterClick:a=Jb}=e;super(),this.markers=[...r],this.clusters=[],this.algorithm=s,this.renderer=o,this.onClusterClick=a,n&&this.setMap(n)}addMarker(e,n){this.markers.includes(e)||(this.markers.push(e),n||this.render())}addMarkers(e,n){e.forEach(r=>{this.addMarker(r,!0)}),n||this.render()}removeMarker(e,n){var r=this.markers.indexOf(e);return r===-1?!1:($t.setMap(e,null),this.markers.splice(r,1),n||this.render(),!0)}removeMarkers(e,n){var r=!1;return e.forEach(i=>{r=this.removeMarker(i,!0)||r}),r&&!n&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,oa.CLUSTERING_BEGIN,this);var{clusters:n,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){var i=new Set;for(var s of n)s.markers.length==1&&i.add(s.markers[0]);var o=[];for(var a of this.clusters)a.marker!=null&&(a.markers.length==1?i.has(a.marker)||$t.setMap(a.marker,null):o.push(a.marker));this.clusters=n,this.renderClusters(),requestAnimationFrame(()=>o.forEach(u=>$t.setMap(u,null)))}google.maps.event.trigger(this,oa.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>$t.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new Zb(this.markers,this.clusters),n=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,n),r.markers.forEach(i=>$t.setMap(i,null)),this.onClusterClick&&r.marker.addListener("click",i=>{google.maps.event.trigger(this,oa.CLUSTER_CLICK,r),this.onClusterClick(i,r,n)})),$t.setMap(r.marker,n)})}}function ly(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ly(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ly(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t1(t){var e=eb(),[n,r]=d.useState(null);return d.useEffect(()=>{if(e&&n===null){var i=new e1(uy(uy({},t),{},{map:e}));r(i)}},[e]),n}function n1(t){var{children:e,options:n}=t,r=t1(n);return r!==null?e(r):null}d.memo(n1);var cy={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},hy={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function r1(t){var{children:e,anchor:n,options:r,position:i,zIndex:s,onCloseClick:o,onDomReady:a,onContentChanged:u,onPositionChanged:c,onZindexChanged:h,onLoad:p,onUnmount:m}=t,w=d.useContext(he),[y,P]=d.useState(null),[k,C]=d.useState(null),[_,I]=d.useState(null),[A,N]=d.useState(null),[O,S]=d.useState(null),[x,E]=d.useState(null),b=d.useRef(null);return d.useEffect(()=>{y!==null&&(y.close(),n?y.open(w,n):y.getPosition()&&y.open(w))},[w,y,n]),d.useEffect(()=>{r&&y!==null&&y.setOptions(r)},[y,r]),d.useEffect(()=>{i&&y!==null&&y.setPosition(i)},[i]),d.useEffect(()=>{typeof s=="number"&&y!==null&&y.setZIndex(s)},[s]),d.useEffect(()=>{y&&o&&(k!==null&&google.maps.event.removeListener(k),C(google.maps.event.addListener(y,"closeclick",o)))},[o]),d.useEffect(()=>{y&&a&&(_!==null&&google.maps.event.removeListener(_),I(google.maps.event.addListener(y,"domready",a)))},[a]),d.useEffect(()=>{y&&u&&(A!==null&&google.maps.event.removeListener(A),N(google.maps.event.addListener(y,"content_changed",u)))},[u]),d.useEffect(()=>{y&&c&&(O!==null&&google.maps.event.removeListener(O),S(google.maps.event.addListener(y,"position_changed",c)))},[c]),d.useEffect(()=>{y&&h&&(x!==null&&google.maps.event.removeListener(x),E(google.maps.event.addListener(y,"zindex_changed",h)))},[h]),d.useEffect(()=>{var R=new google.maps.InfoWindow(r);return P(R),b.current=document.createElement("div"),o&&C(google.maps.event.addListener(R,"closeclick",o)),a&&I(google.maps.event.addListener(R,"domready",a)),u&&N(google.maps.event.addListener(R,"content_changed",u)),c&&S(google.maps.event.addListener(R,"position_changed",c)),h&&E(google.maps.event.addListener(R,"zindex_changed",h)),R.setContent(b.current),i&&R.setPosition(i),s&&R.setZIndex(s),n?R.open(w,n):R.getPosition()?R.open(w):tt(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),p&&p(R),()=>{k&&google.maps.event.removeListener(k),A&&google.maps.event.removeListener(A),_&&google.maps.event.removeListener(_),O&&google.maps.event.removeListener(O),x&&google.maps.event.removeListener(x),m&&m(R),R.close()}},[]),b.current?Bi.createPortal(d.Children.only(e),b.current):null}d.memo(r1);class i1 extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"containerElement",null),j(this,"state",{infoWindow:null}),j(this,"open",(e,n)=>{n?e.open(this.context,n):e.getPosition()?e.open(this.context):tt(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),j(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=_e({updaterMap:hy,eventMap:cy,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:hy,eventMap:cy,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(we(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?Bi.createPortal(d.Children.only(this.props.children),this.containerElement):null}}j(i1,"contextType",he);function dy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dy(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var fy={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},py={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},s1={};function o1(t){var{options:e,draggable:n,editable:r,visible:i,path:s,onDblClick:o,onDragEnd:a,onDragStart:u,onMouseDown:c,onMouseMove:h,onMouseOut:p,onMouseOver:m,onMouseUp:w,onRightClick:y,onClick:P,onDrag:k,onLoad:C,onUnmount:_}=t,I=d.useContext(he),[A,N]=d.useState(null),[O,S]=d.useState(null),[x,E]=d.useState(null),[b,R]=d.useState(null),[M,L]=d.useState(null),[J,re]=d.useState(null),[ue,te]=d.useState(null),[U,H]=d.useState(null),[W,Y]=d.useState(null),[ee,G]=d.useState(null),[fe,F]=d.useState(null),[xe,ge]=d.useState(null);return d.useEffect(()=>{A!==null&&A.setMap(I)},[I]),d.useEffect(()=>{typeof e<"u"&&A!==null&&A.setOptions(e)},[A,e]),d.useEffect(()=>{typeof n<"u"&&A!==null&&A.setDraggable(n)},[A,n]),d.useEffect(()=>{typeof r<"u"&&A!==null&&A.setEditable(r)},[A,r]),d.useEffect(()=>{typeof i<"u"&&A!==null&&A.setVisible(i)},[A,i]),d.useEffect(()=>{typeof s<"u"&&A!==null&&A.setPath(s)},[A,s]),d.useEffect(()=>{A&&o&&(O!==null&&google.maps.event.removeListener(O),S(google.maps.event.addListener(A,"dblclick",o)))},[o]),d.useEffect(()=>{A&&a&&(x!==null&&google.maps.event.removeListener(x),E(google.maps.event.addListener(A,"dragend",a)))},[a]),d.useEffect(()=>{A&&u&&(b!==null&&google.maps.event.removeListener(b),R(google.maps.event.addListener(A,"dragstart",u)))},[u]),d.useEffect(()=>{A&&c&&(M!==null&&google.maps.event.removeListener(M),L(google.maps.event.addListener(A,"mousedown",c)))},[c]),d.useEffect(()=>{A&&h&&(J!==null&&google.maps.event.removeListener(J),re(google.maps.event.addListener(A,"mousemove",h)))},[h]),d.useEffect(()=>{A&&p&&(ue!==null&&google.maps.event.removeListener(ue),te(google.maps.event.addListener(A,"mouseout",p)))},[p]),d.useEffect(()=>{A&&m&&(U!==null&&google.maps.event.removeListener(U),H(google.maps.event.addListener(A,"mouseover",m)))},[m]),d.useEffect(()=>{A&&w&&(W!==null&&google.maps.event.removeListener(W),Y(google.maps.event.addListener(A,"mouseup",w)))},[w]),d.useEffect(()=>{A&&y&&(ee!==null&&google.maps.event.removeListener(ee),G(google.maps.event.addListener(A,"rightclick",y)))},[y]),d.useEffect(()=>{A&&P&&(fe!==null&&google.maps.event.removeListener(fe),F(google.maps.event.addListener(A,"click",P)))},[P]),d.useEffect(()=>{A&&k&&(xe!==null&&google.maps.event.removeListener(xe),ge(google.maps.event.addListener(A,"drag",k)))},[k]),d.useEffect(()=>{var ce=new google.maps.Polyline(Yu(Yu({},e||s1),{},{map:I}));return s&&ce.setPath(s),typeof i<"u"&&ce.setVisible(i),typeof r<"u"&&ce.setEditable(r),typeof n<"u"&&ce.setDraggable(n),o&&S(google.maps.event.addListener(ce,"dblclick",o)),a&&E(google.maps.event.addListener(ce,"dragend",a)),u&&R(google.maps.event.addListener(ce,"dragstart",u)),c&&L(google.maps.event.addListener(ce,"mousedown",c)),h&&re(google.maps.event.addListener(ce,"mousemove",h)),p&&te(google.maps.event.addListener(ce,"mouseout",p)),m&&H(google.maps.event.addListener(ce,"mouseover",m)),w&&Y(google.maps.event.addListener(ce,"mouseup",w)),y&&G(google.maps.event.addListener(ce,"rightclick",y)),P&&F(google.maps.event.addListener(ce,"click",P)),k&&ge(google.maps.event.addListener(ce,"drag",k)),N(ce),C&&C(ce),()=>{O!==null&&google.maps.event.removeListener(O),x!==null&&google.maps.event.removeListener(x),b!==null&&google.maps.event.removeListener(b),M!==null&&google.maps.event.removeListener(M),J!==null&&google.maps.event.removeListener(J),ue!==null&&google.maps.event.removeListener(ue),U!==null&&google.maps.event.removeListener(U),W!==null&&google.maps.event.removeListener(W),ee!==null&&google.maps.event.removeListener(ee),fe!==null&&google.maps.event.removeListener(fe),_&&_(ce),ce.setMap(null)}},[]),null}d.memo(o1);class a1 extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"state",{polyline:null}),j(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(Yu(Yu({},this.props.options),{},{map:this.context}));this.registeredEvents=_e({updaterMap:py,eventMap:fy,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:py,eventMap:fy,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),we(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}j(a1,"contextType",he);function my(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?my(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):my(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var vy={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},yy={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function l1(t){var{options:e,draggable:n,editable:r,visible:i,path:s,paths:o,onDblClick:a,onDragEnd:u,onDragStart:c,onMouseDown:h,onMouseMove:p,onMouseOut:m,onMouseOver:w,onMouseUp:y,onRightClick:P,onClick:k,onDrag:C,onLoad:_,onUnmount:I,onEdit:A}=t,N=d.useContext(he),[O,S]=d.useState(null),[x,E]=d.useState(null),[b,R]=d.useState(null),[M,L]=d.useState(null),[J,re]=d.useState(null),[ue,te]=d.useState(null),[U,H]=d.useState(null),[W,Y]=d.useState(null),[ee,G]=d.useState(null),[fe,F]=d.useState(null),[xe,ge]=d.useState(null),[ce,Be]=d.useState(null);return d.useEffect(()=>{O!==null&&O.setMap(N)},[N]),d.useEffect(()=>{typeof e<"u"&&O!==null&&O.setOptions(e)},[O,e]),d.useEffect(()=>{typeof n<"u"&&O!==null&&O.setDraggable(n)},[O,n]),d.useEffect(()=>{typeof r<"u"&&O!==null&&O.setEditable(r)},[O,r]),d.useEffect(()=>{typeof i<"u"&&O!==null&&O.setVisible(i)},[O,i]),d.useEffect(()=>{typeof s<"u"&&O!==null&&O.setPath(s)},[O,s]),d.useEffect(()=>{typeof o<"u"&&O!==null&&O.setPaths(o)},[O,o]),d.useEffect(()=>{O&&typeof a=="function"&&(x!==null&&google.maps.event.removeListener(x),E(google.maps.event.addListener(O,"dblclick",a)))},[a]),d.useEffect(()=>{O&&(google.maps.event.addListener(O.getPath(),"insert_at",()=>{A==null||A(O)}),google.maps.event.addListener(O.getPath(),"set_at",()=>{A==null||A(O)}),google.maps.event.addListener(O.getPath(),"remove_at",()=>{A==null||A(O)}))},[O,A]),d.useEffect(()=>{O&&typeof u=="function"&&(b!==null&&google.maps.event.removeListener(b),R(google.maps.event.addListener(O,"dragend",u)))},[u]),d.useEffect(()=>{O&&typeof c=="function"&&(M!==null&&google.maps.event.removeListener(M),L(google.maps.event.addListener(O,"dragstart",c)))},[c]),d.useEffect(()=>{O&&typeof h=="function"&&(J!==null&&google.maps.event.removeListener(J),re(google.maps.event.addListener(O,"mousedown",h)))},[h]),d.useEffect(()=>{O&&typeof p=="function"&&(ue!==null&&google.maps.event.removeListener(ue),te(google.maps.event.addListener(O,"mousemove",p)))},[p]),d.useEffect(()=>{O&&typeof m=="function"&&(U!==null&&google.maps.event.removeListener(U),H(google.maps.event.addListener(O,"mouseout",m)))},[m]),d.useEffect(()=>{O&&typeof w=="function"&&(W!==null&&google.maps.event.removeListener(W),Y(google.maps.event.addListener(O,"mouseover",w)))},[w]),d.useEffect(()=>{O&&typeof y=="function"&&(ee!==null&&google.maps.event.removeListener(ee),G(google.maps.event.addListener(O,"mouseup",y)))},[y]),d.useEffect(()=>{O&&typeof P=="function"&&(fe!==null&&google.maps.event.removeListener(fe),F(google.maps.event.addListener(O,"rightclick",P)))},[P]),d.useEffect(()=>{O&&typeof k=="function"&&(xe!==null&&google.maps.event.removeListener(xe),ge(google.maps.event.addListener(O,"click",k)))},[k]),d.useEffect(()=>{O&&typeof C=="function"&&(ce!==null&&google.maps.event.removeListener(ce),Be(google.maps.event.addListener(O,"drag",C)))},[C]),d.useEffect(()=>{var ie=new google.maps.Polygon(gy(gy({},e),{},{map:N}));return s&&ie.setPath(s),o&&ie.setPaths(o),typeof i<"u"&&ie.setVisible(i),typeof r<"u"&&ie.setEditable(r),typeof n<"u"&&ie.setDraggable(n),a&&E(google.maps.event.addListener(ie,"dblclick",a)),u&&R(google.maps.event.addListener(ie,"dragend",u)),c&&L(google.maps.event.addListener(ie,"dragstart",c)),h&&re(google.maps.event.addListener(ie,"mousedown",h)),p&&te(google.maps.event.addListener(ie,"mousemove",p)),m&&H(google.maps.event.addListener(ie,"mouseout",m)),w&&Y(google.maps.event.addListener(ie,"mouseover",w)),y&&G(google.maps.event.addListener(ie,"mouseup",y)),P&&F(google.maps.event.addListener(ie,"rightclick",P)),k&&ge(google.maps.event.addListener(ie,"click",k)),C&&Be(google.maps.event.addListener(ie,"drag",C)),S(ie),_&&_(ie),()=>{x!==null&&google.maps.event.removeListener(x),b!==null&&google.maps.event.removeListener(b),M!==null&&google.maps.event.removeListener(M),J!==null&&google.maps.event.removeListener(J),ue!==null&&google.maps.event.removeListener(ue),U!==null&&google.maps.event.removeListener(U),W!==null&&google.maps.event.removeListener(W),ee!==null&&google.maps.event.removeListener(ee),fe!==null&&google.maps.event.removeListener(fe),xe!==null&&google.maps.event.removeListener(xe),I&&I(ie),ie.setMap(null)}},[]),null}d.memo(l1);class u1 extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=_e({updaterMap:yy,eventMap:vy,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:yy,eventMap:vy,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),we(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}j(u1,"contextType",he);function _y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_y(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_y(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var wy={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Ey={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function c1(t){var{options:e,bounds:n,draggable:r,editable:i,visible:s,onDblClick:o,onDragEnd:a,onDragStart:u,onMouseDown:c,onMouseMove:h,onMouseOut:p,onMouseOver:m,onMouseUp:w,onRightClick:y,onClick:P,onDrag:k,onBoundsChanged:C,onLoad:_,onUnmount:I}=t,A=d.useContext(he),[N,O]=d.useState(null),[S,x]=d.useState(null),[E,b]=d.useState(null),[R,M]=d.useState(null),[L,J]=d.useState(null),[re,ue]=d.useState(null),[te,U]=d.useState(null),[H,W]=d.useState(null),[Y,ee]=d.useState(null),[G,fe]=d.useState(null),[F,xe]=d.useState(null),[ge,ce]=d.useState(null),[Be,ie]=d.useState(null);return d.useEffect(()=>{N!==null&&N.setMap(A)},[A]),d.useEffect(()=>{typeof e<"u"&&N!==null&&N.setOptions(e)},[N,e]),d.useEffect(()=>{typeof r<"u"&&N!==null&&N.setDraggable(r)},[N,r]),d.useEffect(()=>{typeof i<"u"&&N!==null&&N.setEditable(i)},[N,i]),d.useEffect(()=>{typeof s<"u"&&N!==null&&N.setVisible(s)},[N,s]),d.useEffect(()=>{typeof n<"u"&&N!==null&&N.setBounds(n)},[N,n]),d.useEffect(()=>{N&&o&&(S!==null&&google.maps.event.removeListener(S),x(google.maps.event.addListener(N,"dblclick",o)))},[o]),d.useEffect(()=>{N&&a&&(E!==null&&google.maps.event.removeListener(E),b(google.maps.event.addListener(N,"dragend",a)))},[a]),d.useEffect(()=>{N&&u&&(R!==null&&google.maps.event.removeListener(R),M(google.maps.event.addListener(N,"dragstart",u)))},[u]),d.useEffect(()=>{N&&c&&(L!==null&&google.maps.event.removeListener(L),J(google.maps.event.addListener(N,"mousedown",c)))},[c]),d.useEffect(()=>{N&&h&&(re!==null&&google.maps.event.removeListener(re),ue(google.maps.event.addListener(N,"mousemove",h)))},[h]),d.useEffect(()=>{N&&p&&(te!==null&&google.maps.event.removeListener(te),U(google.maps.event.addListener(N,"mouseout",p)))},[p]),d.useEffect(()=>{N&&m&&(H!==null&&google.maps.event.removeListener(H),W(google.maps.event.addListener(N,"mouseover",m)))},[m]),d.useEffect(()=>{N&&w&&(Y!==null&&google.maps.event.removeListener(Y),ee(google.maps.event.addListener(N,"mouseup",w)))},[w]),d.useEffect(()=>{N&&y&&(G!==null&&google.maps.event.removeListener(G),fe(google.maps.event.addListener(N,"rightclick",y)))},[y]),d.useEffect(()=>{N&&P&&(F!==null&&google.maps.event.removeListener(F),xe(google.maps.event.addListener(N,"click",P)))},[P]),d.useEffect(()=>{N&&k&&(ge!==null&&google.maps.event.removeListener(ge),ce(google.maps.event.addListener(N,"drag",k)))},[k]),d.useEffect(()=>{N&&C&&(Be!==null&&google.maps.event.removeListener(Be),ie(google.maps.event.addListener(N,"bounds_changed",C)))},[C]),d.useEffect(()=>{var pe=new google.maps.Rectangle(Xu(Xu({},e),{},{map:A}));return typeof s<"u"&&pe.setVisible(s),typeof i<"u"&&pe.setEditable(i),typeof r<"u"&&pe.setDraggable(r),typeof n<"u"&&pe.setBounds(n),o&&x(google.maps.event.addListener(pe,"dblclick",o)),a&&b(google.maps.event.addListener(pe,"dragend",a)),u&&M(google.maps.event.addListener(pe,"dragstart",u)),c&&J(google.maps.event.addListener(pe,"mousedown",c)),h&&ue(google.maps.event.addListener(pe,"mousemove",h)),p&&U(google.maps.event.addListener(pe,"mouseout",p)),m&&W(google.maps.event.addListener(pe,"mouseover",m)),w&&ee(google.maps.event.addListener(pe,"mouseup",w)),y&&fe(google.maps.event.addListener(pe,"rightclick",y)),P&&xe(google.maps.event.addListener(pe,"click",P)),k&&ce(google.maps.event.addListener(pe,"drag",k)),C&&ie(google.maps.event.addListener(pe,"bounds_changed",C)),O(pe),_&&_(pe),()=>{S!==null&&google.maps.event.removeListener(S),E!==null&&google.maps.event.removeListener(E),R!==null&&google.maps.event.removeListener(R),L!==null&&google.maps.event.removeListener(L),re!==null&&google.maps.event.removeListener(re),te!==null&&google.maps.event.removeListener(te),H!==null&&google.maps.event.removeListener(H),Y!==null&&google.maps.event.removeListener(Y),G!==null&&google.maps.event.removeListener(G),F!==null&&google.maps.event.removeListener(F),ge!==null&&google.maps.event.removeListener(ge),Be!==null&&google.maps.event.removeListener(Be),I&&I(pe),pe.setMap(null)}},[]),null}d.memo(c1);class h1 extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"state",{rectangle:null}),j(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(Xu(Xu({},this.props.options),{},{map:this.context}));this.registeredEvents=_e({updaterMap:Ey,eventMap:wy,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:Ey,eventMap:wy,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),we(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}j(h1,"contextType",he);function xy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ju(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xy(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Cy={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Sy={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},d1={};function f1(t){var{options:e,center:n,radius:r,draggable:i,editable:s,visible:o,onDblClick:a,onDragEnd:u,onDragStart:c,onMouseDown:h,onMouseMove:p,onMouseOut:m,onMouseOver:w,onMouseUp:y,onRightClick:P,onClick:k,onDrag:C,onCenterChanged:_,onRadiusChanged:I,onLoad:A,onUnmount:N}=t,O=d.useContext(he),[S,x]=d.useState(null),[E,b]=d.useState(null),[R,M]=d.useState(null),[L,J]=d.useState(null),[re,ue]=d.useState(null),[te,U]=d.useState(null),[H,W]=d.useState(null),[Y,ee]=d.useState(null),[G,fe]=d.useState(null),[F,xe]=d.useState(null),[ge,ce]=d.useState(null),[Be,ie]=d.useState(null),[pe,Pt]=d.useState(null),[Ft,On]=d.useState(null);return d.useEffect(()=>{S!==null&&S.setMap(O)},[O]),d.useEffect(()=>{typeof e<"u"&&S!==null&&S.setOptions(e)},[S,e]),d.useEffect(()=>{typeof i<"u"&&S!==null&&S.setDraggable(i)},[S,i]),d.useEffect(()=>{typeof s<"u"&&S!==null&&S.setEditable(s)},[S,s]),d.useEffect(()=>{typeof o<"u"&&S!==null&&S.setVisible(o)},[S,o]),d.useEffect(()=>{typeof r=="number"&&S!==null&&S.setRadius(r)},[S,r]),d.useEffect(()=>{typeof n<"u"&&S!==null&&S.setCenter(n)},[S,n]),d.useEffect(()=>{S&&a&&(E!==null&&google.maps.event.removeListener(E),b(google.maps.event.addListener(S,"dblclick",a)))},[a]),d.useEffect(()=>{S&&u&&(R!==null&&google.maps.event.removeListener(R),M(google.maps.event.addListener(S,"dragend",u)))},[u]),d.useEffect(()=>{S&&c&&(L!==null&&google.maps.event.removeListener(L),J(google.maps.event.addListener(S,"dragstart",c)))},[c]),d.useEffect(()=>{S&&h&&(re!==null&&google.maps.event.removeListener(re),ue(google.maps.event.addListener(S,"mousedown",h)))},[h]),d.useEffect(()=>{S&&p&&(te!==null&&google.maps.event.removeListener(te),U(google.maps.event.addListener(S,"mousemove",p)))},[p]),d.useEffect(()=>{S&&m&&(H!==null&&google.maps.event.removeListener(H),W(google.maps.event.addListener(S,"mouseout",m)))},[m]),d.useEffect(()=>{S&&w&&(Y!==null&&google.maps.event.removeListener(Y),ee(google.maps.event.addListener(S,"mouseover",w)))},[w]),d.useEffect(()=>{S&&y&&(G!==null&&google.maps.event.removeListener(G),fe(google.maps.event.addListener(S,"mouseup",y)))},[y]),d.useEffect(()=>{S&&P&&(F!==null&&google.maps.event.removeListener(F),xe(google.maps.event.addListener(S,"rightclick",P)))},[P]),d.useEffect(()=>{S&&k&&(ge!==null&&google.maps.event.removeListener(ge),ce(google.maps.event.addListener(S,"click",k)))},[k]),d.useEffect(()=>{S&&C&&(Be!==null&&google.maps.event.removeListener(Be),ie(google.maps.event.addListener(S,"drag",C)))},[C]),d.useEffect(()=>{S&&_&&(pe!==null&&google.maps.event.removeListener(pe),Pt(google.maps.event.addListener(S,"center_changed",_)))},[k]),d.useEffect(()=>{S&&I&&(Ft!==null&&google.maps.event.removeListener(Ft),On(google.maps.event.addListener(S,"radius_changed",I)))},[I]),d.useEffect(()=>{var Se=new google.maps.Circle(Ju(Ju({},e||d1),{},{map:O}));return typeof r=="number"&&Se.setRadius(r),typeof n<"u"&&Se.setCenter(n),typeof r=="number"&&Se.setRadius(r),typeof o<"u"&&Se.setVisible(o),typeof s<"u"&&Se.setEditable(s),typeof i<"u"&&Se.setDraggable(i),a&&b(google.maps.event.addListener(Se,"dblclick",a)),u&&M(google.maps.event.addListener(Se,"dragend",u)),c&&J(google.maps.event.addListener(Se,"dragstart",c)),h&&ue(google.maps.event.addListener(Se,"mousedown",h)),p&&U(google.maps.event.addListener(Se,"mousemove",p)),m&&W(google.maps.event.addListener(Se,"mouseout",m)),w&&ee(google.maps.event.addListener(Se,"mouseover",w)),y&&fe(google.maps.event.addListener(Se,"mouseup",y)),P&&xe(google.maps.event.addListener(Se,"rightclick",P)),k&&ce(google.maps.event.addListener(Se,"click",k)),C&&ie(google.maps.event.addListener(Se,"drag",C)),_&&Pt(google.maps.event.addListener(Se,"center_changed",_)),I&&On(google.maps.event.addListener(Se,"radius_changed",I)),x(Se),A&&A(Se),()=>{E!==null&&google.maps.event.removeListener(E),R!==null&&google.maps.event.removeListener(R),L!==null&&google.maps.event.removeListener(L),re!==null&&google.maps.event.removeListener(re),te!==null&&google.maps.event.removeListener(te),H!==null&&google.maps.event.removeListener(H),Y!==null&&google.maps.event.removeListener(Y),G!==null&&google.maps.event.removeListener(G),F!==null&&google.maps.event.removeListener(F),ge!==null&&google.maps.event.removeListener(ge),pe!==null&&google.maps.event.removeListener(pe),Ft!==null&&google.maps.event.removeListener(Ft),N&&N(Se),Se.setMap(null)}},[]),null}d.memo(f1);class p1 extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"state",{circle:null}),j(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(Ju(Ju({},this.props.options),{},{map:this.context}));this.registeredEvents=_e({updaterMap:Sy,eventMap:Cy,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:Sy,eventMap:Cy,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),we(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}j(p1,"contextType",he);function Ty(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ec(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ty(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ty(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Iy={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},Py={add(t,e){t.add(e)},addgeojson(t,e,n){t.addGeoJson(e,n)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,n,r){t.loadGeoJson(e,n,r)},overridestyle(t,e,n){t.overrideStyle(e,n)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function m1(t){var{options:e,onClick:n,onDblClick:r,onMouseDown:i,onMouseMove:s,onMouseOut:o,onMouseOver:a,onMouseUp:u,onRightClick:c,onAddFeature:h,onRemoveFeature:p,onRemoveProperty:m,onSetGeometry:w,onSetProperty:y,onLoad:P,onUnmount:k}=t,C=d.useContext(he),[_,I]=d.useState(null),[A,N]=d.useState(null),[O,S]=d.useState(null),[x,E]=d.useState(null),[b,R]=d.useState(null),[M,L]=d.useState(null),[J,re]=d.useState(null),[ue,te]=d.useState(null),[U,H]=d.useState(null),[W,Y]=d.useState(null),[ee,G]=d.useState(null),[fe,F]=d.useState(null),[xe,ge]=d.useState(null),[ce,Be]=d.useState(null);return d.useEffect(()=>{_!==null&&_.setMap(C)},[C]),d.useEffect(()=>{_&&r&&(A!==null&&google.maps.event.removeListener(A),N(google.maps.event.addListener(_,"dblclick",r)))},[r]),d.useEffect(()=>{_&&i&&(O!==null&&google.maps.event.removeListener(O),S(google.maps.event.addListener(_,"mousedown",i)))},[i]),d.useEffect(()=>{_&&s&&(x!==null&&google.maps.event.removeListener(x),E(google.maps.event.addListener(_,"mousemove",s)))},[s]),d.useEffect(()=>{_&&o&&(b!==null&&google.maps.event.removeListener(b),R(google.maps.event.addListener(_,"mouseout",o)))},[o]),d.useEffect(()=>{_&&a&&(M!==null&&google.maps.event.removeListener(M),L(google.maps.event.addListener(_,"mouseover",a)))},[a]),d.useEffect(()=>{_&&u&&(J!==null&&google.maps.event.removeListener(J),re(google.maps.event.addListener(_,"mouseup",u)))},[u]),d.useEffect(()=>{_&&c&&(ue!==null&&google.maps.event.removeListener(ue),te(google.maps.event.addListener(_,"rightclick",c)))},[c]),d.useEffect(()=>{_&&n&&(U!==null&&google.maps.event.removeListener(U),H(google.maps.event.addListener(_,"click",n)))},[n]),d.useEffect(()=>{_&&h&&(W!==null&&google.maps.event.removeListener(W),Y(google.maps.event.addListener(_,"addfeature",h)))},[h]),d.useEffect(()=>{_&&p&&(ee!==null&&google.maps.event.removeListener(ee),G(google.maps.event.addListener(_,"removefeature",p)))},[p]),d.useEffect(()=>{_&&m&&(fe!==null&&google.maps.event.removeListener(fe),F(google.maps.event.addListener(_,"removeproperty",m)))},[m]),d.useEffect(()=>{_&&w&&(xe!==null&&google.maps.event.removeListener(xe),ge(google.maps.event.addListener(_,"setgeometry",w)))},[w]),d.useEffect(()=>{_&&y&&(ce!==null&&google.maps.event.removeListener(ce),Be(google.maps.event.addListener(_,"setproperty",y)))},[y]),d.useEffect(()=>{if(C!==null){var ie=new google.maps.Data(ec(ec({},e),{},{map:C}));r&&N(google.maps.event.addListener(ie,"dblclick",r)),i&&S(google.maps.event.addListener(ie,"mousedown",i)),s&&E(google.maps.event.addListener(ie,"mousemove",s)),o&&R(google.maps.event.addListener(ie,"mouseout",o)),a&&L(google.maps.event.addListener(ie,"mouseover",a)),u&&re(google.maps.event.addListener(ie,"mouseup",u)),c&&te(google.maps.event.addListener(ie,"rightclick",c)),n&&H(google.maps.event.addListener(ie,"click",n)),h&&Y(google.maps.event.addListener(ie,"addfeature",h)),p&&G(google.maps.event.addListener(ie,"removefeature",p)),m&&F(google.maps.event.addListener(ie,"removeproperty",m)),w&&ge(google.maps.event.addListener(ie,"setgeometry",w)),y&&Be(google.maps.event.addListener(ie,"setproperty",y)),I(ie),P&&P(ie)}return()=>{_&&(A!==null&&google.maps.event.removeListener(A),O!==null&&google.maps.event.removeListener(O),x!==null&&google.maps.event.removeListener(x),b!==null&&google.maps.event.removeListener(b),M!==null&&google.maps.event.removeListener(M),J!==null&&google.maps.event.removeListener(J),ue!==null&&google.maps.event.removeListener(ue),U!==null&&google.maps.event.removeListener(U),W!==null&&google.maps.event.removeListener(W),ee!==null&&google.maps.event.removeListener(ee),fe!==null&&google.maps.event.removeListener(fe),xe!==null&&google.maps.event.removeListener(xe),ce!==null&&google.maps.event.removeListener(ce),k&&k(_),_.setMap(null))}},[]),null}d.memo(m1);class g1 extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"state",{data:null}),j(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(ec(ec({},this.props.options),{},{map:this.context}));this.registeredEvents=_e({updaterMap:Py,eventMap:Iy,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:Py,eventMap:Iy,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),we(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}j(g1,"contextType",he);function by(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ky(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?by(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):by(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ly={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},Ry={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class v1 extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"state",{kmlLayer:null}),j(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(ky(ky({},this.props.options),{},{map:this.context}));this.registeredEvents=_e({updaterMap:Ry,eventMap:Ly,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:Ry,eventMap:Ly,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),we(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}j(v1,"contextType",he);function rx(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function y1(t,e){return new e(t.lat,t.lng)}function _1(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function w1(t,e,n){return t instanceof e?t:n(t,e)}function E1(t,e,n){return t instanceof e?t:n(t,e)}function x1(t,e,n){var r=t&&t.fromLatLngToDivPixel(n.getNorthEast()),i=t&&t.fromLatLngToDivPixel(n.getSouthWest());return r&&i?{left:"".concat(i.x+e.x,"px"),top:"".concat(r.y+e.y,"px"),width:"".concat(r.x-i.x-e.x,"px"),height:"".concat(i.y-r.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function C1(t,e,n){var r=t&&t.fromLatLngToDivPixel(n);if(r){var{x:i,y:s}=r;return{left:"".concat(i+e.x,"px"),top:"".concat(s+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function ix(t,e,n,r){return n!==void 0?x1(t,e,E1(n,google.maps.LatLngBounds,_1)):C1(t,e,w1(r,google.maps.LatLng,y1))}function S1(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function Ay(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ay(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ay(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I1(t,e,n,r,i){class s extends google.maps.OverlayView{constructor(a,u,c,h){super(),this.container=a,this.pane=u,this.position=c,this.bounds=h}onAdd(){var a,u=(a=this.getPanes())===null||a===void 0?void 0:a[this.pane];u==null||u.appendChild(this.container)}draw(){var a=this.getProjection(),u=T1({},this.container?rx(this.container,i):{x:0,y:0}),c=ix(a,u,this.bounds,this.position);for(var[h,p]of Object.entries(c))this.container.style[h]=p}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new s(t,e,n,r)}function Ny(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function P1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ny(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ny(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function My(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function Oy(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function b1(t){var{position:e,bounds:n,mapPaneName:r,zIndex:i,onLoad:s,onUnmount:o,getPixelPositionOffset:a,children:u}=t,c=d.useContext(he),h=d.useMemo(()=>{var m=document.createElement("div");return m.style.position="absolute",m},[]),p=d.useMemo(()=>I1(h,r,e,n,a),[h,r,e,n]);return d.useEffect(()=>(s==null||s(p),p==null||p.setMap(c),()=>{o==null||o(p),p==null||p.setMap(null)}),[c,p]),d.useEffect(()=>{h.style.zIndex="".concat(i)},[i,h]),Bi.createPortal(u,h)}d.memo(b1);class Xs extends d.PureComponent{constructor(e){super(e),j(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),j(this,"updatePane",()=>{var r=this.props.mapPaneName,i=this.overlayView.getPanes();tt(!!r,"OverlayView requires props.mapPaneName but got %s",r),i?this.setState({paneEl:i[r]}):this.setState({paneEl:null})}),j(this,"onAdd",()=>{var r,i;this.updatePane(),(r=(i=this.props).onLoad)===null||r===void 0||r.call(i,this.overlayView)}),j(this,"onPositionElement",()=>{var r=this.overlayView.getProjection(),i=P1({x:0,y:0},this.containerRef.current?rx(this.containerRef.current,this.props.getPixelPositionOffset):{}),s=ix(r,i,this.props.bounds,this.props.position);if(!S1(s,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var o,a,u,c;this.setState({containerStyle:{top:(o=s.top)!==null&&o!==void 0?o:0,left:(a=s.left)!==null&&a!==void 0?a:0,width:(u=s.width)!==null&&u!==void 0?u:0,height:(c=s.height)!==null&&c!==void 0?c:0,position:"absolute"}})}}),j(this,"draw",()=>{this.onPositionElement()}),j(this,"onRemove",()=>{var r,i;this.setState(()=>({paneEl:null})),(r=(i=this.props).onUnmount)===null||r===void 0||r.call(i,this.overlayView)}),this.containerRef=d.createRef();var n=new google.maps.OverlayView;n.onAdd=this.onAdd,n.draw=this.draw,n.onRemove=this.onRemove,this.overlayView=n}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var n=My(e.position),r=My(this.props.position),i=Oy(e.bounds),s=Oy(this.props.bounds);(n!==r||i!==s)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?Bi.createPortal(v.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:d.Children.only(this.props.children)}),e):null}}j(Xs,"FLOAT_PANE","floatPane");j(Xs,"MAP_PANE","mapPane");j(Xs,"MARKER_LAYER","markerLayer");j(Xs,"OVERLAY_LAYER","overlayLayer");j(Xs,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");j(Xs,"contextType",he);function k1(){}function Dy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dy(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var jy={onDblClick:"dblclick",onClick:"click"},Uy={opacity(t,e){t.setOpacity(e)}};function L1(t){var{url:e,bounds:n,options:r,visible:i}=t,s=d.useContext(he),o=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east)),a=d.useMemo(()=>new google.maps.GroundOverlay(e,o,r),[]);return d.useEffect(()=>{a!==null&&a.setMap(s)},[s]),d.useEffect(()=>{typeof e<"u"&&a!==null&&(a.set("url",e),a.setMap(s))},[a,e]),d.useEffect(()=>{typeof i<"u"&&a!==null&&a.setOpacity(i?1:0)},[a,i]),d.useEffect(()=>{var u=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east));typeof n<"u"&&a!==null&&(a.set("bounds",u),a.setMap(s))},[a,n]),null}d.memo(L1);class sx extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"state",{groundOverlay:null}),j(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){tt(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,Vy(Vy({},this.props.options),{},{map:this.context}));this.registeredEvents=_e({updaterMap:Uy,eventMap:jy,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:Uy,eventMap:jy,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}j(sx,"defaultProps",{onLoad:k1});j(sx,"contextType",he);function Fy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fy(Object(n),!0).forEach(function(r){j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var zy={},By={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function R1(t){var{data:e,onLoad:n,onUnmount:r,options:i}=t,s=d.useContext(he),[o,a]=d.useState(null);return d.useEffect(()=>{google.maps.visualization||tt(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),d.useEffect(()=>{tt(!!e,"data property is required in HeatmapLayer %s",e)},[e]),d.useEffect(()=>{o!==null&&o.setMap(s)},[s]),d.useEffect(()=>{i&&o!==null&&o.setOptions(i)},[o,i]),d.useEffect(()=>{var u=new google.maps.visualization.HeatmapLayer(tc(tc({},i),{},{data:e,map:s}));return a(u),n&&n(u),()=>{o!==null&&(r&&r(o),o.setMap(null))}},[]),null}d.memo(R1);class A1 extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"state",{heatmapLayer:null}),j(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){tt(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),tt(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(tc(tc({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=_e({updaterMap:By,eventMap:zy,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){we(this.registeredEvents),this.registeredEvents=_e({updaterMap:By,eventMap:zy,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),we(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}j(A1,"contextType",he);var $y={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},Hy={register(t,e,n){t.registerPanoProvider(e,n)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class N1 extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"state",{streetViewPanorama:null}),j(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,n,r=(e=(n=this.context)===null||n===void 0?void 0:n.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=_e({updaterMap:Hy,eventMap:$y,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({streetViewPanorama:r}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:Hy,eventMap:$y,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),we(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}j(N1,"contextType",he);class M1 extends d.PureComponent{constructor(){super(...arguments),j(this,"state",{streetViewService:null}),j(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}j(M1,"contextType",he);var Wy={onDirectionsChanged:"directions_changed"},qy={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class O1 extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"state",{directionsRenderer:null}),j(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=_e({updaterMap:qy,eventMap:Wy,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:qy,eventMap:Wy,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),we(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}j(O1,"contextType",he);var Gy={onPlacesChanged:"places_changed"},Ky={bounds(t,e){t.setBounds(e)}};class D1 extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"containerElement",d.createRef()),j(this,"state",{searchBox:null}),j(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(tt(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var n=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=_e({updaterMap:Ky,eventMap:Gy,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{searchBox:n}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(we(this.registeredEvents),this.registeredEvents=_e({updaterMap:Ky,eventMap:Gy,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),we(this.registeredEvents))}render(){return v.jsx("div",{ref:this.containerElement,children:d.Children.only(this.props.children)})}}j(D1,"contextType",he);var Qy={onPlaceChanged:"place_changed"},Zy={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class ox extends d.PureComponent{constructor(){super(...arguments),j(this,"registeredEvents",[]),j(this,"containerElement",d.createRef()),j(this,"state",{autocomplete:null}),j(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;tt(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var n=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(n){var r=new google.maps.places.Autocomplete(n,this.props.options);this.registeredEvents=_e({updaterMap:Zy,eventMap:Qy,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({autocomplete:r}),this.setAutocompleteCallback)}}componentDidUpdate(e){we(this.registeredEvents),this.registeredEvents=_e({updaterMap:Zy,eventMap:Qy,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&we(this.registeredEvents)}render(){return v.jsx("div",{ref:this.containerElement,className:this.props.className,children:d.Children.only(this.props.children)})}}j(ox,"defaultProps",{className:""});j(ox,"contextType",he);function V1({children:t}){return v.jsx(YE,{googleMapsApiKey:"AIzaSyAi7_ddacsDqn_MpvepKbbJwPqKD4FwGJ4",libraries:["places"],children:t})}const j1="modulepreload",U1=function(t){return"/"+t},Yy={},F1=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=U1(s),s in Yy)return;Yy[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const p=i[h];if(p.href===s&&(!o||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":j1,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,p)=>{c.addEventListener("load",h),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var jp={};Object.defineProperty(jp,"__esModule",{value:!0});jp.parse=G1;jp.serialize=K1;const z1=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,B1=/^[\u0021-\u003A\u003C-\u007E]*$/,$1=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,H1=/^[\u0020-\u003A\u003D-\u007E]*$/,W1=Object.prototype.toString,q1=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function G1(t,e){const n=new q1,r=t.length;if(r<2)return n;const i=(e==null?void 0:e.decode)||Q1;let s=0;do{const o=t.indexOf("=",s);if(o===-1)break;const a=t.indexOf(";",s),u=a===-1?r:a;if(o>u){s=t.lastIndexOf(";",o-1)+1;continue}const c=Xy(t,s,o),h=Jy(t,o,c),p=t.slice(c,h);if(n[p]===void 0){let m=Xy(t,o+1,u),w=Jy(t,u,m);const y=i(t.slice(m,w));n[p]=y}s=u+1}while(s<r);return n}function Xy(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function Jy(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function K1(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!z1.test(t))throw new TypeError(`argument name is invalid: ${t}`);const i=r(e);if(!B1.test(i))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+i;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!$1.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!H1.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!Z1(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function Q1(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function Z1(t){return W1.call(t)==="[object Date]"}var e_="popstate";function Y1(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return df("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:La(i)}return J1(e,n,null,t)}function Ue(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function X1(){return Math.random().toString(36).substring(2,10)}function t_(t,e){return{usr:t.state,key:t.key,idx:e}}function df(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Js(e):e,state:n,key:e&&e.key||r||X1()}}function La({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Js(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function J1(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function p(){a="POP";let k=h(),C=k==null?null:k-c;c=k,u&&u({action:a,location:P.location,delta:C})}function m(k,C){a="PUSH";let _=df(P.location,k,C);n&&n(_,k),c=h()+1;let I=t_(_,c),A=P.createHref(_);try{o.pushState(I,"",A)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(A)}s&&u&&u({action:a,location:P.location,delta:1})}function w(k,C){a="REPLACE";let _=df(P.location,k,C);n&&n(_,k),c=h();let I=t_(_,c),A=P.createHref(_);o.replaceState(I,"",A),s&&u&&u({action:a,location:P.location,delta:0})}function y(k){let C=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof k=="string"?k:La(k);return _=_.replace(/ $/,"%20"),Ue(C,`No window.location.(origin|href) available to create URL for href: ${_}`),new URL(_,C)}let P={get action(){return a},get location(){return t(i,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(e_,p),u=k,()=>{i.removeEventListener(e_,p),u=null}},createHref(k){return e(i,k)},createURL:y,encodeLocation(k){let C=y(k);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:m,replace:w,go(k){return o.go(k)}};return P}function ax(t,e,n="/"){return ek(t,e,n,!1)}function ek(t,e,n,r){let i=typeof e=="string"?Js(e):e,s=er(i.pathname||"/",n);if(s==null)return null;let o=lx(t);tk(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=dk(s);a=ck(o[u],c,r)}return a}function lx(t,e=[],n=[],r=""){let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ue(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let c=Gn([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(Ue(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),lx(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:lk(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of ux(s.path))i(s,o,u)}),e}function ux(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ux(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function tk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:uk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var nk=/^:[\w-]+$/,rk=3,ik=2,sk=1,ok=10,ak=-2,n_=t=>t==="*";function lk(t,e){let n=t.split("/"),r=n.length;return n.some(n_)&&(r+=ak),e&&(r+=ik),n.filter(i=>!n_(i)).reduce((i,s)=>i+(nk.test(s)?rk:s===""?sk:ok),r)}function uk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ck(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=nc({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=nc({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Gn([s,p.pathname]),pathnameBase:gk(Gn([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=Gn([s,p.pathnameBase]))}return o}function nc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=hk(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:p},m)=>{if(h==="*"){let y=a[m]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const w=a[m];return p&&!w?c[h]=void 0:c[h]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function hk(t,e=!1,n=!0){Rn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function dk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function er(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function fk(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Js(t):t;return{pathname:n?n.startsWith("/")?n:pk(n,e):e,search:vk(r),hash:yk(i)}}function pk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function nd(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cx(t){let e=mk(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function hx(t,e,n,r=!1){let i;typeof t=="string"?i=Js(t):(i={...t},Ue(!i.pathname||!i.pathname.includes("?"),nd("?","pathname","search",i)),Ue(!i.pathname||!i.pathname.includes("#"),nd("#","pathname","hash",i)),Ue(!i.search||!i.search.includes("#"),nd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}a=p>=0?e[p]:"/"}let u=fk(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var Gn=t=>t.join("/").replace(/\/\/+/g,"/"),gk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),vk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _k(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var dx=["POST","PUT","PATCH","DELETE"];new Set(dx);var wk=["GET",...dx];new Set(wk);var eo=d.createContext(null);eo.displayName="DataRouter";var jc=d.createContext(null);jc.displayName="DataRouterState";var fx=d.createContext({isTransitioning:!1});fx.displayName="ViewTransition";var Ek=d.createContext(new Map);Ek.displayName="Fetchers";var xk=d.createContext(null);xk.displayName="Await";var Nn=d.createContext(null);Nn.displayName="Navigation";var Qa=d.createContext(null);Qa.displayName="Location";var lr=d.createContext({outlet:null,matches:[],isDataRoute:!1});lr.displayName="Route";var Up=d.createContext(null);Up.displayName="RouteError";function Ck(t,{relative:e}={}){Ue(Za(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=d.useContext(Nn),{hash:i,pathname:s,search:o}=Ya(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Gn([n,s])),r.createHref({pathname:a,search:o,hash:i})}function Za(){return d.useContext(Qa)!=null}function ii(){return Ue(Za(),"useLocation() may be used only in the context of a <Router> component."),d.useContext(Qa).location}var px="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mx(t){d.useContext(Nn).static||d.useLayoutEffect(t)}function Mn(){let{isDataRoute:t}=d.useContext(lr);return t?Dk():Sk()}function Sk(){Ue(Za(),"useNavigate() may be used only in the context of a <Router> component.");let t=d.useContext(eo),{basename:e,navigator:n}=d.useContext(Nn),{matches:r}=d.useContext(lr),{pathname:i}=ii(),s=JSON.stringify(cx(r)),o=d.useRef(!1);return mx(()=>{o.current=!0}),d.useCallback((u,c={})=>{if(Rn(o.current,px),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=hx(u,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Gn([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,i,t])}d.createContext(null);function Ya(t,{relative:e}={}){let{matches:n}=d.useContext(lr),{pathname:r}=ii(),i=JSON.stringify(cx(n));return d.useMemo(()=>hx(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Tk(t,e){return gx(t,e)}function gx(t,e,n,r){var _;Ue(Za(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=d.useContext(Nn),{matches:o}=d.useContext(lr),a=o[o.length-1],u=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",p=a&&a.route;{let I=p&&p.path||"";vx(c,!p||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let m=ii(),w;if(e){let I=typeof e=="string"?Js(e):e;Ue(h==="/"||((_=I.pathname)==null?void 0:_.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${I.pathname}" was given in the \`location\` prop.`),w=I}else w=m;let y=w.pathname||"/",P=y;if(h!=="/"){let I=h.replace(/^\//,"").split("/");P="/"+y.replace(/^\//,"").split("/").slice(I.length).join("/")}let k=!s&&n&&n.matches&&n.matches.length>0?n.matches:ax(t,{pathname:P});Rn(p||k!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Rn(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=Lk(k&&k.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:Gn([h,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?h:Gn([h,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),o,n,r);return e&&C?d.createElement(Qa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},C):C}function Ik(){let t=Ok(),e=_k(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=d.createElement(d.Fragment,null,d.createElement("p",null,"💿 Hey developer 👋"),d.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",d.createElement("code",{style:s},"ErrorBoundary")," or"," ",d.createElement("code",{style:s},"errorElement")," prop on your route.")),d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},e),n?d.createElement("pre",{style:i},n):null,o)}var Pk=d.createElement(Ik,null),bk=class extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?d.createElement(lr.Provider,{value:this.props.routeContext},d.createElement(Up.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function kk({routeContext:t,match:e,children:n}){let r=d.useContext(eo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),d.createElement(lr.Provider,{value:t},n)}function Lk(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Ue(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let c=i[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=u),c.route.id){let{loaderData:h,errors:p}=n,m=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!p||p[c.route.id]===void 0);if(c.route.lazy||m){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,c,h)=>{let p,m=!1,w=null,y=null;n&&(p=s&&c.route.id?s[c.route.id]:void 0,w=c.route.errorElement||Pk,o&&(a<0&&h===0?(vx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,y=null):a===h&&(m=!0,y=c.route.hydrateFallbackElement||null)));let P=e.concat(i.slice(0,h+1)),k=()=>{let C;return p?C=w:m?C=y:c.route.Component?C=d.createElement(c.route.Component,null):c.route.element?C=c.route.element:C=u,d.createElement(kk,{match:c,routeContext:{outlet:u,matches:P,isDataRoute:n!=null},children:C})};return n&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?d.createElement(bk,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:k(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):k()},null)}function Fp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rk(t){let e=d.useContext(eo);return Ue(e,Fp(t)),e}function Ak(t){let e=d.useContext(jc);return Ue(e,Fp(t)),e}function Nk(t){let e=d.useContext(lr);return Ue(e,Fp(t)),e}function zp(t){let e=Nk(t),n=e.matches[e.matches.length-1];return Ue(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Mk(){return zp("useRouteId")}function Ok(){var r;let t=d.useContext(Up),e=Ak("useRouteError"),n=zp("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Dk(){let{router:t}=Rk("useNavigate"),e=zp("useNavigate"),n=d.useRef(!1);return mx(()=>{n.current=!0}),d.useCallback(async(i,s={})=>{Rn(n.current,px),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var r_={};function vx(t,e,n){!e&&!r_[t]&&(r_[t]=!0,Rn(!1,n))}d.memo(Vk);function Vk({routes:t,future:e,state:n}){return gx(t,void 0,n,e)}function cn(t){Ue(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jk({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Ue(!Za(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=d.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=Js(n));let{pathname:u="/",search:c="",hash:h="",state:p=null,key:m="default"}=n,w=d.useMemo(()=>{let y=er(u,o);return y==null?null:{location:{pathname:y,search:c,hash:h,state:p,key:m},navigationType:r}},[o,u,c,h,p,m,r]);return Rn(w!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:d.createElement(Nn.Provider,{value:a},d.createElement(Qa.Provider,{children:e,value:w}))}function Uk({children:t,location:e}){return Tk(ff(t),e)}function ff(t,e=[]){let n=[];return d.Children.forEach(t,(r,i)=>{if(!d.isValidElement(r))return;let s=[...e,i];if(r.type===d.Fragment){n.push.apply(n,ff(r.props.children,s));return}Ue(r.type===cn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ue(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ff(r.props.children,s)),n.push(o)}),n}var hu="get",du="application/x-www-form-urlencoded";function Uc(t){return t!=null&&typeof t.tagName=="string"}function Fk(t){return Uc(t)&&t.tagName.toLowerCase()==="button"}function zk(t){return Uc(t)&&t.tagName.toLowerCase()==="form"}function Bk(t){return Uc(t)&&t.tagName.toLowerCase()==="input"}function $k(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Hk(t,e){return t.button===0&&(!e||e==="_self")&&!$k(t)}var ql=null;function Wk(){if(ql===null)try{new FormData(document.createElement("form"),0),ql=!1}catch{ql=!0}return ql}var qk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rd(t){return t!=null&&!qk.has(t)?(Rn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${du}"`),null):t}function Gk(t,e){let n,r,i,s,o;if(zk(t)){let a=t.getAttribute("action");r=a?er(a,e):null,n=t.getAttribute("method")||hu,i=rd(t.getAttribute("enctype"))||du,s=new FormData(t)}else if(Fk(t)||Bk(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||a.getAttribute("action");if(r=u?er(u,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||hu,i=rd(t.getAttribute("formenctype"))||rd(a.getAttribute("enctype"))||du,s=new FormData(a,t),!Wk()){let{name:c,type:h,value:p}=t;if(h==="image"){let m=c?`${c}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else c&&s.append(c,p)}}else{if(Uc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hu,r=null,i=du,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function Bp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Kk(t,e){if(t.id in e)return e[t.id];try{let n=await F1(()=>import(t.module),[]);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qk(t){return t!=null&&typeof t.page=="string"}function Zk(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Yk(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await Kk(s,n);return o.links?o.links():[]}return[]}));return tL(r.flat(1).filter(Zk).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function i_(t,e,n,r,i,s){let o=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,a=(u,c)=>{var h;return n[c].pathname!==u.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,c)=>o(u,c)||a(u,c)):s==="data"?e.filter((u,c)=>{var p;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,c)||a(u,c))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Xk(t,e,{includeHydrateFallback:n}={}){return Jk(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Jk(t){return[...new Set(t)]}function eL(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function tL(t,e){let n=new Set,r=new Set(e);return t.reduce((i,s)=>{if(e&&!Qk(s)&&s.as==="script"&&s.href&&r.has(s.href))return i;let a=JSON.stringify(eL(s));return n.has(a)||(n.add(a),i.push({key:a,link:s})),i},[])}function nL(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&er(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function yx(){let t=d.useContext(eo);return Bp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function rL(){let t=d.useContext(jc);return Bp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var $p=d.createContext(void 0);$p.displayName="FrameworkContext";function _x(){let t=d.useContext($p);return Bp(t,"You must render this element inside a <HydratedRouter> element"),t}function iL(t,e){let n=d.useContext($p),[r,i]=d.useState(!1),[s,o]=d.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:p}=e,m=d.useRef(null);d.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let P=C=>{C.forEach(_=>{o(_.isIntersecting)})},k=new IntersectionObserver(P,{threshold:.5});return m.current&&k.observe(m.current),()=>{k.disconnect()}}},[t]),d.useEffect(()=>{if(r){let P=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(P)}}},[r]);let w=()=>{i(!0)},y=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:Uo(a,w),onBlur:Uo(u,y),onMouseEnter:Uo(c,w),onMouseLeave:Uo(h,y),onTouchStart:Uo(p,w)}]:[!1,m,{}]}function Uo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function sL({page:t,...e}){let{router:n}=yx(),r=d.useMemo(()=>ax(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?d.createElement(aL,{page:t,matches:r,...e}):null}function oL(t){let{manifest:e,routeModules:n}=_x(),[r,i]=d.useState([]);return d.useEffect(()=>{let s=!1;return Yk(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function aL({page:t,matches:e,...n}){let r=ii(),{manifest:i,routeModules:s}=_x(),{basename:o}=yx(),{loaderData:a,matches:u}=rL(),c=d.useMemo(()=>i_(t,e,u,i,r,"data"),[t,e,u,i,r]),h=d.useMemo(()=>i_(t,e,u,i,r,"assets"),[t,e,u,i,r]),p=d.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let y=new Set,P=!1;if(e.forEach(C=>{var I;let _=i.routes[C.route.id];!_||!_.hasLoader||(!c.some(A=>A.route.id===C.route.id)&&C.route.id in a&&((I=s[C.route.id])!=null&&I.shouldRevalidate)||_.hasClientLoader?P=!0:y.add(C.route.id))}),y.size===0)return[];let k=nL(t,o);return P&&y.size>0&&k.searchParams.set("_routes",e.filter(C=>y.has(C.route.id)).map(C=>C.route.id).join(",")),[k.pathname+k.search]},[o,a,r,i,c,e,t,s]),m=d.useMemo(()=>Xk(h,i),[h,i]),w=oL(h);return d.createElement(d.Fragment,null,p.map(y=>d.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),m.map(y=>d.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),w.map(({key:y,link:P})=>d.createElement("link",{key:y,...P})))}function lL(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var wx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wx&&(window.__reactRouterVersion="7.5.0")}catch{}function uL({basename:t,children:e,window:n}){let r=d.useRef();r.current==null&&(r.current=Y1({window:n,v5Compat:!0}));let i=r.current,[s,o]=d.useState({action:i.action,location:i.location}),a=d.useCallback(u=>{d.startTransition(()=>o(u))},[o]);return d.useLayoutEffect(()=>i.listen(a),[i,a]),d.createElement(jk,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var Ex=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nn=d.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:p,...m},w){let{basename:y}=d.useContext(Nn),P=typeof c=="string"&&Ex.test(c),k,C=!1;if(typeof c=="string"&&P&&(k=c,wx))try{let E=new URL(window.location.href),b=c.startsWith("//")?new URL(E.protocol+c):new URL(c),R=er(b.pathname,y);b.origin===E.origin&&R!=null?c=R+b.search+b.hash:C=!0}catch{Rn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=Ck(c,{relative:i}),[I,A,N]=iL(r,m),O=fL(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:i,viewTransition:p});function S(E){e&&e(E),E.defaultPrevented||O(E)}let x=d.createElement("a",{...m,...N,href:k||_,onClick:C||s?e:S,ref:lL(w,A),target:u,"data-discover":!P&&n==="render"?"true":void 0});return I&&!P?d.createElement(d.Fragment,null,x,d.createElement(sL,{page:_})):x});nn.displayName="Link";var cL=d.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...c},h){let p=Ya(o,{relative:c.relative}),m=ii(),w=d.useContext(jc),{navigator:y,basename:P}=d.useContext(Nn),k=w!=null&&yL(p)&&a===!0,C=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,_=m.pathname,I=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(_=_.toLowerCase(),I=I?I.toLowerCase():null,C=C.toLowerCase()),I&&P&&(I=er(I,P)||I);const A=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let N=_===C||!i&&_.startsWith(C)&&_.charAt(A)==="/",O=I!=null&&(I===C||!i&&I.startsWith(C)&&I.charAt(C.length)==="/"),S={isActive:N,isPending:O,isTransitioning:k},x=N?e:void 0,E;typeof r=="function"?E=r(S):E=[r,N?"active":null,O?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let b=typeof s=="function"?s(S):s;return d.createElement(nn,{...c,"aria-current":x,className:E,ref:h,style:b,to:o,viewTransition:a},typeof u=="function"?u(S):u)});cL.displayName="NavLink";var hL=d.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=hu,action:a,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:p,...m},w)=>{let y=gL(),P=vL(a,{relative:c}),k=o.toLowerCase()==="get"?"get":"post",C=typeof a=="string"&&Ex.test(a),_=I=>{if(u&&u(I),I.defaultPrevented)return;I.preventDefault();let A=I.nativeEvent.submitter,N=(A==null?void 0:A.getAttribute("formmethod"))||o;y(A||I.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:i,state:s,relative:c,preventScrollReset:h,viewTransition:p})};return d.createElement("form",{ref:w,method:k,action:P,onSubmit:r?u:_,...m,"data-discover":!C&&t==="render"?"true":void 0})});hL.displayName="Form";function dL(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xx(t){let e=d.useContext(eo);return Ue(e,dL(t)),e}function fL(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=Mn(),u=ii(),c=Ya(t,{relative:s});return d.useCallback(h=>{if(Hk(h,e)){h.preventDefault();let p=n!==void 0?n:La(u)===La(c);a(t,{replace:p,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,c,n,r,e,t,i,s,o])}var pL=0,mL=()=>`__${String(++pL)}__`;function gL(){let{router:t}=xx("useSubmit"),{basename:e}=d.useContext(Nn),n=Mk();return d.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:c}=Gk(r,e);if(i.navigate===!1){let h=i.fetcherKey||mL();await t.fetch(h,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function vL(t,{relative:e}={}){let{basename:n}=d.useContext(Nn),r=d.useContext(lr);Ue(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Ya(t||".",{relative:e})},o=ii();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(h=>h==="")){a.delete("index"),u.filter(p=>p).forEach(p=>a.append("index",p));let h=a.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Gn([n,s.pathname])),La(s)}function yL(t,e={}){let n=d.useContext(fx);Ue(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=xx("useViewTransitionState"),i=Ya(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=er(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=er(n.nextLocation.pathname,r)||n.nextLocation.pathname;return nc(i.pathname,o)!=null||nc(i.pathname,s)!=null}new TextEncoder;function _L(){return d.useEffect(()=>{const t=new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&(o.target.classList.remove("opacity-0","translate-y-10"),o.target.classList.add("opacity-100","translate-y-0"),t.unobserve(o.target))})},{threshold:.2}),e=document.querySelector("#how-it-works");e&&t.observe(e);const n=document.querySelector("#about-help-a-hand");n&&t.observe(n);const r=document.querySelector("#why-join");r&&t.observe(r);const i=document.querySelector("#call-to-action");return i&&t.observe(i),()=>t.disconnect()},[]),v.jsxs("div",{className:"min-h-screen w-full flex flex-col",style:{backgroundColor:"#fffcf5"},children:[v.jsx("header",{className:"bg-white shadow-md w-full",children:v.jsxs("div",{className:"px-10 py-5 flex justify-between items-center w-full",children:[v.jsx("h1",{className:"text-4xl font-bold text-[#70d299]",children:"Help a Hand"}),v.jsxs("nav",{className:"space-x-8",children:[v.jsx(nn,{to:"/login",className:"text-[#70d299] font-semibold hover:text-white hover:bg-[#70d299] px-5 py-3 rounded transition",children:"Login"}),v.jsx(nn,{to:"/register",className:"text-[#70d299] font-semibold hover:text-white hover:bg-[#70d299] px-5 py-3 rounded transition",children:"Înregistrare"})]})]})}),v.jsxs("main",{className:"flex-1 flex flex-col md:flex-row items-center justify-between px-10 py-20 max-w-6xl mx-auto gap-16 ",children:[v.jsxs("div",{className:"md:w-1/2 text-center md:text-center",children:[v.jsx("h2",{className:"text-6xl font-extrabold text-gray-900 mb-8",children:"Help a Hand"}),v.jsx("p",{className:"text-xl text-gray-600 mb-12 max-w-xl",children:"Fiecare mână întinsă contează. Ajută persoanele din comunitatea ta și fă o diferență reală în viața lor!"}),v.jsx(nn,{to:"/register",className:"inline-block px-10 py-5 bg-[#70d299] text-white text-xl font-semibold rounded-lg hover:bg-[#429b7f] transition",children:"Începe acum"})]}),v.jsx("div",{className:"md:w-1/2 flex justify-center",children:v.jsx("img",{src:"/public/images/hero_image.jpeg",alt:"Voluntar ajutând o persoană",className:"w-full max-w-xxl rounded-lg"})})]}),v.jsx("section",{className:"bg-[#70d299] py-20 px-10",children:v.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[v.jsx("h3",{className:"text-4xl font-semibold text-white mb-12",children:"Ce este Help a Hand?"}),v.jsx("p",{id:"about-help-a-hand",className:"text-xl text-white mb-12 opacity-0 translate-y-10 transition-all duration-700 ease-out",children:"Help a Hand este o aplicație care ajută la conectarea voluntarilor cu persoanele care au nevoie de ajutor. Indiferent dacă ești o persoană în vârstă sau ai o dizabilitate, vei putea solicita ajutor pentru diverse activități zilnice. De asemenea, ca voluntar, poți contribui la îmbunătățirea vieților celor din jurul tău."})]})}),v.jsx("section",{id:"how-it-works",className:"bg-white py-20 px-10 transition-all duration-700 ease-out opacity-0 translate-y-10",style:{backgroundColor:"#fffcf5"},children:v.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[v.jsx("h3",{className:"text-4xl font-semibold text-gray-900 mb-12",children:"Cum funcționează aplicația?"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-16",children:[v.jsxs("div",{className:"text-left",children:[v.jsx("h4",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"Pentru Voluntari"}),v.jsx("p",{className:"text-lg text-gray-700 mb-6",children:"Voluntarii pot alege activitățile în care doresc să ajute, iar cererile sunt distribuite pe baza locației și disponibilității. Vei putea să:"}),v.jsxs("ul",{className:"list-disc pl-8 text-gray-700 mb-6",children:[v.jsx("li",{children:"Vizualizezi cereri pentru ajutor, cum ar fi plimbatul câinelui sau cumpărături."}),v.jsx("li",{children:"Îți alegi activitățile preferate și îți setezi propriul program."}),v.jsx("li",{children:"Oferi ajutor pe termen scurt sau lung, în funcție de preferințele tale."})]}),v.jsx("p",{className:"text-gray-700",children:"Poți să-ți îmbogățești viața ajutând alți oameni și să simți satisfacția de a face o diferență în comunitatea ta."})]}),v.jsxs("div",{className:"text-left",children:[v.jsx("h4",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"Pentru Beneficiari"}),v.jsx("p",{className:"text-lg text-gray-700 mb-6",children:"Dacă ai nevoie de ajutor, aplicația îți permite să postezi cereri pentru activități zilnice, care vor fi preluate de voluntari. Acestea pot include:"}),v.jsxs("ul",{className:"list-disc pl-8 text-gray-700 mb-6",children:[v.jsx("li",{children:"Plimbarea câinelui, în special dacă ai dificultăți de mobilitate."}),v.jsx("li",{children:"Cumpărături de produse esențiale."}),v.jsx("li",{children:"Ridicarea corespondenței sau a coletelelor de la poștă."}),v.jsx("li",{children:"Ajutor cu plimbările și activitățile recreative pentru a îmbunătăți starea de bine."})]}),v.jsx("p",{className:"text-gray-700",children:"Fiecare cerere este tratată cu grijă și profesionalism. Voluntarii sunt verificați pentru siguranța ta, iar ajutorul este oferit cu respect și empatie."})]})]})]})}),v.jsx("section",{id:"why-join",className:"bg-gray-50 py-20 px-10 opacity-0 translate-y-10 transition-all duration-700 ease-out",style:{backgroundColor:"#e8e2d4"},children:v.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[v.jsx("h3",{className:"text-4xl font-semibold text-gray-900 mb-12",children:"De ce să te alături?"}),v.jsxs("div",{className:"grid md:grid-cols-2 gap-16",children:[v.jsxs("div",{className:"text-left",children:[v.jsx("h4",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"Beneficii pentru Voluntari"}),v.jsxs("ul",{className:"list-disc pl-8 text-gray-700",children:[v.jsx("li",{children:"Fă o diferență reală în viața oamenilor din comunitatea ta."}),v.jsx("li",{children:"Ajută-ți aproapele și simte satisfacția de a contribui."}),v.jsx("li",{children:"Obține experiență în lucrul cu persoanele în vârstă sau cu dizabilități."}),v.jsx("li",{children:"Fii parte dintr-o rețea de oameni care doresc să schimbe în bine lumea din jurul lor."})]})]}),v.jsxs("div",{className:"text-left",children:[v.jsx("h4",{className:"text-3xl font-semibold text-gray-800 mb-6",children:"Beneficii pentru Beneficiari"}),v.jsxs("ul",{className:"list-disc pl-8 text-gray-700",children:[v.jsx("li",{children:"Acces rapid la ajutorul necesar pentru activitățile zilnice."}),v.jsx("li",{children:"Voluntari dedicați care te ajută cu grijă și respect."}),v.jsx("li",{children:"Siguranță și încredere, datorită verificării voluntarilor."}),v.jsx("li",{children:"Mai multă independență și posibilitatea de a te bucura de activități în aer liber sau de alte ajutoare esențiale."})]})]})]})]})}),v.jsxs("section",{id:"call-to-action",className:"bg-[#70d299] text-white py-20 text-center opacity-0 translate-y-10 transition-all duration-700 ease-out",children:[v.jsx("h3",{className:"text-4xl font-semibold mb-8",children:"Fii un voluntar sau găsește ajutor acum!"}),v.jsx(nn,{to:"/register",className:"inline-block px-10 py-5 bg-white text-[#70d299] text-lg font-semibold rounded-lg hover:bg-gray-200 transition",children:"Înregistrează-te acum"})]}),v.jsx("footer",{className:"bg-white text-center py-6 shadow-inner w-full",children:v.jsx("p",{className:"text-sm text-gray-500",children:"© 2025 LTCode. All rights reserved."})})]})}const wL=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},EL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Sx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,w=c&63;u||(w=64,o||(m=64)),r.push(n[h],n[p],n[m],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Cx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):EL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||p==null)throw new xL;const m=s<<2|a>>4;if(r.push(m),c!==64){const w=a<<4&240|c>>2;if(r.push(w),p!==64){const y=c<<6&192|p;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CL=function(t){const e=Cx(t);return Sx.encodeByteArray(e,!0)},rc=function(t){return CL(t).replace(/\./g,"")},Tx=function(t){try{return Sx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=()=>SL().__FIREBASE_DEFAULTS__,IL=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tx(t[1]);return e&&JSON.parse(e)},Fc=()=>{try{return wL()||TL()||IL()||PL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ix=t=>{var e,n;return(n=(e=Fc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bL=t=>{const e=Ix(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Px=()=>{var t;return(t=Fc())===null||t===void 0?void 0:t.config},bx=t=>{var e;return(e=Fc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[rc(JSON.stringify(n)),rc(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function AL(){var t;const e=(t=Fc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ML(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DL(){const t=It();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function VL(){return!AL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jL(){try{return typeof indexedDB=="object"}catch{return!1}}function UL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="FirebaseError";class ur extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=FL,Object.setPrototypeOf(this,ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}}class Xa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?zL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ur(i,a,r)}}function zL(t,e){return t.replace(BL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const BL=/\{\$([^}]+)}/g;function $L(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(s_(s)&&s_(o)){if(!Mi(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function s_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function qo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function HL(t,e){const n=new WL(t,e);return n.subscribe.bind(n)}class WL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=id),i.error===void 0&&(i.error=id),i.complete===void 0&&(i.complete=id);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function id(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){return t&&t._delegate?t._delegate:t}class Oi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QL(e))try{this.getOrInitializeService({instanceIdentifier:Ei})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ei){return this.instances.has(e)}getOptions(e=Ei){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ei){return this.component?this.component.multipleInstances?e:Ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KL(t){return t===Ei?void 0:t}function QL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const YL={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},XL=ve.INFO,JL={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},eR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=JL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hp{constructor(e){this.name=e,this._logLevel=XL,this._logHandler=eR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const tR=(t,e)=>e.some(n=>t instanceof n);let o_,a_;function nR(){return o_||(o_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rR(){return a_||(a_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kx=new WeakMap,pf=new WeakMap,Lx=new WeakMap,sd=new WeakMap,Wp=new WeakMap;function iR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(zr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kx.set(n,t)}).catch(()=>{}),Wp.set(e,t),e}function sR(t){if(pf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});pf.set(t,e)}let mf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Lx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oR(t){mf=t(mf)}function aR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(od(this),e,...n);return Lx.set(r,e.sort?e.sort():[e]),zr(r)}:rR().includes(t)?function(...e){return t.apply(od(this),e),zr(kx.get(this))}:function(...e){return zr(t.apply(od(this),e))}}function lR(t){return typeof t=="function"?aR(t):(t instanceof IDBTransaction&&sR(t),tR(t,nR())?new Proxy(t,mf):t)}function zr(t){if(t instanceof IDBRequest)return iR(t);if(sd.has(t))return sd.get(t);const e=lR(t);return e!==t&&(sd.set(t,e),Wp.set(e,t)),e}const od=t=>Wp.get(t);function uR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=zr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(zr(o.result),u.oldVersion,u.newVersion,zr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const cR=["get","getKey","getAll","getAllKeys","count"],hR=["put","add","delete","clear"],ad=new Map;function l_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ad.get(e))return ad.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=hR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cR.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return ad.set(e,s),s}oR(t=>({...t,get:(e,n,r)=>l_(e,n)||t.get(e,n,r),has:(e,n)=>!!l_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gf="@firebase/app",u_="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new Hp("@firebase/app"),pR="@firebase/app-compat",mR="@firebase/analytics-compat",gR="@firebase/analytics",vR="@firebase/app-check-compat",yR="@firebase/app-check",_R="@firebase/auth",wR="@firebase/auth-compat",ER="@firebase/database",xR="@firebase/data-connect",CR="@firebase/database-compat",SR="@firebase/functions",TR="@firebase/functions-compat",IR="@firebase/installations",PR="@firebase/installations-compat",bR="@firebase/messaging",kR="@firebase/messaging-compat",LR="@firebase/performance",RR="@firebase/performance-compat",AR="@firebase/remote-config",NR="@firebase/remote-config-compat",MR="@firebase/storage",OR="@firebase/storage-compat",DR="@firebase/firestore",VR="@firebase/vertexai",jR="@firebase/firestore-compat",UR="firebase",FR="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="[DEFAULT]",zR={[gf]:"fire-core",[pR]:"fire-core-compat",[gR]:"fire-analytics",[mR]:"fire-analytics-compat",[yR]:"fire-app-check",[vR]:"fire-app-check-compat",[_R]:"fire-auth",[wR]:"fire-auth-compat",[ER]:"fire-rtdb",[xR]:"fire-data-connect",[CR]:"fire-rtdb-compat",[SR]:"fire-fn",[TR]:"fire-fn-compat",[IR]:"fire-iid",[PR]:"fire-iid-compat",[bR]:"fire-fcm",[kR]:"fire-fcm-compat",[LR]:"fire-perf",[RR]:"fire-perf-compat",[AR]:"fire-rc",[NR]:"fire-rc-compat",[MR]:"fire-gcs",[OR]:"fire-gcs-compat",[DR]:"fire-fst",[jR]:"fire-fst-compat",[VR]:"fire-vertex","fire-js":"fire-js",[UR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new Map,BR=new Map,yf=new Map;function c_(t,e){try{t.container.addComponent(e)}catch(n){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fs(t){const e=t.name;if(yf.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;yf.set(e,t);for(const n of ic.values())c_(n,t);for(const n of BR.values())c_(n,t);return!0}function qp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new Xa("app","Firebase",$R);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=FR;function Rx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:vf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Br.create("bad-app-name",{appName:String(i)});if(n||(n=Px()),!n)throw Br.create("no-options");const s=ic.get(i);if(s){if(Mi(n,s.options)&&Mi(r,s.config))return s;throw Br.create("duplicate-app",{appName:i})}const o=new ZL(i);for(const u of yf.values())o.addComponent(u);const a=new HR(n,r,o);return ic.set(i,a),a}function Ax(t=vf){const e=ic.get(t);if(!e&&t===vf&&Px())return Rx();if(!e)throw Br.create("no-app",{appName:t});return e}function $r(t,e,n){var r;let i=(r=zR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(a.join(" "));return}Fs(new Oi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="firebase-heartbeat-database",qR=1,Ra="firebase-heartbeat-store";let ld=null;function Nx(){return ld||(ld=uR(WR,qR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ra)}catch(n){console.warn(n)}}}}).catch(t=>{throw Br.create("idb-open",{originalErrorMessage:t.message})})),ld}async function GR(t){try{const n=(await Nx()).transaction(Ra),r=await n.objectStore(Ra).get(Mx(t));return await n.done,r}catch(e){if(e instanceof ur)tr.warn(e.message);else{const n=Br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});tr.warn(n.message)}}}async function h_(t,e){try{const r=(await Nx()).transaction(Ra,"readwrite");await r.objectStore(Ra).put(e,Mx(t)),await r.done}catch(n){if(n instanceof ur)tr.warn(n.message);else{const r=Br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});tr.warn(r.message)}}}function Mx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=1024,QR=30;class ZR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new XR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=d_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>QR){const o=JR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){tr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=d_(),{heartbeatsToSend:r,unsentEntries:i}=YR(this._heartbeatsCache.heartbeats),s=rc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return tr.warn(n),""}}}function d_(){return new Date().toISOString().substring(0,10)}function YR(t,e=KR){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),f_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),f_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class XR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jL()?UL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return h_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return h_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function f_(t){return rc(JSON.stringify({version:2,heartbeats:t})).length}function JR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){Fs(new Oi("platform-logger",e=>new dR(e),"PRIVATE")),Fs(new Oi("heartbeat",e=>new ZR(e),"PRIVATE")),$r(gf,u_,t),$r(gf,u_,"esm2017"),$r("fire-js","")}eA("");function Gp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ox(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tA=Ox,Dx=new Xa("auth","Firebase",Ox());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new Hp("@firebase/auth");function nA(t,...e){sc.logLevel<=ve.WARN&&sc.warn(`Auth (${to}): ${t}`,...e)}function fu(t,...e){sc.logLevel<=ve.ERROR&&sc.error(`Auth (${to}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,...e){throw Kp(t,...e)}function Pn(t,...e){return Kp(t,...e)}function Vx(t,e,n){const r=Object.assign(Object.assign({},tA()),{[e]:n});return new Xa("auth","Firebase",r).create(e,{appName:t.name})}function Kn(t){return Vx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Dx.create(t,...e)}function se(t,e,...n){if(!t)throw Kp(e,...n)}function Hn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fu(e),new Error(e)}function nr(t,e){t||Hn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function rA(){return p_()==="http:"||p_()==="https:"}function p_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rA()||ML()||"connection"in navigator)?navigator.onLine:!0}function sA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this.shortDelay=e,this.longDelay=n,nr(n>e,"Short delay should be less than long delay!"),this.isMobile=RL()||OL()}get(){return iA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t,e){nr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lA=new el(3e4,6e4);function si(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function oi(t,e,n,r,i={}){return Ux(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ja(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return NL()||(c.referrerPolicy="no-referrer"),jx.fetch()(await Fx(t,t.config.apiHost,n,a),c)})}async function Ux(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},oA),e);try{const i=new cA(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Gl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Gl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Gl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Vx(t,h,c);yn(t,h)}}catch(i){if(i instanceof ur)throw i;yn(t,"network-request-failed",{message:String(i)})}}async function tl(t,e,n,r,i={}){const s=await oi(t,e,n,r,i);return"mfaPendingCredential"in s&&yn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Fx(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Qp(t.config,i):`${t.config.apiScheme}://${i}`;return aA.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function uA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pn(this.auth,"network-request-failed")),lA.get())})}}function Gl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pn(t,e,r);return i.customData._tokenResponse=n,i}function m_(t){return t!==void 0&&t.enterprise!==void 0}class hA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return uA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function dA(t,e){return oi(t,"GET","/v2/recaptchaConfig",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(t,e){return oi(t,"POST","/v1/accounts:delete",e)}async function oc(t,e){return oi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pA(t,e=!1){const n=nt(t),r=await n.getIdToken(e),i=Zp(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:aa(ud(i.auth_time)),issuedAtTime:aa(ud(i.iat)),expirationTime:aa(ud(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ud(t){return Number(t)*1e3}function Zp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return fu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Tx(n);return i?JSON.parse(i):(fu("Failed to decode base64 JWT payload"),null)}catch(i){return fu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function g_(t){const e=Zp(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ur&&mA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=aa(this.lastLoginAt),this.creationTime=aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Aa(t,oc(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?zx(s.providerUserInfo):[],a=yA(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=u?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function vA(t){const e=nt(t);await ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yA(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zx(t){return t.map(e=>{var{providerId:n}=e,r=Gp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(t,e){const n=await Ux(t,{},async()=>{const r=Ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await Fx(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",jx.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wA(t,e){return oi(t,"POST","/v2/accounts:revokeToken",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):g_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=g_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await _A(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ks;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ks,this.toJSON())}_performRefresh(){return Hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class pn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Gp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Aa(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pA(this,e)}reload(){return vA(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new pn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ac(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(Kn(this.auth));const e=await this.getIdToken();return await Aa(this,fA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(a=n.tenantId)!==null&&a!==void 0?a:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,C=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:A,isAnonymous:N,providerData:O,stsTokenManager:S}=n;se(I&&S,e,"internal-error");const x=ks.fromJSON(this.name,S);se(typeof I=="string",e,"internal-error"),_r(p,e.name),_r(m,e.name),se(typeof A=="boolean",e,"internal-error"),se(typeof N=="boolean",e,"internal-error"),_r(w,e.name),_r(y,e.name),_r(P,e.name),_r(k,e.name),_r(C,e.name),_r(_,e.name);const E=new pn({uid:I,auth:e,email:m,emailVerified:A,displayName:p,isAnonymous:N,photoURL:y,phoneNumber:w,tenantId:P,stsTokenManager:x,createdAt:C,lastLoginAt:_});return O&&Array.isArray(O)&&(E.providerData=O.map(b=>Object.assign({},b))),k&&(E._redirectEventId=k),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new ks;i.updateFromServerResponse(n);const s=new pn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ac(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?zx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ks;a.updateFromIdToken(r);const u=new pn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Map;function Wn(t){nr(t instanceof Function,"Expected a class definition");let e=v_.get(t);return e?(nr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,v_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Bx.type="NONE";const y_=Bx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ls{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=pu(this.userKey,i.apiKey,s),this.fullPersistenceKey=pu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await oc(this.auth,{idToken:e}).catch(()=>{});return n?pn._fromGetAccountInfoResponse(this.auth,n,e):null}return pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ls(Wn(y_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Wn(y_);const o=pu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let p;if(typeof h=="string"){const m=await oc(e,{idToken:h}).catch(()=>{});if(!m)break;p=await pn._fromGetAccountInfoResponse(e,m,h)}else p=pn._fromJSON(e,h);c!==s&&(a=p),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ls(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ls(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($x(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kx(e))return"Blackberry";if(Qx(e))return"Webos";if(Hx(e))return"Safari";if((e.includes("chrome/")||Wx(e))&&!e.includes("edge/"))return"Chrome";if(Gx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $x(t=It()){return/firefox\//i.test(t)}function Hx(t=It()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wx(t=It()){return/crios\//i.test(t)}function qx(t=It()){return/iemobile/i.test(t)}function Gx(t=It()){return/android/i.test(t)}function Kx(t=It()){return/blackberry/i.test(t)}function Qx(t=It()){return/webos/i.test(t)}function Yp(t=It()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function EA(t=It()){var e;return Yp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xA(){return DL()&&document.documentMode===10}function Zx(t=It()){return Yp(t)||Gx(t)||Qx(t)||Kx(t)||/windows phone/i.test(t)||qx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t,e=[]){let n;switch(t){case"Browser":n=__(It());break;case"Worker":n=`${__(It())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${to}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t,e={}){return oi(t,"GET","/v2/passwordPolicy",si(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=6;class IA{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:TA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new w_(this),this.idTokenSubscription=new w_(this),this.beforeStateQueue=new CA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Ls.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await oc(this,{idToken:e}),r=await pn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(en(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ac(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(Kn(this));const n=e?nt(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(Kn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(Kn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SA(this),n=new IA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await wA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wn(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Ls.create(this,[Wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&nA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $i(t){return nt(t)}class w_{constructor(e){this.auth=e,this.observer=null,this.addObserver=HL(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bA(t){zc=t}function Xx(t){return zc.loadJS(t)}function kA(){return zc.recaptchaEnterpriseScript}function LA(){return zc.gapiScript}function RA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class AA{constructor(){this.enterprise=new NA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class NA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const MA="recaptcha-enterprise",Jx="NO_RECAPTCHA";class OA{constructor(e){this.type=MA,this.auth=$i(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{dA(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new hA(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){const u=window.grecaptcha;m_(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Jx)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AA().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&m_(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=kA();u.length!==0&&(u+=a),Xx(u).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Fo(t,e,n,r=!1,i=!1){const s=new OA(t);let o;if(i)o=Jx;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ef(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Fo(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Fo(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Fo(t,e,n);return r(t,a).catch(async u=>{var c;if(((c=t._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await Fo(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)})}else{const a=await Fo(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t,e){const n=qp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Mi(s,e??{}))return i;yn(i,"already-initialized")}return n.initialize({options:e})}function VA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jA(t,e,n){const r=$i(t);se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=eC(e),{host:o,port:a}=UA(e),u=a===null?"":`:${a}`,c={url:`${s}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),se(Mi(c,r.config.emulator)&&Mi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,i||FA()}function eC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UA(t){const e=eC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:E_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:E_(o)}}}function E_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function FA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hn("not implemented")}_getIdTokenResponse(e){return Hn("not implemented")}_linkToIdToken(e,n){return Hn("not implemented")}_getReauthenticationResolver(e){return Hn("not implemented")}}async function zA(t,e){return oi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(t,e){return tl(t,"POST","/v1/accounts:signInWithPassword",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(t,e){return tl(t,"POST","/v1/accounts:signInWithEmailLink",si(t,e))}async function HA(t,e){return tl(t,"POST","/v1/accounts:signInWithEmailLink",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Xp{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Na(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Na(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ef(e,n,"signInWithPassword",BA,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return $A(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ef(e,r,"signUpPassword",zA,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return HA(e,{idToken:n,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(t,e){return tl(t,"POST","/v1/accounts:signInWithIdp",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="http://localhost";class Di extends Xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Di(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Gp(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Di(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Rs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rs(e,n)}buildRequest(){const e={requestUri:WA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ja(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GA(t){const e=Wo(qo(t)).link,n=e?Wo(qo(e)).deep_link_id:null,r=Wo(qo(t)).deep_link_id;return(r?Wo(qo(r)).link:null)||r||n||e||t}class Jp{constructor(e){var n,r,i,s,o,a;const u=Wo(qo(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=qA((i=u.mode)!==null&&i!==void 0?i:null);se(c&&h&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=GA(e);try{return new Jp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.providerId=no.PROVIDER_ID}static credential(e,n){return Na._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jp.parseLink(n);return se(r,"argument-error"),Na._fromEmailAndCode(e,r.code,r.tenantId)}}no.PROVIDER_ID="password";no.EMAIL_PASSWORD_SIGN_IN_METHOD="password";no.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl extends tC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends nl{constructor(){super("facebook.com")}static credential(e){return Di._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends nl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Di._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Pr.credential(n,r)}catch{return null}}}Pr.GOOGLE_SIGN_IN_METHOD="google.com";Pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends nl{constructor(){super("github.com")}static credential(e){return Di._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.GITHUB_SIGN_IN_METHOD="github.com";br.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends nl{constructor(){super("twitter.com")}static credential(e,n){return Di._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return kr.credential(n,r)}catch{return null}}}kr.TWITTER_SIGN_IN_METHOD="twitter.com";kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t,e){return tl(t,"POST","/v1/accounts:signUp",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await pn._fromIdTokenResponse(e,r,i),o=x_(r);return new Vi({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=x_(r);return new Vi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function x_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends ur{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new lc(e,n,r,i)}}function nC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?lc._fromErrorAndOperation(t,s,e,r):s})}async function QA(t,e,n=!1){const r=await Aa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(t,e,n=!1){const{auth:r}=t;if(en(r.app))return Promise.reject(Kn(r));const i="reauthenticate";try{const s=await Aa(t,nC(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=Zp(s.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),Vi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&yn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(t,e,n=!1){if(en(t.app))return Promise.reject(Kn(t));const r="signIn",i=await nC(t,r,e),s=await Vi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function YA(t,e){return rC($i(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iC(t){const e=$i(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XA(t,e,n){if(en(t.app))return Promise.reject(Kn(t));const r=$i(t),o=await Ef(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KA,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&iC(t),u}),a=await Vi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function JA(t,e,n){return en(t.app)?Promise.reject(Kn(t)):YA(nt(t),no.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iC(t),r})}function eN(t,e,n,r){return nt(t).onIdTokenChanged(e,n,r)}function tN(t,e,n){return nt(t).beforeAuthStateChanged(e,n)}function nN(t,e,n,r){return nt(t).onAuthStateChanged(e,n,r)}function rN(t){return nt(t).signOut()}const uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uc,"1"),this.storage.removeItem(uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=1e3,sN=10;class oC extends sC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);xA()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,sN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},iN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oC.type="LOCAL";const oN=oC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC extends sC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aC.type="SESSION";const lC=aC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Bc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),u=await aN(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=em("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return window}function uN(t){bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}async function cN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dN(){return uC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="firebaseLocalStorageDb",fN=1,cc="firebaseLocalStorage",hC="fbase_key";class rl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $c(t,e){return t.transaction([cc],e?"readwrite":"readonly").objectStore(cc)}function pN(){const t=indexedDB.deleteDatabase(cC);return new rl(t).toPromise()}function xf(){const t=indexedDB.open(cC,fN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(cc,{keyPath:hC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(cc)?e(r):(r.close(),await pN(),e(await xf()))})})}async function C_(t,e,n){const r=$c(t,!0).put({[hC]:e,value:n});return new rl(r).toPromise()}async function mN(t,e){const n=$c(t,!1).get(e),r=await new rl(n).toPromise();return r===void 0?null:r.value}function S_(t,e){const n=$c(t,!0).delete(e);return new rl(n).toPromise()}const gN=800,vN=3;class dC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bc._getInstance(dN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await cN(),!this.activeServiceWorker)return;this.sender=new lN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xf();return await C_(e,uc,"1"),await S_(e,uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>C_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>mN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>S_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=$c(i,!1).getAll();return new rl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dC.type="LOCAL";const yN=dC;new el(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t,e){return e?Wn(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm extends Xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wN(t){return rC(t.auth,new tm(t),t.bypassAuthState)}function EN(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),ZA(n,new tm(t),t.bypassAuthState)}async function xN(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),QA(n,new tm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wN;case"linkViaPopup":case"linkViaRedirect":return xN;case"reauthViaPopup":case"reauthViaRedirect":return EN;default:yn(this.auth,"internal-error")}}resolve(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new el(2e3,1e4);class Es extends fC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Es.currentPopupAction&&Es.currentPopupAction.cancel(),Es.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){nr(this.filter.length===1,"Popup operations only handle one event");const e=em();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Es.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CN.get())};e()}}Es.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="pendingRedirect",mu=new Map;class TN extends fC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=mu.get(this.auth._key());if(!e){try{const r=await IN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}mu.set(this.auth._key(),e)}return this.bypassAuthState||mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IN(t,e){const n=kN(e),r=bN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function PN(t,e){mu.set(t._key(),e)}function bN(t){return Wn(t._redirectPersistence)}function kN(t){return pu(SN,t.config.apiKey,t.name)}async function LN(t,e,n=!1){if(en(t.app))return Promise.reject(Kn(t));const r=$i(t),i=_N(r,e),o=await new TN(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=10*60*1e3;class AN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RN&&this.cachedEventUids.clear(),this.cachedEventUids.has(T_(e))}saveEventToCache(e){this.cachedEventUids.add(T_(e)),this.lastProcessedEventTime=Date.now()}}function T_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t,e={}){return oi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DN=/^https?/;async function VN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await MN(t);for(const n of e)try{if(jN(n))return}catch{}yn(t,"unauthorized-domain")}function jN(t){const e=_f(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!DN.test(n))return!1;if(ON.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=new el(3e4,6e4);function I_(){const t=bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FN(t){return new Promise((e,n)=>{var r,i,s;function o(){I_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{I_(),n(Pn(t,"network-request-failed"))},timeout:UN.get()})}if(!((i=(r=bn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=bn().gapi)===null||s===void 0)&&s.load)o();else{const a=RA("iframefcb");return bn()[a]=()=>{gapi.load?o():n(Pn(t,"network-request-failed"))},Xx(`${LA()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw gu=null,e})}let gu=null;function zN(t){return gu=gu||FN(t),gu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=new el(5e3,15e3),$N="__/auth/iframe",HN="emulator/auth/iframe",WN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GN(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qp(e,HN):`https://${t.config.authDomain}/${$N}`,r={apiKey:e.apiKey,appName:t.name,v:to},i=qN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ja(r).slice(1)}`}async function KN(t){const e=await zN(t),n=bn().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:GN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WN,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Pn(t,"network-request-failed"),a=bn().setTimeout(()=>{s(o)},BN.get());function u(){bn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZN=500,YN=600,XN="_blank",JN="http://localhost";class P_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eM(t,e,n,r=ZN,i=YN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},QN),{width:r.toString(),height:i.toString(),top:s,left:o}),c=It().toLowerCase();n&&(a=Wx(c)?XN:n),$x(c)&&(e=e||JN,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[w,y])=>`${m}${w}=${y},`,"");if(EA(c)&&a!=="_self")return tM(e||"",a),new P_(null);const p=window.open(e||"",a,h);se(p,t,"popup-blocked");try{p.focus()}catch{}return new P_(p)}function tM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="__/auth/handler",rM="emulator/auth/handler",iM=encodeURIComponent("fac");async function b_(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:to,eventId:i};if(e instanceof tC){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$L(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof nl){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${iM}=${encodeURIComponent(u)}`:"";return`${sM(t)}?${Ja(a).slice(1)}${c}`}function sM({config:t}){return t.emulator?Qp(t,rM):`https://${t.authDomain}/${nM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="webStorageSupport";class oM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lC,this._completeRedirectFn=LN,this._overrideRedirectResult=PN}async _openPopup(e,n,r,i){var s;nr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await b_(e,n,r,_f(),i);return eM(e,o,em())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await b_(e,n,r,_f(),i);return uN(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(nr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await KN(e),r=new AN(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cd,{type:cd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[cd];o!==void 0&&n(!!o),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=VN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Zx()||Hx()||Yp()}}const aM=oM;var k_="@firebase/auth",L_="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cM(t){Fs(new Oi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yx(t)},c=new PA(r,i,s,u);return VA(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fs(new Oi("auth-internal",e=>{const n=$i(e.getProvider("auth").getImmediate());return(r=>new lM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(k_,L_,uM(t)),$r(k_,L_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=5*60,dM=bx("authIdTokenMaxAge")||hM;let R_=null;const fM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dM)return;const i=n==null?void 0:n.token;R_!==i&&(R_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pM(t=Ax()){const e=qp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DA(t,{popupRedirectResolver:aM,persistence:[yN,oN,lC]}),r=bx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=fM(s.toString());tN(n,o,()=>o(n.currentUser)),eN(n,a=>o(a))}}const i=Ix("auth");return i&&jA(n,`http://${i}`),n}function mM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Pn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cM("Browser");var A_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hr,mC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,x){function E(){}E.prototype=x.prototype,S.D=x.prototype,S.prototype=new E,S.prototype.constructor=S,S.C=function(b,R,M){for(var L=Array(arguments.length-2),J=2;J<arguments.length;J++)L[J-2]=arguments[J];return x.prototype[R].apply(b,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,x,E){E||(E=0);var b=Array(16);if(typeof x=="string")for(var R=0;16>R;++R)b[R]=x.charCodeAt(E++)|x.charCodeAt(E++)<<8|x.charCodeAt(E++)<<16|x.charCodeAt(E++)<<24;else for(R=0;16>R;++R)b[R]=x[E++]|x[E++]<<8|x[E++]<<16|x[E++]<<24;x=S.g[0],E=S.g[1],R=S.g[2];var M=S.g[3],L=x+(M^E&(R^M))+b[0]+3614090360&4294967295;x=E+(L<<7&4294967295|L>>>25),L=M+(R^x&(E^R))+b[1]+3905402710&4294967295,M=x+(L<<12&4294967295|L>>>20),L=R+(E^M&(x^E))+b[2]+606105819&4294967295,R=M+(L<<17&4294967295|L>>>15),L=E+(x^R&(M^x))+b[3]+3250441966&4294967295,E=R+(L<<22&4294967295|L>>>10),L=x+(M^E&(R^M))+b[4]+4118548399&4294967295,x=E+(L<<7&4294967295|L>>>25),L=M+(R^x&(E^R))+b[5]+1200080426&4294967295,M=x+(L<<12&4294967295|L>>>20),L=R+(E^M&(x^E))+b[6]+2821735955&4294967295,R=M+(L<<17&4294967295|L>>>15),L=E+(x^R&(M^x))+b[7]+4249261313&4294967295,E=R+(L<<22&4294967295|L>>>10),L=x+(M^E&(R^M))+b[8]+1770035416&4294967295,x=E+(L<<7&4294967295|L>>>25),L=M+(R^x&(E^R))+b[9]+2336552879&4294967295,M=x+(L<<12&4294967295|L>>>20),L=R+(E^M&(x^E))+b[10]+4294925233&4294967295,R=M+(L<<17&4294967295|L>>>15),L=E+(x^R&(M^x))+b[11]+2304563134&4294967295,E=R+(L<<22&4294967295|L>>>10),L=x+(M^E&(R^M))+b[12]+1804603682&4294967295,x=E+(L<<7&4294967295|L>>>25),L=M+(R^x&(E^R))+b[13]+4254626195&4294967295,M=x+(L<<12&4294967295|L>>>20),L=R+(E^M&(x^E))+b[14]+2792965006&4294967295,R=M+(L<<17&4294967295|L>>>15),L=E+(x^R&(M^x))+b[15]+1236535329&4294967295,E=R+(L<<22&4294967295|L>>>10),L=x+(R^M&(E^R))+b[1]+4129170786&4294967295,x=E+(L<<5&4294967295|L>>>27),L=M+(E^R&(x^E))+b[6]+3225465664&4294967295,M=x+(L<<9&4294967295|L>>>23),L=R+(x^E&(M^x))+b[11]+643717713&4294967295,R=M+(L<<14&4294967295|L>>>18),L=E+(M^x&(R^M))+b[0]+3921069994&4294967295,E=R+(L<<20&4294967295|L>>>12),L=x+(R^M&(E^R))+b[5]+3593408605&4294967295,x=E+(L<<5&4294967295|L>>>27),L=M+(E^R&(x^E))+b[10]+38016083&4294967295,M=x+(L<<9&4294967295|L>>>23),L=R+(x^E&(M^x))+b[15]+3634488961&4294967295,R=M+(L<<14&4294967295|L>>>18),L=E+(M^x&(R^M))+b[4]+3889429448&4294967295,E=R+(L<<20&4294967295|L>>>12),L=x+(R^M&(E^R))+b[9]+568446438&4294967295,x=E+(L<<5&4294967295|L>>>27),L=M+(E^R&(x^E))+b[14]+3275163606&4294967295,M=x+(L<<9&4294967295|L>>>23),L=R+(x^E&(M^x))+b[3]+4107603335&4294967295,R=M+(L<<14&4294967295|L>>>18),L=E+(M^x&(R^M))+b[8]+1163531501&4294967295,E=R+(L<<20&4294967295|L>>>12),L=x+(R^M&(E^R))+b[13]+2850285829&4294967295,x=E+(L<<5&4294967295|L>>>27),L=M+(E^R&(x^E))+b[2]+4243563512&4294967295,M=x+(L<<9&4294967295|L>>>23),L=R+(x^E&(M^x))+b[7]+1735328473&4294967295,R=M+(L<<14&4294967295|L>>>18),L=E+(M^x&(R^M))+b[12]+2368359562&4294967295,E=R+(L<<20&4294967295|L>>>12),L=x+(E^R^M)+b[5]+4294588738&4294967295,x=E+(L<<4&4294967295|L>>>28),L=M+(x^E^R)+b[8]+2272392833&4294967295,M=x+(L<<11&4294967295|L>>>21),L=R+(M^x^E)+b[11]+1839030562&4294967295,R=M+(L<<16&4294967295|L>>>16),L=E+(R^M^x)+b[14]+4259657740&4294967295,E=R+(L<<23&4294967295|L>>>9),L=x+(E^R^M)+b[1]+2763975236&4294967295,x=E+(L<<4&4294967295|L>>>28),L=M+(x^E^R)+b[4]+1272893353&4294967295,M=x+(L<<11&4294967295|L>>>21),L=R+(M^x^E)+b[7]+4139469664&4294967295,R=M+(L<<16&4294967295|L>>>16),L=E+(R^M^x)+b[10]+3200236656&4294967295,E=R+(L<<23&4294967295|L>>>9),L=x+(E^R^M)+b[13]+681279174&4294967295,x=E+(L<<4&4294967295|L>>>28),L=M+(x^E^R)+b[0]+3936430074&4294967295,M=x+(L<<11&4294967295|L>>>21),L=R+(M^x^E)+b[3]+3572445317&4294967295,R=M+(L<<16&4294967295|L>>>16),L=E+(R^M^x)+b[6]+76029189&4294967295,E=R+(L<<23&4294967295|L>>>9),L=x+(E^R^M)+b[9]+3654602809&4294967295,x=E+(L<<4&4294967295|L>>>28),L=M+(x^E^R)+b[12]+3873151461&4294967295,M=x+(L<<11&4294967295|L>>>21),L=R+(M^x^E)+b[15]+530742520&4294967295,R=M+(L<<16&4294967295|L>>>16),L=E+(R^M^x)+b[2]+3299628645&4294967295,E=R+(L<<23&4294967295|L>>>9),L=x+(R^(E|~M))+b[0]+4096336452&4294967295,x=E+(L<<6&4294967295|L>>>26),L=M+(E^(x|~R))+b[7]+1126891415&4294967295,M=x+(L<<10&4294967295|L>>>22),L=R+(x^(M|~E))+b[14]+2878612391&4294967295,R=M+(L<<15&4294967295|L>>>17),L=E+(M^(R|~x))+b[5]+4237533241&4294967295,E=R+(L<<21&4294967295|L>>>11),L=x+(R^(E|~M))+b[12]+1700485571&4294967295,x=E+(L<<6&4294967295|L>>>26),L=M+(E^(x|~R))+b[3]+2399980690&4294967295,M=x+(L<<10&4294967295|L>>>22),L=R+(x^(M|~E))+b[10]+4293915773&4294967295,R=M+(L<<15&4294967295|L>>>17),L=E+(M^(R|~x))+b[1]+2240044497&4294967295,E=R+(L<<21&4294967295|L>>>11),L=x+(R^(E|~M))+b[8]+1873313359&4294967295,x=E+(L<<6&4294967295|L>>>26),L=M+(E^(x|~R))+b[15]+4264355552&4294967295,M=x+(L<<10&4294967295|L>>>22),L=R+(x^(M|~E))+b[6]+2734768916&4294967295,R=M+(L<<15&4294967295|L>>>17),L=E+(M^(R|~x))+b[13]+1309151649&4294967295,E=R+(L<<21&4294967295|L>>>11),L=x+(R^(E|~M))+b[4]+4149444226&4294967295,x=E+(L<<6&4294967295|L>>>26),L=M+(E^(x|~R))+b[11]+3174756917&4294967295,M=x+(L<<10&4294967295|L>>>22),L=R+(x^(M|~E))+b[2]+718787259&4294967295,R=M+(L<<15&4294967295|L>>>17),L=E+(M^(R|~x))+b[9]+3951481745&4294967295,S.g[0]=S.g[0]+x&4294967295,S.g[1]=S.g[1]+(R+(L<<21&4294967295|L>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+M&4294967295}r.prototype.u=function(S,x){x===void 0&&(x=S.length);for(var E=x-this.blockSize,b=this.B,R=this.h,M=0;M<x;){if(R==0)for(;M<=E;)i(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<x;)if(b[R++]=S.charCodeAt(M++),R==this.blockSize){i(this,b),R=0;break}}else for(;M<x;)if(b[R++]=S[M++],R==this.blockSize){i(this,b),R=0;break}}this.h=R,this.o+=x},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var x=1;x<S.length-8;++x)S[x]=0;var E=8*this.o;for(x=S.length-8;x<S.length;++x)S[x]=E&255,E/=256;for(this.u(S),S=Array(16),x=E=0;4>x;++x)for(var b=0;32>b;b+=8)S[E++]=this.g[x]>>>b&255;return S};function s(S,x){var E=a;return Object.prototype.hasOwnProperty.call(E,S)?E[S]:E[S]=x(S)}function o(S,x){this.h=x;for(var E=[],b=!0,R=S.length-1;0<=R;R--){var M=S[R]|0;b&&M==x||(E[R]=M,b=!1)}this.g=E}var a={};function u(S){return-128<=S&&128>S?s(S,function(x){return new o([x|0],0>x?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return k(c(-S));for(var x=[],E=1,b=0;S>=E;b++)x[b]=S/E|0,E*=4294967296;return new o(x,0)}function h(S,x){if(S.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(S.charAt(0)=="-")return k(h(S.substring(1),x));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(x,8)),b=p,R=0;R<S.length;R+=8){var M=Math.min(8,S.length-R),L=parseInt(S.substring(R,R+M),x);8>M?(M=c(Math.pow(x,M)),b=b.j(M).add(c(L))):(b=b.j(E),b=b.add(c(L)))}return b}var p=u(0),m=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-k(this).m();for(var S=0,x=1,E=0;E<this.g.length;E++){var b=this.i(E);S+=(0<=b?b:4294967296+b)*x,x*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(P(this))return"-"+k(this).toString(S);for(var x=c(Math.pow(S,6)),E=this,b="";;){var R=A(E,x).g;E=C(E,R.j(x));var M=((0<E.g.length?E.g[0]:E.h)>>>0).toString(S);if(E=R,y(E))return M+b;for(;6>M.length;)M="0"+M;b=M+b}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var x=0;x<S.g.length;x++)if(S.g[x]!=0)return!1;return!0}function P(S){return S.h==-1}t.l=function(S){return S=C(this,S),P(S)?-1:y(S)?0:1};function k(S){for(var x=S.g.length,E=[],b=0;b<x;b++)E[b]=~S.g[b];return new o(E,~S.h).add(m)}t.abs=function(){return P(this)?k(this):this},t.add=function(S){for(var x=Math.max(this.g.length,S.g.length),E=[],b=0,R=0;R<=x;R++){var M=b+(this.i(R)&65535)+(S.i(R)&65535),L=(M>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);b=L>>>16,M&=65535,L&=65535,E[R]=L<<16|M}return new o(E,E[E.length-1]&-2147483648?-1:0)};function C(S,x){return S.add(k(x))}t.j=function(S){if(y(this)||y(S))return p;if(P(this))return P(S)?k(this).j(k(S)):k(k(this).j(S));if(P(S))return k(this.j(k(S)));if(0>this.l(w)&&0>S.l(w))return c(this.m()*S.m());for(var x=this.g.length+S.g.length,E=[],b=0;b<2*x;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var R=0;R<S.g.length;R++){var M=this.i(b)>>>16,L=this.i(b)&65535,J=S.i(R)>>>16,re=S.i(R)&65535;E[2*b+2*R]+=L*re,_(E,2*b+2*R),E[2*b+2*R+1]+=M*re,_(E,2*b+2*R+1),E[2*b+2*R+1]+=L*J,_(E,2*b+2*R+1),E[2*b+2*R+2]+=M*J,_(E,2*b+2*R+2)}for(b=0;b<x;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=x;b<2*x;b++)E[b]=0;return new o(E,0)};function _(S,x){for(;(S[x]&65535)!=S[x];)S[x+1]+=S[x]>>>16,S[x]&=65535,x++}function I(S,x){this.g=S,this.h=x}function A(S,x){if(y(x))throw Error("division by zero");if(y(S))return new I(p,p);if(P(S))return x=A(k(S),x),new I(k(x.g),k(x.h));if(P(x))return x=A(S,k(x)),new I(k(x.g),x.h);if(30<S.g.length){if(P(S)||P(x))throw Error("slowDivide_ only works with positive integers.");for(var E=m,b=x;0>=b.l(S);)E=N(E),b=N(b);var R=O(E,1),M=O(b,1);for(b=O(b,2),E=O(E,2);!y(b);){var L=M.add(b);0>=L.l(S)&&(R=R.add(E),M=L),b=O(b,1),E=O(E,1)}return x=C(S,R.j(x)),new I(R,x)}for(R=p;0<=S.l(x);){for(E=Math.max(1,Math.floor(S.m()/x.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),M=c(E),L=M.j(x);P(L)||0<L.l(S);)E-=b,M=c(E),L=M.j(x);y(M)&&(M=m),R=R.add(M),S=C(S,L)}return new I(R,S)}t.A=function(S){return A(this,S).h},t.and=function(S){for(var x=Math.max(this.g.length,S.g.length),E=[],b=0;b<x;b++)E[b]=this.i(b)&S.i(b);return new o(E,this.h&S.h)},t.or=function(S){for(var x=Math.max(this.g.length,S.g.length),E=[],b=0;b<x;b++)E[b]=this.i(b)|S.i(b);return new o(E,this.h|S.h)},t.xor=function(S){for(var x=Math.max(this.g.length,S.g.length),E=[],b=0;b<x;b++)E[b]=this.i(b)^S.i(b);return new o(E,this.h^S.h)};function N(S){for(var x=S.g.length+1,E=[],b=0;b<x;b++)E[b]=S.i(b)<<1|S.i(b-1)>>>31;return new o(E,S.h)}function O(S,x){var E=x>>5;x%=32;for(var b=S.g.length-E,R=[],M=0;M<b;M++)R[M]=0<x?S.i(M+E)>>>x|S.i(M+E+1)<<32-x:S.i(M+E);return new o(R,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Hr=o}).apply(typeof A_<"u"?A_:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gC,Go,vC,vu,Cf,yC,_C,wC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(l,f){if(f)e:{var g=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var D=l[T];if(!(D in g))break e;g=g[D]}l=l[l.length-1],T=g[l],f=f(T),f!=T&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var g=0,T=!1,D={next:function(){if(!T&&g<l.length){var V=g++;return{value:f(V,l[V]),done:!1}}return T=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,g){return l.call.apply(l.bind,arguments)}function p(l,f,g){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,T),l.apply(f,D)}}return function(){return l.apply(f,arguments)}}function m(l,f,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function w(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function y(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(T,D,V){for(var q=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)q[ke-2]=arguments[ke];return f.prototype[D].apply(T,q)}}function P(l){const f=l.length;if(0<f){const g=Array(f);for(let T=0;T<f;T++)g[T]=l[T];return g}return[]}function k(l,f){for(let g=1;g<arguments.length;g++){const T=arguments[g];if(u(T)){const D=l.length||0,V=T.length||0;l.length=D+V;for(let q=0;q<V;q++)l[D+q]=T[q]}else l.push(T)}}class C{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function _(l){return/^[\s\xa0]*$/.test(l)}function I(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function A(l){return A[" "](l),l}A[" "]=function(){};var N=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function O(l,f,g){for(const T in l)f.call(g,l[T],T,l)}function S(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function x(l){const f={};for(const g in l)f[g]=l[g];return f}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(l,f){let g,T;for(let D=1;D<arguments.length;D++){T=arguments[D];for(g in T)l[g]=T[g];for(let V=0;V<E.length;V++)g=E[V],Object.prototype.hasOwnProperty.call(T,g)&&(l[g]=T[g])}}function R(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function M(l){a.setTimeout(()=>{throw l},0)}function L(){var l=H;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class J{constructor(){this.h=this.g=null}add(f,g){const T=re.get();T.set(f,g),this.h?this.h.next=T:this.g=T,this.h=T}}var re=new C(()=>new ue,l=>l.reset());class ue{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let te,U=!1,H=new J,W=()=>{const l=a.Promise.resolve(void 0);te=()=>{l.then(Y)}};var Y=()=>{for(var l;l=L();){try{l.h.call(l.g)}catch(g){M(g)}var f=re;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}U=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l}();function F(l,f){if(G.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(N){e:{try{A(f.nodeName);var D=!0;break e}catch{}D=!1}D||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:xe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&F.aa.h.call(this)}}y(F,G);var xe={2:"touch",3:"pen",4:"mouse"};F.prototype.h=function(){F.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),ce=0;function Be(l,f,g,T,D){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!T,this.ha=D,this.key=++ce,this.da=this.fa=!1}function ie(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function pe(l){this.src=l,this.g={},this.h=0}pe.prototype.add=function(l,f,g,T,D){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var q=Ft(l,f,T,D);return-1<q?(f=l[q],g||(f.fa=!1)):(f=new Be(f,this.src,V,!!T,D),f.fa=g,l.push(f)),f};function Pt(l,f){var g=f.type;if(g in l.g){var T=l.g[g],D=Array.prototype.indexOf.call(T,f,void 0),V;(V=0<=D)&&Array.prototype.splice.call(T,D,1),V&&(ie(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Ft(l,f,g,T){for(var D=0;D<l.length;++D){var V=l[D];if(!V.da&&V.listener==f&&V.capture==!!g&&V.ha==T)return D}return-1}var On="closure_lm_"+(1e6*Math.random()|0),Se={};function lo(l,f,g,T,D){if(T&&T.once)return hi(l,f,g,T,D);if(Array.isArray(f)){for(var V=0;V<f.length;V++)lo(l,f[V],g,T,D);return null}return g=Zi(g),l&&l[ge]?l.K(f,g,c(T)?!!T.capture:!!T,D):ci(l,f,g,!1,T,D)}function ci(l,f,g,T,D,V){if(!f)throw Error("Invalid event type");var q=c(D)?!!D.capture:!!D,ke=Ki(l);if(ke||(l[On]=ke=new pe(l)),g=ke.add(f,g,T,q,V),g.proxy)return g;if(T=cl(),g.proxy=T,T.src=l,T.listener=g,l.addEventListener)fe||(D=q),D===void 0&&(D=!1),l.addEventListener(f.toString(),T,D);else if(l.attachEvent)l.attachEvent(co(f.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function cl(){function l(g){return f.call(l.src,l.listener,g)}const f=Gi;return l}function hi(l,f,g,T,D){if(Array.isArray(f)){for(var V=0;V<f.length;V++)hi(l,f[V],g,T,D);return null}return g=Zi(g),l&&l[ge]?l.L(f,g,c(T)?!!T.capture:!!T,D):ci(l,f,g,!0,T,D)}function uo(l,f,g,T,D){if(Array.isArray(f))for(var V=0;V<f.length;V++)uo(l,f[V],g,T,D);else T=c(T)?!!T.capture:!!T,g=Zi(g),l&&l[ge]?(l=l.i,f=String(f).toString(),f in l.g&&(V=l.g[f],g=Ft(V,g,T,D),-1<g&&(ie(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete l.g[f],l.h--)))):l&&(l=Ki(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Ft(f,g,T,D)),(g=-1<l?f[l]:null)&&cr(g))}function cr(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[ge])Pt(f.i,l);else{var g=l.type,T=l.proxy;f.removeEventListener?f.removeEventListener(g,T,l.capture):f.detachEvent?f.detachEvent(co(g),T):f.addListener&&f.removeListener&&f.removeListener(T),(g=Ki(f))?(Pt(g,l),g.h==0&&(g.src=null,f[On]=null)):ie(l)}}}function co(l){return l in Se?Se[l]:Se[l]="on"+l}function Gi(l,f){if(l.da)l=!0;else{f=new F(f,this);var g=l.listener,T=l.ha||l.src;l.fa&&cr(l),l=g.call(T,f)}return l}function Ki(l){return l=l[On],l instanceof pe?l:null}var Qi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zi(l){return typeof l=="function"?l:(l[Qi]||(l[Qi]=function(f){return l.handleEvent(f)}),l[Qi])}function We(){ee.call(this),this.i=new pe(this),this.M=this,this.F=null}y(We,ee),We.prototype[ge]=!0,We.prototype.removeEventListener=function(l,f,g,T){uo(this,l,f,g,T)};function rt(l,f){var g,T=l.F;if(T)for(g=[];T;T=T.F)g.push(T);if(l=l.M,T=f.type||f,typeof f=="string")f=new G(f,l);else if(f instanceof G)f.target=f.target||l;else{var D=f;f=new G(T,l),b(f,D)}if(D=!0,g)for(var V=g.length-1;0<=V;V--){var q=f.g=g[V];D=Dn(q,T,!0,f)&&D}if(q=f.g=l,D=Dn(q,T,!0,f)&&D,D=Dn(q,T,!1,f)&&D,g)for(V=0;V<g.length;V++)q=f.g=g[V],D=Dn(q,T,!1,f)&&D}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],T=0;T<g.length;T++)ie(g[T]);delete l.g[f],l.h--}}this.F=null},We.prototype.K=function(l,f,g,T){return this.i.add(String(l),f,!1,g,T)},We.prototype.L=function(l,f,g,T){return this.i.add(String(l),f,!0,g,T)};function Dn(l,f,g,T){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var D=!0,V=0;V<f.length;++V){var q=f[V];if(q&&!q.da&&q.capture==g){var ke=q.listener,at=q.ha||q.src;q.fa&&Pt(l.i,q),D=ke.call(at,T)!==!1&&D}}return D&&!T.defaultPrevented}function ho(l,f,g){if(typeof l=="function")g&&(l=m(l,g));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function di(l){l.g=ho(()=>{l.g=null,l.i&&(l.i=!1,di(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class hl extends ee{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:di(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wn(l){ee.call(this),this.h=l,this.g={}}y(wn,ee);var fo=[];function fi(l){O(l.g,function(f,g){this.g.hasOwnProperty(g)&&cr(f)},l),l.g={}}wn.prototype.N=function(){wn.aa.N.call(this),fi(this)},wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yi=a.JSON.stringify,Xi=a.JSON.parse,dl=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function hr(){}hr.prototype.h=null;function po(l){return l.h||(l.h=l.i())}function mo(){}var dr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fr(){G.call(this,"d")}y(fr,G);function Ji(){G.call(this,"c")}y(Ji,G);var Zt={},go=null;function Vn(){return go=go||new We}Zt.La="serverreachability";function vo(l){G.call(this,Zt.La,l)}y(vo,G);function pi(l){const f=Vn();rt(f,new vo(f))}Zt.STAT_EVENT="statevent";function pr(l,f){G.call(this,Zt.STAT_EVENT,l),this.stat=f}y(pr,G);function X(l){const f=Vn();rt(f,new pr(f,l))}Zt.Ma="timingevent";function Bm(l,f){G.call(this,Zt.Ma,l),this.size=f}y(Bm,G);function yo(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function _o(){this.g=!0}_o.prototype.xa=function(){this.g=!1};function eT(l,f,g,T,D,V){l.info(function(){if(l.g)if(V)for(var q="",ke=V.split("&"),at=0;at<ke.length;at++){var Te=ke[at].split("=");if(1<Te.length){var gt=Te[0];Te=Te[1];var vt=gt.split("_");q=2<=vt.length&&vt[1]=="type"?q+(gt+"="+Te+"&"):q+(gt+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+T+") [attempt "+D+"]: "+f+`
`+g+`
`+q})}function tT(l,f,g,T,D,V,q){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+D+"]: "+f+`
`+g+`
`+V+" "+q})}function es(l,f,g,T){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+rT(l,g)+(T?" "+T:"")})}function nT(l,f){l.info(function(){return"TIMEOUT: "+f})}_o.prototype.info=function(){};function rT(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var T=g[l];if(!(2>T.length)){var D=T[1];if(Array.isArray(D)&&!(1>D.length)){var V=D[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<D.length;q++)D[q]=""}}}}return Yi(g)}catch{return f}}var fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$m={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fh;function pl(){}y(pl,hr),pl.prototype.g=function(){return new XMLHttpRequest},pl.prototype.i=function(){return{}},fh=new pl;function mr(l,f,g,T){this.j=l,this.i=f,this.l=g,this.R=T||1,this.U=new wn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hm}function Hm(){this.i=null,this.g="",this.h=!1}var Wm={},ph={};function mh(l,f,g){l.L=1,l.v=yl(jn(f)),l.m=g,l.P=!0,qm(l,null)}function qm(l,f){l.F=Date.now(),ml(l),l.A=jn(l.v);var g=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),og(g.i,"t",T),l.C=0,g=l.j.J,l.h=new Hm,l.g=Sg(l.j,g?f:null,!l.m),0<l.O&&(l.M=new hl(m(l.Y,l,l.g),l.O)),f=l.U,g=l.g,T=l.ca;var D="readystatechange";Array.isArray(D)||(D&&(fo[0]=D.toString()),D=fo);for(var V=0;V<D.length;V++){var q=lo(g,D[V],T||f.handleEvent,!1,f.h||f);if(!q)break;f.g[q.key]=q}f=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),pi(),eT(l.i,l.u,l.A,l.l,l.R,l.m)}mr.prototype.ca=function(l){l=l.target;const f=this.M;f&&Un(l)==3?f.j():this.Y(l)},mr.prototype.Y=function(l){try{if(l==this.g)e:{const vt=Un(this.g);var f=this.g.Ba();const rs=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||fg(this.g)))){this.J||vt!=4||f==7||(f==8||0>=rs?pi(3):pi(2)),gh(this);var g=this.g.Z();this.X=g;t:if(Gm(this)){var T=fg(this.g);l="";var D=T.length,V=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mi(this),wo(this);var q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<D;f++)this.h.h=!0,l+=this.h.i.decode(T[f],{stream:!(V&&f==D-1)});T.length=0,this.h.g+=l,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=g==200,tT(this.i,this.u,this.A,this.l,this.R,vt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,at=this.g;if((ke=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ke)){var Te=ke;break t}}Te=null}if(g=Te)es(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vh(this,g);else{this.o=!1,this.s=3,X(12),mi(this),wo(this);break e}}if(this.P){g=!0;let ln;for(;!this.J&&this.C<q.length;)if(ln=iT(this,q),ln==ph){vt==4&&(this.s=4,X(14),g=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==Wm){this.s=4,X(15),es(this.i,this.l,q,"[Invalid Chunk]"),g=!1;break}else es(this.i,this.l,ln,null),vh(this,ln);if(Gm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||q.length!=0||this.h.h||(this.s=1,X(16),g=!1),this.o=this.o&&g,!g)es(this.i,this.l,q,"[Invalid Chunked Response]"),mi(this),wo(this);else if(0<q.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Ch(gt),gt.M=!0,X(11))}}else es(this.i,this.l,q,null),vh(this,q);vt==4&&mi(this),this.o&&!this.J&&(vt==4?wg(this.j,this):(this.o=!1,ml(this)))}else ET(this.g),g==400&&0<q.indexOf("Unknown SID")?(this.s=3,X(12)):(this.s=0,X(13)),mi(this),wo(this)}}}catch{}finally{}};function Gm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function iT(l,f){var g=l.C,T=f.indexOf(`
`,g);return T==-1?ph:(g=Number(f.substring(g,T)),isNaN(g)?Wm:(T+=1,T+g>f.length?ph:(f=f.slice(T,T+g),l.C=T+g,f)))}mr.prototype.cancel=function(){this.J=!0,mi(this)};function ml(l){l.S=Date.now()+l.I,Km(l,l.I)}function Km(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=yo(m(l.ba,l),f)}function gh(l){l.B&&(a.clearTimeout(l.B),l.B=null)}mr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(nT(this.i,this.A),this.L!=2&&(pi(),X(17)),mi(this),this.s=2,wo(this)):Km(this,this.S-l)};function wo(l){l.j.G==0||l.J||wg(l.j,l)}function mi(l){gh(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,fi(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function vh(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||yh(g.h,l))){if(!l.K&&yh(g.h,l)&&g.G==3){try{var T=g.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var D=T;if(D[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Sl(g),xl(g);else break e;xh(g),X(18)}}else g.za=D[1],0<g.za-g.T&&37500>D[2]&&g.F&&g.v==0&&!g.C&&(g.C=yo(m(g.Za,g),6e3));if(1>=Ym(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else vi(g,11)}else if((l.K||g.g==l)&&Sl(g),!_(f))for(D=g.Da.g.parse(f),f=0;f<D.length;f++){let Te=D[f];if(g.T=Te[0],Te=Te[1],g.G==2)if(Te[0]=="c"){g.K=Te[1],g.ia=Te[2];const gt=Te[3];gt!=null&&(g.la=gt,g.j.info("VER="+g.la));const vt=Te[4];vt!=null&&(g.Aa=vt,g.j.info("SVER="+g.Aa));const rs=Te[5];rs!=null&&typeof rs=="number"&&0<rs&&(T=1.5*rs,g.L=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const ln=l.g;if(ln){const Il=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var V=T.h;V.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(_h(V,V.h),V.h=null))}if(T.D){const Sh=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Sh&&(T.ya=Sh,Re(T.I,T.D,Sh))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),T=g;var q=l;if(T.qa=Cg(T,T.J?T.ia:null,T.W),q.K){Xm(T.h,q);var ke=q,at=T.L;at&&(ke.I=at),ke.B&&(gh(ke),ml(ke)),T.g=q}else yg(T);0<g.i.length&&Cl(g)}else Te[0]!="stop"&&Te[0]!="close"||vi(g,7);else g.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?vi(g,7):Eh(g):Te[0]!="noop"&&g.l&&g.l.ta(Te),g.v=0)}}pi(4)}catch{}}var sT=class{constructor(l,f){this.g=l,this.map=f}};function Qm(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ym(l){return l.h?1:l.g?l.g.size:0}function yh(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function _h(l,f){l.g?l.g.add(f):l.h=f}function Xm(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Qm.prototype.cancel=function(){if(this.i=Jm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Jm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return P(l.i)}function oT(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],g=l.length,T=0;T<g;T++)f.push(l[T]);return f}f=[],g=0;for(T in l)f[g++]=l[T];return f}function aT(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const T in l)f[g++]=T;return f}}}function eg(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=aT(l),T=oT(l),D=T.length,V=0;V<D;V++)f.call(void 0,T[V],g&&g[V],l)}var tg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lT(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var T=l[g].indexOf("="),D=null;if(0<=T){var V=l[g].substring(0,T);D=l[g].substring(T+1)}else V=l[g];f(V,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function gi(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof gi){this.h=l.h,gl(this,l.j),this.o=l.o,this.g=l.g,vl(this,l.s),this.l=l.l;var f=l.i,g=new Co;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),ng(this,g),this.m=l.m}else l&&(f=String(l).match(tg))?(this.h=!1,gl(this,f[1]||"",!0),this.o=Eo(f[2]||""),this.g=Eo(f[3]||"",!0),vl(this,f[4]),this.l=Eo(f[5]||"",!0),ng(this,f[6]||"",!0),this.m=Eo(f[7]||"")):(this.h=!1,this.i=new Co(null,this.h))}gi.prototype.toString=function(){var l=[],f=this.j;f&&l.push(xo(f,rg,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(xo(f,rg,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(xo(g,g.charAt(0)=="/"?hT:cT,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",xo(g,fT)),l.join("")};function jn(l){return new gi(l)}function gl(l,f,g){l.j=g?Eo(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function vl(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function ng(l,f,g){f instanceof Co?(l.i=f,pT(l.i,l.h)):(g||(f=xo(f,dT)),l.i=new Co(f,l.h))}function Re(l,f,g){l.i.set(f,g)}function yl(l){return Re(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Eo(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function xo(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,uT),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function uT(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var rg=/[#\/\?@]/g,cT=/[#\?:]/g,hT=/[#\?]/g,dT=/[#\?@]/g,fT=/#/g;function Co(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function gr(l){l.g||(l.g=new Map,l.h=0,l.i&&lT(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Co.prototype,t.add=function(l,f){gr(this),this.i=null,l=ts(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function ig(l,f){gr(l),f=ts(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function sg(l,f){return gr(l),f=ts(l,f),l.g.has(f)}t.forEach=function(l,f){gr(this),this.g.forEach(function(g,T){g.forEach(function(D){l.call(f,D,T,this)},this)},this)},t.na=function(){gr(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let T=0;T<f.length;T++){const D=l[T];for(let V=0;V<D.length;V++)g.push(f[T])}return g},t.V=function(l){gr(this);let f=[];if(typeof l=="string")sg(this,l)&&(f=f.concat(this.g.get(ts(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return gr(this),this.i=null,l=ts(this,l),sg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function og(l,f,g){ig(l,f),0<g.length&&(l.i=null,l.g.set(ts(l,f),P(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var T=f[g];const V=encodeURIComponent(String(T)),q=this.V(T);for(T=0;T<q.length;T++){var D=V;q[T]!==""&&(D+="="+encodeURIComponent(String(q[T]))),l.push(D)}}return this.i=l.join("&")};function ts(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function pT(l,f){f&&!l.j&&(gr(l),l.i=null,l.g.forEach(function(g,T){var D=T.toLowerCase();T!=D&&(ig(this,T),og(this,D,g))},l)),l.j=f}function mT(l,f){const g=new _o;if(a.Image){const T=new Image;T.onload=w(vr,g,"TestLoadImage: loaded",!0,f,T),T.onerror=w(vr,g,"TestLoadImage: error",!1,f,T),T.onabort=w(vr,g,"TestLoadImage: abort",!1,f,T),T.ontimeout=w(vr,g,"TestLoadImage: timeout",!1,f,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else f(!1)}function gT(l,f){const g=new _o,T=new AbortController,D=setTimeout(()=>{T.abort(),vr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:T.signal}).then(V=>{clearTimeout(D),V.ok?vr(g,"TestPingServer: ok",!0,f):vr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(D),vr(g,"TestPingServer: error",!1,f)})}function vr(l,f,g,T,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),T(g)}catch{}}function vT(){this.g=new dl}function yT(l,f,g){const T=g||"";try{eg(l,function(D,V){let q=D;c(D)&&(q=Yi(D)),f.push(T+V+"="+encodeURIComponent(q))})}catch(D){throw f.push(T+"type="+encodeURIComponent("_badmap")),D}}function _l(l){this.l=l.Ub||null,this.j=l.eb||!1}y(_l,hr),_l.prototype.g=function(){return new wl(this.l,this.j)},_l.prototype.i=function(l){return function(){return l}}({});function wl(l,f){We.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(wl,We),t=wl.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,To(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,So(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,To(this)),this.g&&(this.readyState=3,To(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ag(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ag(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?So(this):To(this),this.readyState==3&&ag(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,So(this))},t.Qa=function(l){this.g&&(this.response=l,So(this))},t.ga=function(){this.g&&So(this)};function So(l){l.readyState=4,l.l=null,l.j=null,l.v=null,To(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function To(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function lg(l){let f="";return O(l,function(g,T){f+=T,f+=":",f+=g,f+=`\r
`}),f}function wh(l,f,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=lg(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Re(l,f,g))}function $e(l){We.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y($e,We);var _T=/^https?$/i,wT=["POST","PUT"];t=$e.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fh.g(),this.v=this.o?po(this.o):po(fh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(V){ug(this,V);return}if(l=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var D in T)g.set(D,T[D]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const V of T.keys())g.set(V,T.get(V));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),D=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(wT,f,void 0))||T||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of g)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{dg(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){ug(this,V)}};function ug(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,cg(l),El(l)}function cg(l){l.A||(l.A=!0,rt(l,"complete"),rt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,rt(this,"complete"),rt(this,"abort"),El(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),El(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?hg(this):this.bb())},t.bb=function(){hg(this)};function hg(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Un(l)!=4||l.Z()!=2)){if(l.u&&Un(l)==4)ho(l.Ea,0,l);else if(rt(l,"readystatechange"),Un(l)==4){l.h=!1;try{const q=l.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var T;if(T=q===0){var D=String(l.D).match(tg)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),T=!_T.test(D?D.toLowerCase():"")}g=T}if(g)rt(l,"complete"),rt(l,"success");else{l.m=6;try{var V=2<Un(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",cg(l)}}finally{El(l)}}}}function El(l,f){if(l.g){dg(l);const g=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||rt(l,"ready");try{g.onreadystatechange=T}catch{}}}function dg(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Un(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Xi(f)}};function fg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ET(l){const f={};l=(l.g&&2<=Un(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(_(l[T]))continue;var g=R(l[T]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=f[D]||[];f[D]=V,V.push(g)}S(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Io(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function pg(l){this.Aa=0,this.i=[],this.j=new _o,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Io("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Io("baseRetryDelayMs",5e3,l),this.cb=Io("retryDelaySeedMs",1e4,l),this.Wa=Io("forwardChannelMaxRetries",2,l),this.wa=Io("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Qm(l&&l.concurrentRequestLimit),this.Da=new vT,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=pg.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,T){X(0),this.W=l,this.H=f||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.I=Cg(this,null,this.W),Cl(this)};function Eh(l){if(mg(l),l.G==3){var f=l.U++,g=jn(l.I);if(Re(g,"SID",l.K),Re(g,"RID",f),Re(g,"TYPE","terminate"),Po(l,g),f=new mr(l,l.j,f),f.L=2,f.v=yl(jn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Sg(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ml(f)}xg(l)}function xl(l){l.g&&(Ch(l),l.g.cancel(),l.g=null)}function mg(l){xl(l),l.u&&(a.clearTimeout(l.u),l.u=null),Sl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Cl(l){if(!Zm(l.h)&&!l.s){l.s=!0;var f=l.Ga;te||W(),U||(te(),U=!0),H.add(f,l),l.B=0}}function xT(l,f){return Ym(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=yo(m(l.Ga,l,f),Eg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const D=new mr(this,this.j,l);let V=this.o;if(this.S&&(V?(V=x(V),b(V,this.S)):V=this.S),this.m!==null||this.O||(D.H=V,V=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=vg(this,D,f),g=jn(this.I),Re(g,"RID",l),Re(g,"CVER",22),this.D&&Re(g,"X-HTTP-Session-Id",this.D),Po(this,g),V&&(this.O?f="headers="+encodeURIComponent(String(lg(V)))+"&"+f:this.m&&wh(g,this.m,V)),_h(this.h,D),this.Ua&&Re(g,"TYPE","init"),this.P?(Re(g,"$req",f),Re(g,"SID","null"),D.T=!0,mh(D,g,null)):mh(D,g,f),this.G=2}}else this.G==3&&(l?gg(this,l):this.i.length==0||Zm(this.h)||gg(this))};function gg(l,f){var g;f?g=f.l:g=l.U++;const T=jn(l.I);Re(T,"SID",l.K),Re(T,"RID",g),Re(T,"AID",l.T),Po(l,T),l.m&&l.o&&wh(T,l.m,l.o),g=new mr(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=vg(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),_h(l.h,g),mh(g,T,f)}function Po(l,f){l.H&&O(l.H,function(g,T){Re(f,T,g)}),l.l&&eg({},function(g,T){Re(f,T,g)})}function vg(l,f,g){g=Math.min(l.i.length,g);var T=l.l?m(l.l.Na,l.l,l):null;e:{var D=l.i;let V=-1;for(;;){const q=["count="+g];V==-1?0<g?(V=D[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let ke=!0;for(let at=0;at<g;at++){let Te=D[at].g;const gt=D[at].map;if(Te-=V,0>Te)V=Math.max(0,D[at].g-100),ke=!1;else try{yT(gt,q,"req"+Te+"_")}catch{T&&T(gt)}}if(ke){T=q.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,T}function yg(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;te||W(),U||(te(),U=!0),H.add(f,l),l.v=0}}function xh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=yo(m(l.Fa,l),Eg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,_g(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=yo(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,X(10),xl(this),_g(this))};function Ch(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function _g(l){l.g=new mr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=jn(l.qa);Re(f,"RID","rpc"),Re(f,"SID",l.K),Re(f,"AID",l.T),Re(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Re(f,"TO",l.ja),Re(f,"TYPE","xmlhttp"),Po(l,f),l.m&&l.o&&wh(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=yl(jn(f)),g.m=null,g.P=!0,qm(g,l)}t.Za=function(){this.C!=null&&(this.C=null,xl(this),xh(this),X(19))};function Sl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function wg(l,f){var g=null;if(l.g==f){Sl(l),Ch(l),l.g=null;var T=2}else if(yh(l.h,f))g=f.D,Xm(l.h,f),T=1;else return;if(l.G!=0){if(f.o)if(T==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var D=l.B;T=Vn(),rt(T,new Bm(T,g)),Cl(l)}else yg(l);else if(D=f.s,D==3||D==0&&0<f.X||!(T==1&&xT(l,f)||T==2&&xh(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),D){case 1:vi(l,5);break;case 4:vi(l,10);break;case 3:vi(l,6);break;default:vi(l,2)}}}function Eg(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function vi(l,f){if(l.j.info("Error code "+f),f==2){var g=m(l.fb,l),T=l.Xa;const D=!T;T=new gi(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gl(T,"https"),yl(T),D?mT(T.toString(),g):gT(T.toString(),g)}else X(2);l.G=0,l.l&&l.l.sa(f),xg(l),mg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),X(2)):(this.j.info("Failed to ping google.com"),X(1))};function xg(l){if(l.G=0,l.ka=[],l.l){const f=Jm(l.h);(f.length!=0||l.i.length!=0)&&(k(l.ka,f),k(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function Cg(l,f,g){var T=g instanceof gi?jn(g):new gi(g);if(T.g!="")f&&(T.g=f+"."+T.g),vl(T,T.s);else{var D=a.location;T=D.protocol,f=f?f+"."+D.hostname:D.hostname,D=+D.port;var V=new gi(null);T&&gl(V,T),f&&(V.g=f),D&&vl(V,D),g&&(V.l=g),T=V}return g=l.D,f=l.ya,g&&f&&Re(T,g,f),Re(T,"VER",l.la),Po(l,T),T}function Sg(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new $e(new _l({eb:g})):new $e(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tg(){}t=Tg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(l,f){return new zt(l,f)};function zt(l,f){We.call(this),this.g=new pg(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!_(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new ns(this)}y(zt,We),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Eh(this.g)},zt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Yi(l),l=g);f.i.push(new sT(f.Ya++,l)),f.G==3&&Cl(f)},zt.prototype.N=function(){this.g.l=null,delete this.j,Eh(this.g),delete this.g,zt.aa.N.call(this)};function Ig(l){fr.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}y(Ig,fr);function Pg(){Ji.call(this),this.status=1}y(Pg,Ji);function ns(l){this.g=l}y(ns,Tg),ns.prototype.ua=function(){rt(this.g,"a")},ns.prototype.ta=function(l){rt(this.g,new Ig(l))},ns.prototype.sa=function(l){rt(this.g,new Pg)},ns.prototype.ra=function(){rt(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,wC=function(){return new Tl},_C=function(){return Vn()},yC=Zt,Cf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fl.NO_ERROR=0,fl.TIMEOUT=8,fl.HTTP_ERROR=6,vu=fl,$m.COMPLETE="complete",vC=$m,mo.EventType=dr,dr.OPEN="a",dr.CLOSE="b",dr.ERROR="c",dr.MESSAGE="d",We.prototype.listen=We.prototype.K,Go=mo,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,gC=$e}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const N_="@firebase/firestore",M_="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ro="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new Hp("@firebase/firestore");function ss(){return ji.logLevel}function K(t,...e){if(ji.logLevel<=ve.DEBUG){const n=e.map(nm);ji.debug(`Firestore (${ro}): ${t}`,...n)}}function rr(t,...e){if(ji.logLevel<=ve.ERROR){const n=e.map(nm);ji.error(`Firestore (${ro}): ${t}`,...n)}}function zs(t,...e){if(ji.logLevel<=ve.WARN){const n=e.map(nm);ji.warn(`Firestore (${ro}): ${t}`,...n)}}function nm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${ro}) INTERNAL ASSERTION FAILED: `+t;throw rr(e),new Error(e)}function Pe(t,e){t||oe()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class vM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yM{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new EC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new Et(e)}}class _M{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class wM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _M(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class O_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EM{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,en(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Pe(this.o===void 0);const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new O_(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new O_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=xM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function Sf(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return de(r,i);{const s=xC(),o=CM(s.encode(D_(t,n)),s.encode(D_(e,n)));return o!==0?o:de(r,i)}}n+=r>65535?2:1}return de(t.length,e.length)}function D_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function CM(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return de(t[n],e[n]);return de(t.length,e.length)}function Bs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=-62135596800,j_=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*j_);return new Je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<V_)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/j_}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-V_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Je(0,0))}static max(){return new ae(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="__name__";class Cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Cn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return de(e.length,n.length)}static compareSegments(e,n){const r=Cn.isNumericId(e),i=Cn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Cn.extractNumericId(e).compare(Cn.extractNumericId(n)):Sf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hr.fromString(e.substring(4,e.length-2))}}class Ne extends Cn{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const SM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends Cn{construct(e,n,r){return new ct(e,n,r)}static isValidIdentifier(e){return SM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U_}static keyField(){return new ct([U_])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(n)}static emptyPath(){return new ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Ne.fromString(e))}static fromName(e){return new ne(Ne.fromString(e).popFirst(5))}static empty(){return new ne(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=-1;function TM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new Kr(i,ne.empty(),e)}function IM(t){return new Kr(t.readTime,t.key,Ma)}class Kr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Kr(ae.min(),ne.empty(),Ma)}static max(){return new Kr(ae.max(),ne.empty(),Ma)}}function PM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==bM)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function LM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function so(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Hc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm=-1;function Wc(t){return t==null}function hc(t){return t===0&&1/t==-1/0}function RM(t){return typeof t=="number"&&Number.isInteger(t)&&!hc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="";function AM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=F_(e)),e=NM(t.get(n),e);return F_(e)}function NM(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case SC:n+="";break;default:n+=s}}return n}function F_(t){return t+SC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ai(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}}class Ql{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ut.RED,this.left=i??ut.EMPTY,this.right=s??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ut(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ut.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B_(this.data.getIterator())}getIteratorFrom(e){return new B_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class B_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new Wt([])}unionWith(e){let n=new et(ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new IC("Invalid base64 string: "+s):s}}(e);return new mt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const MM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(t){if(Pe(!!t),typeof t=="string"){let e=0;const n=MM.exec(t);if(Pe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="server_timestamp",bC="__type__",kC="__previous_value__",LC="__local_write_time__";function im(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[bC])===null||n===void 0?void 0:n.stringValue)===PC}function qc(t){const e=t.mapValue.fields[kC];return im(e)?qc(e):e}function Oa(t){const e=Qr(t.mapValue.fields[LC].timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}const dc="(default)";class Da{constructor(e,n){this.projectId=e,this.database=n||dc}static empty(){return new Da("","")}get isDefaultDatabase(){return this.database===dc}isEqual(e){return e instanceof Da&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="__type__",AC="__max__",Zl={mapValue:{fields:{__type__:{stringValue:AC}}}},NC="__vector__",fc="value";function Yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?im(t)?4:VM(t)?9007199254740991:DM(t)?10:11:oe()}function An(t,e){if(t===e)return!0;const n=Yr(t);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oa(t).isEqual(Oa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Qr(i.timestampValue),a=Qr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Zr(i.bytesValue).isEqual(Zr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return qe(i.geoPointValue.latitude)===qe(s.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return qe(i.integerValue)===qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=qe(i.doubleValue),a=qe(s.doubleValue);return o===a?hc(o)===hc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Bs(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(z_(o)!==z_(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!An(o[u],a[u])))return!1;return!0}(t,e);default:return oe()}}function Va(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function $s(t,e){if(t===e)return 0;const n=Yr(t),r=Yr(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=qe(s.integerValue||s.doubleValue),u=qe(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return $_(t.timestampValue,e.timestampValue);case 4:return $_(Oa(t),Oa(e));case 5:return Sf(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Zr(s),u=Zr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=de(a[c],u[c]);if(h!==0)return h}return de(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=de(qe(s.latitude),qe(o.latitude));return a!==0?a:de(qe(s.longitude),qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return H_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,c,h;const p=s.fields||{},m=o.fields||{},w=(a=p[fc])===null||a===void 0?void 0:a.arrayValue,y=(u=m[fc])===null||u===void 0?void 0:u.arrayValue,P=de(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:H_(w,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Zl.mapValue&&o===Zl.mapValue)return 0;if(s===Zl.mapValue)return 1;if(o===Zl.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=Sf(u[p],h[p]);if(m!==0)return m;const w=$s(a[u[p]],c[h[p]]);if(w!==0)return w}return de(u.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function $_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Qr(t),r=Qr(e),i=de(n.seconds,r.seconds);return i!==0?i:de(n.nanos,r.nanos)}function H_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=$s(n[i],r[i]);if(s)return s}return de(n.length,r.length)}function Hs(t){return Tf(t)}function Tf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Tf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Tf(n.fields[o])}`;return i+"}"}(t.mapValue):oe()}function yu(t){switch(Yr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qc(t);return e?16+yu(e):16;case 5:return 2*t.stringValue.length;case 6:return Zr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+yu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ai(r.fields,(s,o)=>{i+=s.length+yu(o)}),i}(t.mapValue);default:throw oe()}}function W_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function If(t){return!!t&&"integerValue"in t}function sm(t){return!!t&&"arrayValue"in t}function q_(t){return!!t&&"nullValue"in t}function G_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _u(t){return!!t&&"mapValue"in t}function DM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[RC])===null||n===void 0?void 0:n.stringValue)===NC}function la(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ai(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=la(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=la(t.arrayValue.values[n]);return e}return Object.assign({},t)}function VM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===AC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_u(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=la(n)}setAll(e){let n=ct.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=la(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());_u(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];_u(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ai(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mt(la(this.value))}}function MC(t){const e=[];return ai(t.fields,(n,r)=>{const i=new ct([n]);if(_u(r)){const s=MC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Wt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ct(e,0,ae.min(),ae.min(),ae.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ct(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new Ct(e,2,n,ae.min(),ae.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new Ct(e,3,n,ae.min(),ae.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.position=e,this.inclusive=n}}function K_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=$s(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Q_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n="asc"){this.field=e,this.dir=n}}function jM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{}class Ze extends OC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FM(e,n,r):n==="array-contains"?new $M(e,r):n==="in"?new HM(e,r):n==="not-in"?new WM(e,r):n==="array-contains-any"?new qM(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zM(e,r):new BM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($s(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison($s(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends OC{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new _n(e,n)}matches(e){return DC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function DC(t){return t.op==="and"}function VC(t){return UM(t)&&DC(t)}function UM(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function Pf(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+Hs(t.value);if(VC(t))return t.filters.map(e=>Pf(e)).join(",");{const e=t.filters.map(n=>Pf(n)).join(",");return`${t.op}(${e})`}}function jC(t,e){return t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&An(r.value,i.value)}(t,e):t instanceof _n?function(r,i){return i instanceof _n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&jC(o,i.filters[a]),!0):!1}(t,e):void oe()}function UC(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Hs(n.value)}`}(t):t instanceof _n?function(n){return n.op.toString()+" {"+n.getFilters().map(UC).join(" ,")+"}"}(t):"Filter"}class FM extends Ze{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class zM extends Ze{constructor(e,n){super(e,"in",n),this.keys=FC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class BM extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=FC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class $M extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sm(n)&&Va(n.arrayValue,this.value)}}class HM extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Va(this.value.arrayValue,n)}}class WM extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Va(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Va(this.value.arrayValue,n)}}class qM extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Va(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function Z_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new GM(t,e,n,r,i,s,o)}function om(t){const e=le(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Pf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Wc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hs(r)).join(",")),e.le=n}return e.le}function am(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Q_(t.startAt,e.startAt)&&Q_(t.endAt,e.endAt)}function bf(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function KM(t,e,n,r,i,s,o,a){return new oo(t,e,n,r,i,s,o,a)}function Gc(t){return new oo(t)}function Y_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zC(t){return t.collectionGroup!==null}function ua(t){const e=le(t);if(e.he===null){e.he=[];const n=new Set;for(const s of e.explicitOrderBy)e.he.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new et(ct.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.he.push(new ja(s,r))}),n.has(ct.keyField().canonicalString())||e.he.push(new ja(ct.keyField(),r))}return e.he}function kn(t){const e=le(t);return e.Pe||(e.Pe=QM(e,ua(t))),e.Pe}function QM(t,e){if(t.limitType==="F")return Z_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ja(i.field,s)});const n=t.endAt?new pc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pc(t.startAt.position,t.startAt.inclusive):null;return Z_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function kf(t,e){const n=t.filters.concat([e]);return new oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lf(t,e,n){return new oo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kc(t,e){return am(kn(t),kn(e))&&t.limitType===e.limitType}function BC(t){return`${om(kn(t))}|lt:${t.limitType}`}function os(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>UC(i)).join(", ")}]`),Wc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Hs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Hs(i)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function Qc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ua(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=K_(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,ua(r),i)||r.endAt&&!function(o,a,u){const c=K_(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,ua(r),i))}(t,e)}function ZM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $C(t){return(e,n)=>{let r=!1;for(const i of ua(t)){const s=YM(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function YM(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?$s(u,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ai(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return TC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=new ze(ne.comparator);function ir(){return XM}const HC=new ze(ne.comparator);function Ko(...t){let e=HC;for(const n of t)e=e.insert(n.key,n);return e}function WC(t){let e=HC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ii(){return ca()}function qC(){return ca()}function ca(){return new Hi(t=>t.toString(),(t,e)=>t.isEqual(e))}const JM=new ze(ne.comparator),eO=new et(ne.comparator);function ye(...t){let e=eO;for(const n of t)e=e.add(n);return e}const tO=new et(de);function nO(){return tO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function GC(t){return{integerValue:""+t}}function KC(t,e){return RM(e)?GC(e):lm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this._=void 0}}function rO(t,e,n){return t instanceof Ua?function(i,s){const o={fields:{[bC]:{stringValue:PC},[LC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&im(s)&&(s=qc(s)),s&&(o.fields[kC]=s),{mapValue:o}}(n,e):t instanceof Fa?ZC(t,e):t instanceof za?YC(t,e):function(i,s){const o=QC(i,s),a=X_(o)+X_(i.Ie);return If(o)&&If(i.Ie)?GC(a):lm(i.serializer,a)}(t,e)}function iO(t,e,n){return t instanceof Fa?ZC(t,e):t instanceof za?YC(t,e):n}function QC(t,e){return t instanceof Ba?function(r){return If(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ua extends Zc{}class Fa extends Zc{constructor(e){super(),this.elements=e}}function ZC(t,e){const n=XC(e);for(const r of t.elements)n.some(i=>An(i,r))||n.push(r);return{arrayValue:{values:n}}}class za extends Zc{constructor(e){super(),this.elements=e}}function YC(t,e){let n=XC(e);for(const r of t.elements)n=n.filter(i=>!An(i,r));return{arrayValue:{values:n}}}class Ba extends Zc{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function X_(t){return qe(t.integerValue||t.doubleValue)}function XC(t){return sm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n){this.field=e,this.transform=n}}function sO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Fa&&i instanceof Fa||r instanceof za&&i instanceof za?Bs(r.elements,i.elements,An):r instanceof Ba&&i instanceof Ba?An(r.Ie,i.Ie):r instanceof Ua&&i instanceof Ua}(t.transform,e.transform)}class oO{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yc{}function eS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new um(t.key,sn.none()):new il(t.key,t.data,sn.none());{const n=t.data,r=Mt.empty();let i=new et(ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new li(t.key,r,new Wt(i.toArray()),sn.none())}}function aO(t,e,n){t instanceof il?function(i,s,o){const a=i.value.clone(),u=e0(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof li?function(i,s,o){if(!wu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=e0(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(tS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ha(t,e,n,r){return t instanceof il?function(s,o,a,u){if(!wu(s.precondition,o))return a;const c=s.value.clone(),h=t0(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof li?function(s,o,a,u){if(!wu(s.precondition,o))return a;const c=t0(s.fieldTransforms,u,o),h=o.data;return h.setAll(tS(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return wu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function lO(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=QC(r.transform,i||null);s!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,s))}return n||null}function J_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bs(r,i,(s,o)=>sO(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class il extends Yc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class li extends Yc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function e0(t,e,n){const r=new Map;Pe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,iO(o,a,n[i]))}return r}function t0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,rO(s,o,e))}return r}class um extends Yc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uO extends Yc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&aO(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ha(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ha(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=qC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=eS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&Bs(this.mutations,e.mutations,(n,r)=>J_(n,r))&&Bs(this.baseMutations,e.baseMutations,(n,r)=>J_(n,r))}}class cm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Pe(e.mutations.length===r.length);let i=function(){return JM}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new cm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke,Ee;function fO(t){switch(t){case z.OK:return oe();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return oe()}}function nS(t){if(t===void 0)return rr("GRPC error has no .code"),z.UNKNOWN;switch(t){case Ke.OK:return z.OK;case Ke.CANCELLED:return z.CANCELLED;case Ke.UNKNOWN:return z.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return z.INTERNAL;case Ke.UNAVAILABLE:return z.UNAVAILABLE;case Ke.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Ke.NOT_FOUND:return z.NOT_FOUND;case Ke.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Ke.ABORTED:return z.ABORTED;case Ke.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Ke.DATA_LOSS:return z.DATA_LOSS;default:return oe()}}(Ee=Ke||(Ke={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=new Hr([4294967295,4294967295],0);function n0(t){const e=xC().encode(t),n=new mC;return n.update(e),new Uint8Array(n.digest())}function r0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hr([n,r],0),new Hr([i,s],0)]}class hm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qo(`Invalid padding: ${n}`);if(r<0)throw new Qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qo(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Hr.fromNumber(this.Ee)}Ae(e,n,r){let i=e.add(n.multiply(Hr.fromNumber(r)));return i.compare(pO)===1&&(i=new Hr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=n0(e),[r,i]=r0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);if(!this.Re(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new hm(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const n=n0(e),[r,i]=r0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(r,i,s);this.Ve(o)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,sl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xc(ae.min(),i,new ze(de),ir(),ye())}}class sl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new sl(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r,i){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=i}}class rS{constructor(e,n){this.targetId=e,this.ge=n}}class iS{constructor(e,n,r=mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class i0{constructor(){this.pe=0,this.ye=s0(),this.we=mt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=ye(),n=ye(),r=ye();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new sl(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=s0()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Pe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class mO{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ir(),this.$e=Yl(),this.Ue=Yl(),this.Ke=new ze(de)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,i)=>{this.Je(i)&&n(i)})}Ze(e){const n=e.targetId,r=e.ge.count,i=this.Xe(n);if(i){const s=i.target;if(bf(s))if(r===0){const o=new ne(s.path);this.ze(n,o,Ct.newNoDocument(o,ae.min()))}else Pe(r===1);else{const o=this.et(n);if(o!==r){const a=this.tt(e),u=a?this.nt(a,e,o):1;if(u!==0){this.Ye(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Zr(r).toUint8Array()}catch(u){if(u instanceof IC)return zs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new hm(o,i,s)}catch(u){return zs(u instanceof Qo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ee===0?null:a}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.ze(n,s,null),i++)}),i}ot(e){const n=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&bf(a.target)){const u=new ne(a.target.path);this._t(u).has(o)||this.ut(o,u)||this.ze(o,u,Ct.newNoDocument(u,e))}s.ve&&(n.set(o,s.Fe()),s.Me())}});let r=ye();this.Ue.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Xe(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(e));const i=new Xc(e,n,this.Ke,this.Qe,r);return this.Qe=ir(),this.$e=Yl(),this.Ue=Yl(),this.Ke=new ze(de),i}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,n)?i.xe(n,1):i.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new i0,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new et(de),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new et(de),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new i0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Yl(){return new ze(ne.comparator)}function s0(){return new ze(ne.comparator)}const gO=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),vO=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),yO=(()=>({and:"AND",or:"OR"}))();class _O{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rf(t,e){return t.useProto3Json||Wc(e)?e:{value:e}}function mc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function wO(t,e){return mc(t,e.toTimestamp())}function Ln(t){return Pe(!!t),ae.fromTimestamp(function(n){const r=Qr(n);return new Je(r.seconds,r.nanos)}(t))}function dm(t,e){return Af(t,e).canonicalString()}function Af(t,e){const n=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oS(t){const e=Ne.fromString(t);return Pe(hS(e)),e}function Nf(t,e){return dm(t.databaseId,e.path)}function hd(t,e){const n=oS(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(lS(n))}function aS(t,e){return dm(t.databaseId,e)}function EO(t){const e=oS(t);return e.length===4?Ne.emptyPath():lS(e)}function Mf(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lS(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function o0(t,e,n){return{name:Nf(t,e),fields:n.value.mapValue.fields}}function xO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Pe(h===void 0||typeof h=="string"),mt.fromBase64String(h||"")):(Pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),mt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?z.UNKNOWN:nS(c.code);return new Q(h,c.message||"")}(o);n=new iS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=hd(t,r.document.name),s=Ln(r.document.updateTime),o=r.document.createTime?Ln(r.document.createTime):ae.min(),a=new Mt({mapValue:{fields:r.document.fields}}),u=Ct.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Eu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=hd(t,r.document),s=r.readTime?Ln(r.readTime):ae.min(),o=Ct.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Eu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=hd(t,r.document),s=r.removedTargetIds||[];n=new Eu([],s,i,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new dO(i,s),a=r.targetId;n=new rS(a,o)}}return n}function CO(t,e){let n;if(e instanceof il)n={update:o0(t,e.key,e.value)};else if(e instanceof um)n={delete:Nf(t,e.key)};else if(e instanceof li)n={update:o0(t,e.key,e.data),updateMask:AO(e.fieldMask)};else{if(!(e instanceof uO))return oe();n={verify:Nf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ua)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Fa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof za)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ba)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:wO(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(t,e.precondition)),n}function SO(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ln(i.updateTime):Ln(s);return o.isEqual(ae.min())&&(o=Ln(s)),new oO(o,i.transformResults||[])}(n,e))):[]}function TO(t,e){return{documents:[aS(t,e.path)]}}function IO(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=aS(t,i);const s=function(c){if(c.length!==0)return cS(_n.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:as(m.field),direction:kO(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Rf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:n,parent:i}}function PO(t){let e=EO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pe(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const m=uS(p);return m instanceof _n&&VC(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(y){return new ja(ls(y.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Wc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,w=p.values||[];return new pc(w,m)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const m=!p.before,w=p.values||[];return new pc(w,m)}(n.endAt)),KM(e,i,o,s,a,"F",u,c)}function bO(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ls(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ls(n.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ls(n.unaryFilter.field);return Ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ls(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(ls(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _n.create(n.compositeFilter.filters.map(r=>uS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function kO(t){return gO[t]}function LO(t){return vO[t]}function RO(t){return yO[t]}function as(t){return{fieldPath:t.canonicalString()}}function ls(t){return ct.fromServerFormat(t.fieldPath)}function cS(t){return t instanceof Ze?function(n){if(n.op==="=="){if(G_(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NAN"}};if(q_(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(G_(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NAN"}};if(q_(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(n.field),op:LO(n.op),value:n.value}}}(t):t instanceof _n?function(n){const r=n.getFilters().map(i=>cS(i));return r.length===1?r[0]:{compositeFilter:{op:RO(n.op),filters:r}}}(t):oe()}function AO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.Tt=e}}function MO(t){const e=PO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.Tn=new DO}addToCollectionParentIndex(e,n){return this.Tn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Kr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Kr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class DO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new et(Ne.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new et(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dS=41943040;class At{static withCacheSize(e){return new At(e,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */At.DEFAULT_COLLECTION_PERCENTILE=10,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,At.DEFAULT=new At(dS,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),At.DISABLED=new At(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Ws(0)}static Kn(){return new Ws(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="LruGarbageCollector",VO=1048576;function u0([t,e],[n,r]){const i=de(t,n);return i===0?de(e,r):i}class jO{constructor(e){this.Hn=e,this.buffer=new et(u0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();u0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class UO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){K(l0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){so(n)?K(l0,"Ignoring IndexedDB error during garbage collection: ",n):await io(n)}await this.er(3e5)})}}class FO{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Hc.ae);const r=new jO(n);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(a0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a0):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,i,s,o,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),ss()<=ve.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function zO(t,e){return new FO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this.changes=new Hi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ha(r.mutation,i,Wt.empty(),Je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const i=Ii();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ko();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ir();const o=ca(),a=function(){return ca()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof li)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ha(h.mutation,c,h.mutation.getFieldMask(),Je.now())):o.set(c.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var p;return a.set(c,new $O(h,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ca();let i=new ze((o,a)=>o-a),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Wt.empty();h=a.applyToLocalView(c,h),r.set(u,h);const p=(i.get(a.batchId)||ye()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,p=qC();h.forEach(m=>{if(!s.has(m)){const w=eS(n.get(m),r.get(m));w!==null&&p.set(m,w),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):B.resolve(Ii());let a=Ma,u=s;return o.next(c=>B.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ye())).next(h=>({batchId:a,changes:WC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=Ko();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ko();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,u=>{const c=function(p,m){return new oo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Ct.newInvalidDocument(h)))});let a=Ko();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&ha(h.mutation,c,Wt.empty(),Je.now()),Qc(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return B.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ln(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(i){return{name:i.name,query:MO(i.bundledQuery),readTime:Ln(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.overlays=new ze(ne.comparator),this.Rr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ii();return B.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Et(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=Ii(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ze((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Ii(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ii(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return B.resolve(a)}Et(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hO(n,r));let s=this.Rr.get(n);s===void 0&&(s=ye(),this.Rr.set(n,s)),this.Rr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this.Vr=new et(it.mr),this.gr=new et(it.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new it(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new it(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new ne(new Ne([])),r=new it(n,e),i=new it(n,e+1),s=[];return this.gr.forEachInRange([r,i],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new ne(new Ne([])),r=new it(n,e),i=new it(n,e+1);let s=ye();return this.gr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new it(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class it{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return ne.comparator(e.key,n.key)||de(e.Cr,n.Cr)}static pr(e,n){return de(e.Cr,n.Cr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new et(it.mr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new cO(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Mr=this.Mr.add(new it(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Nr(r),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?rm:this.Fr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new it(n,0),i=new it(n,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,i],o=>{const a=this.Or(o.Cr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(de);return n.forEach(i=>{const s=new it(i,0),o=new it(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{r=r.add(a.Cr)})}),B.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new it(new ne(s),0);let a=new et(de);return this.Mr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.Cr)),!0)},o),B.resolve(this.Br(a))}Br(e){const n=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Pe(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return B.forEach(n.mutations,i=>{const s=new it(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new it(n,0),i=this.Mr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.kr=e,this.docs=function(){return new ze(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Ct.newInvalidDocument(n))}getEntries(e,n){let r=ir();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ct.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ir();const o=n.path,a=new ne(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||PM(IM(h),r)<=0||(i.has(h.key)||Qc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,r,i){oe()}qr(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ZO(this)}getSize(e){return B.resolve(this.size)}}class ZO extends BO{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e){this.persistence=e,this.Qr=new Hi(n=>om(n),am),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.$r=0,this.Ur=new fm,this.targetCount=0,this.Kr=Ws.Un()}forEachTarget(e,n){return this.Qr.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),B.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Ws(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.zn(n),B.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Hc(0),this.zr=!1,this.zr=!0,this.jr=new GO,this.referenceDelegate=e(this),this.Hr=new YO(this),this.indexManager=new OO,this.remoteDocumentCache=function(i){return new QO(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new NO(n),this.Yr=new WO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new KO(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new XO(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,n){return B.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class XO extends kM{constructor(e){super(),this.currentSequenceNumber=e}}class pm{constructor(e){this.persistence=e,this.ti=new fm,this.ni=null}static ri(e){return new pm(e)}get ii(){if(this.ni)return this.ni;throw oe()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),B.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.ii,r=>{const i=ne.fromPath(r);return this.si(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return B.or([()=>B.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class gc{constructor(e,n){this.persistence=e,this.oi=new Hi(r=>AM(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=zO(this,n)}static ri(e,n){return new gc(e,n)}Zr(){}Xr(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return B.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(s=>s?B.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,o=>this.ar(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ae.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),B.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yu(e.data.value)),n}ar(e,n,r){return B.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.oi.get(n);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=i}static Yi(e,n){let r=ye(),i=ye();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return VL()?8:LM(It())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.rs(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new JO;return this._s(e,n,o).next(a=>{if(s.result=a,this.Xi)return this.us(e,n,o,a.size)})}).next(()=>s.result)}us(e,n,r,i){return r.documentReadCount<this.es?(ss()<=ve.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),B.resolve()):(ss()<=ve.DEBUG&&K("QueryEngine","Query:",os(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(ss()<=ve.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):B.resolve())}rs(e,n){if(Y_(n))return B.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Lf(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ye(...s);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.cs(n,a);return this.ls(n,c,o,u.readTime)?this.rs(e,Lf(n,null,"F")):this.hs(e,c,n,u)}))})))}ss(e,n,r,i){return Y_(n)||i.isEqual(ae.min())?B.resolve(null):this.ns.getDocuments(e,r).next(s=>{const o=this.cs(n,s);return this.ls(n,o,r,i)?B.resolve(null):(ss()<=ve.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),os(n)),this.hs(e,o,n,TM(i,Ma)).next(a=>a))})}cs(e,n){let r=new et($C(e));return n.forEach((i,s)=>{Qc(e,s)&&(r=r.add(s))}),r}ls(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,n,r){return ss()<=ve.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",os(n)),this.ns.getDocumentsMatchingQuery(e,n,Kr.min(),r)}hs(e,n,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="LocalStore",tD=3e8;class nD{constructor(e,n,r,i){this.persistence=e,this.Ps=n,this.serializer=i,this.Ts=new ze(de),this.Is=new Hi(s=>om(s),am),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HO(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function rD(t,e,n,r){return new nD(t,e,n,r)}async function pS(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ye();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function iD(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ds.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const p=c.batch,m=p.keys();let w=B.resolve();return m.forEach(y=>{w=w.next(()=>h.getEntry(u,y)).next(P=>{const k=c.docVersions.get(y);Pe(k!==null),P.version.compareTo(k)<0&&(p.applyToRemoteDocument(P,c),P.isValidDocument()&&(P.setReadTime(c.commitVersion),h.addEntry(P)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function mS(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function sD(t,e){const n=le(t),r=e.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const a=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;a.push(n.Hr.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Hr.addMatchingKeys(s,h.addedDocuments,p)));let w=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(mt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),i=i.insert(p,w),function(P,k,C){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=tD?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(m,w,h)&&a.push(n.Hr.updateTargetData(s,w))});let u=ir(),c=ye();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(oD(s,o,e.documentUpdates).next(h=>{u=h.Vs,c=h.fs})),!r.isEqual(ae.min())){const h=n.Hr.getLastRemoteSnapshotVersion(s).next(p=>n.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ts=i,s))}function oD(t,e,n){let r=ye(),i=ye();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ir();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ae.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):K(gm,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Vs:o,fs:i}})}function aD(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=rm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lD(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Hr.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):n.Hr.allocateTargetId(r).next(o=>(i=new Ar(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function Of(t,e,n){const r=le(t),i=r.Ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!so(o))throw o;K(gm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function c0(t,e,n){const r=le(t);let i=ae.min(),s=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const p=le(u),m=p.Is.get(h);return m!==void 0?B.resolve(p.Ts.get(m)):p.Hr.getTargetData(c,h)}(r,o,kn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:ye())).next(a=>(uD(r,ZM(e),a),{documents:a,gs:s})))}function uD(t,e,n){let r=t.Es.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Es.set(e,r)}class h0{constructor(){this.activeTargetIds=nO()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cD{constructor(){this.ho=new h0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new h0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="ConnectivityMonitor";class f0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){K(d0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){K(d0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl=null;function Df(){return Xl===null?Xl=function(){return 268435456+Math.round(2147483648*Math.random())}():Xl++,"0x"+Xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="RestConnection",dD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fD{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===dc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,n,r,i,s){const o=Df(),a=this.bo(e,n.toUriEncodedString());K(dd,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,i,s),this.vo(e,a,u,r).then(c=>(K(dd,`Received RPC '${e}' ${o}: `,c),c),c=>{throw zs(dd,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}Co(e,n,r,i,s,o){return this.So(e,n,r,i,s)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ro}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}bo(e,n){const r=dD[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class mD extends fD{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,i){const s=Df();return new Promise((o,a)=>{const u=new gC;u.setWithCredentials(!0),u.listenOnce(vC.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case vu.NO_ERROR:const h=u.getResponseJson();K(wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case vu.TIMEOUT:K(wt,`RPC '${e}' ${s} timed out`),a(new Q(z.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:const p=u.getStatus();if(K(wt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m==null?void 0:m.error;if(w&&w.status&&w.message){const y=function(k){const C=k.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(C)>=0?C:z.UNKNOWN}(w.status);a(new Q(y,w.message))}else a(new Q(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Q(z.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{K(wt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);K(wt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Wo(e,n,r){const i=Df(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wC(),a=_C(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");K(wt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=o.createWebChannel(h,u);let m=!1,w=!1;const y=new pD({Fo:k=>{w?K(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(m||(K(wt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),K(wt,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},Mo:()=>p.close()}),P=(k,C,_)=>{k.listen(C,I=>{try{_(I)}catch(A){setTimeout(()=>{throw A},0)}})};return P(p,Go.EventType.OPEN,()=>{w||(K(wt,`RPC '${e}' stream ${i} transport opened.`),y.Qo())}),P(p,Go.EventType.CLOSE,()=>{w||(w=!0,K(wt,`RPC '${e}' stream ${i} transport closed`),y.Uo())}),P(p,Go.EventType.ERROR,k=>{w||(w=!0,zs(wt,`RPC '${e}' stream ${i} transport errored:`,k),y.Uo(new Q(z.UNAVAILABLE,"The operation could not be completed")))}),P(p,Go.EventType.MESSAGE,k=>{var C;if(!w){const _=k.data[0];Pe(!!_);const I=_,A=(I==null?void 0:I.error)||((C=I[0])===null||C===void 0?void 0:C.error);if(A){K(wt,`RPC '${e}' stream ${i} received error:`,A);const N=A.status;let O=function(E){const b=Ke[E];if(b!==void 0)return nS(b)}(N),S=A.message;O===void 0&&(O=z.INTERNAL,S="Unknown error status: "+N+" with message "+A.message),w=!0,y.Uo(new Q(O,S)),p.close()}else K(wt,`RPC '${e}' stream ${i} received:`,_),y.Ko(_)}}),P(a,yC.STAT_EVENT,k=>{k.stat===Cf.PROXY?K(wt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Cf.NOPROXY&&K(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.$o()},0),y}}function fd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t){return new _O(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="PersistentStream";class vS{constructor(e,n,r,i,s,o,a,u){this.Ti=e,this.n_=r,this.r_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new gS(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(rr(n.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===n&&this.V_(r,i)},r=>{e(()=>{const i=new Q(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return K(p0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(K(p0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gD extends vS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=xO(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?Ln(o.readTime):ae.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=Mf(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=bf(u)?{documents:TO(s,u)}:{query:IO(s,u).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sS(s,o.resumeToken);const c=Rf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=mc(s,o.snapshotVersion.toTimestamp());const c=Rf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=bO(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=Mf(this.serializer),n.removeTarget=e,this.I_(n)}}class vD extends vS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=SO(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=Mf(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>CO(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{}class _D extends yD{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Af(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(z.UNKNOWN,s.toString())})}Co(e,n,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,Af(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(z.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class wD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(rr(n),this.N_=!1):K("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="RemoteStore";class ED{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{r.enqueueAndForget(async()=>{Wi(this)&&(K(Ui,"Restarting streams for network reachability change."),await async function(u){const c=le(u);c.W_.add(4),await ol(c),c.j_.set("Unknown"),c.W_.delete(4),await eh(c)}(this))})}),this.j_=new wD(r,i)}}async function eh(t){if(Wi(t))for(const e of t.G_)await e(!0)}async function ol(t){for(const e of t.G_)await e(!1)}function yS(t,e){const n=le(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),wm(n)?_m(n):ao(n).c_()&&ym(n,e))}function vm(t,e){const n=le(t),r=ao(n);n.K_.delete(e),r.c_()&&_S(n,e),n.K_.size===0&&(r.c_()?r.P_():Wi(n)&&n.j_.set("Unknown"))}function ym(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ao(t).y_(e)}function _S(t,e){t.H_.Ne(e),ao(t).w_(e)}function _m(t){t.H_=new mO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),ao(t).start(),t.j_.B_()}function wm(t){return Wi(t)&&!ao(t).u_()&&t.K_.size>0}function Wi(t){return le(t).W_.size===0}function wS(t){t.H_=void 0}async function xD(t){t.j_.set("Online")}async function CD(t){t.K_.forEach((e,n)=>{ym(t,e)})}async function SD(t,e){wS(t),wm(t)?(t.j_.q_(e),_m(t)):t.j_.set("Unknown")}async function TD(t,e,n){if(t.j_.set("Online"),e instanceof iS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.K_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.K_.delete(a),i.H_.removeTarget(a))}(t,e)}catch(r){K(Ui,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vc(t,r)}else if(e instanceof Eu?t.H_.We(e):e instanceof rS?t.H_.Ze(e):t.H_.je(e),!n.isEqual(ae.min()))try{const r=await mS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.K_.get(c);h&&s.K_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=s.K_.get(u);if(!h)return;s.K_.set(u,h.withResumeToken(mt.EMPTY_BYTE_STRING,h.snapshotVersion)),_S(s,u);const p=new Ar(h.target,u,c,h.sequenceNumber);ym(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){K(Ui,"Failed to raise snapshot:",r),await vc(t,r)}}async function vc(t,e,n){if(!so(e))throw e;t.W_.add(1),await ol(t),t.j_.set("Offline"),n||(n=()=>mS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(Ui,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await eh(t)})}function ES(t,e){return e().catch(n=>vc(t,n,e))}async function th(t){const e=le(t),n=Xr(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:rm;for(;ID(e);)try{const i=await aD(e.localStore,r);if(i===null){e.U_.length===0&&n.P_();break}r=i.batchId,PD(e,i)}catch(i){await vc(e,i)}xS(e)&&CS(e)}function ID(t){return Wi(t)&&t.U_.length<10}function PD(t,e){t.U_.push(e);const n=Xr(t);n.c_()&&n.S_&&n.b_(e.mutations)}function xS(t){return Wi(t)&&!Xr(t).u_()&&t.U_.length>0}function CS(t){Xr(t).start()}async function bD(t){Xr(t).C_()}async function kD(t){const e=Xr(t);for(const n of t.U_)e.b_(n.mutations)}async function LD(t,e,n){const r=t.U_.shift(),i=cm.from(r,e,n);await ES(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await th(t)}async function RD(t,e){e&&Xr(t).S_&&await async function(r,i){if(function(o){return fO(o)&&o!==z.ABORTED}(i.code)){const s=r.U_.shift();Xr(r).h_(),await ES(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await th(r)}}(t,e),xS(t)&&CS(t)}async function m0(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),K(Ui,"RemoteStore received new credentials");const r=Wi(n);n.W_.add(3),await ol(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await eh(n)}async function AD(t,e){const n=le(t);e?(n.W_.delete(2),await eh(n)):e||(n.W_.add(2),await ol(n),n.j_.set("Unknown"))}function ao(t){return t.J_||(t.J_=function(n,r,i){const s=le(n);return s.M_(),new gD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{xo:xD.bind(null,t),No:CD.bind(null,t),Lo:SD.bind(null,t),p_:TD.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),wm(t)?_m(t):t.j_.set("Unknown")):(await t.J_.stop(),wS(t))})),t.J_}function Xr(t){return t.Y_||(t.Y_=function(n,r,i){const s=le(n);return s.M_(),new vD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:bD.bind(null,t),Lo:RD.bind(null,t),D_:kD.bind(null,t),v_:LD.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await th(t)):(await t.Y_.stop(),t.U_.length>0&&(K(Ui,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Em(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xm(t,e){if(rr("AsyncQueue",`${e}: ${t}`),so(t))return new Q(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{static emptySet(e){return new As(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Ko(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof As)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new As;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this.Z_=new ze(ne.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):oe():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class qs{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new qs(e,n,As.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class MD{constructor(){this.queries=v0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const i=le(n),s=i.queries;i.queries=v0(),s.forEach((o,a)=>{for(const u of a.ta)u.onError(r)})})(this,new Q(z.ABORTED,"Firestore shutting down"))}}function v0(){return new Hi(t=>BC(t),Kc)}async function Cm(t,e){const n=le(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.na()&&e.ra()&&(r=2):(s=new ND,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await n.onListen(i,!0);break;case 1:s.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=xm(o,`Initialization of query '${os(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.ta.push(e),e.sa(n.onlineState),s.ea&&e.oa(s.ea)&&Tm(n)}async function Sm(t,e){const n=le(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.ta.indexOf(e);o>=0&&(s.ta.splice(o,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function OD(t,e){const n=le(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.ta)a.oa(i)&&(r=!0);o.ea=i}}r&&Tm(n)}function DD(t,e,n){const r=le(t),i=r.queries.get(e);if(i)for(const s of i.ta)s.onError(n);r.queries.delete(e)}function Tm(t){t.ia.forEach(e=>{e.next()})}var Vf,y0;(y0=Vf||(Vf={}))._a="default",y0.Cache="cache";class Im{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new qs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Vf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.key=e}}class TS{constructor(e){this.key=e}}class VD{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ye(),this.mutatedKeys=ye(),this.ya=$C(e),this.wa=new As(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new g0,i=n?n.wa:this.wa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),w=Qc(this.query,p)?p:null,y=!!m&&this.mutatedKeys.has(m.key),P=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let k=!1;m&&w?m.data.isEqual(w.data)?y!==P&&(r.track({type:3,doc:w}),k=!0):this.va(m,w)||(r.track({type:2,doc:w}),k=!0,(u&&this.ya(w,u)>0||c&&this.ya(w,c)<0)&&(a=!0)):!m&&w?(r.track({type:0,doc:w}),k=!0):m&&!w&&(r.track({type:1,doc:m}),k=!0,(u||c)&&(a=!0)),k&&(w?(o=o.add(w),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{wa:o,Da:r,ls:a,mutatedKeys:s}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((h,p)=>function(w,y){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return P(w)-P(y)}(h.type,p.type)||this.ya(h.doc,p.doc)),this.Ca(r),i=i!=null&&i;const a=n&&!i?this.Fa():[],u=this.pa.size===0&&this.current&&!i?1:0,c=u!==this.ga;return this.ga=u,o.length!==0||c?{snapshot:new qs(this.query,e.wa,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new g0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ye(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new TS(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new SS(r))}),n}Oa(e){this.fa=e.gs,this.pa=ye();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return qs.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Pm="SyncEngine";class jD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UD{constructor(e){this.key=e,this.Ba=!1}}class FD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Hi(a=>BC(a),Kc),this.qa=new Map,this.Qa=new Set,this.$a=new ze(ne.comparator),this.Ua=new Map,this.Ka=new fm,this.Wa={},this.Ga=new Map,this.za=Ws.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function zD(t,e,n=!0){const r=RS(t);let i;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await IS(r,e,n,!0),i}async function BD(t,e){const n=RS(t);await IS(n,e,!0,!1)}async function IS(t,e,n,r){const i=await lD(t.localStore,kn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await $D(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&yS(t.remoteStore,i),a}async function $D(t,e,n,r,i){t.Ha=(p,m,w)=>async function(P,k,C,_){let I=k.view.ba(C);I.ls&&(I=await c0(P.localStore,k.query,!1).then(({documents:S})=>k.view.ba(S,I)));const A=_&&_.targetChanges.get(k.targetId),N=_&&_.targetMismatches.get(k.targetId)!=null,O=k.view.applyChanges(I,P.isPrimaryClient,A,N);return w0(P,k.targetId,O.Ma),O.snapshot}(t,p,m,w);const s=await c0(t.localStore,e,!0),o=new VD(e,s.gs),a=o.ba(s.documents),u=sl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);w0(t,n,c.Ma);const h=new jD(e,n,o);return t.ka.set(e,h),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),c.snapshot}async function HD(t,e,n){const r=le(t),i=r.ka.get(e),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(o=>!Kc(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Of(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vm(r.remoteStore,i.targetId),jf(r,i.targetId)}).catch(io)):(jf(r,i.targetId),await Of(r.localStore,i.targetId,!0))}async function WD(t,e){const n=le(t),r=n.ka.get(e),i=n.qa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vm(n.remoteStore,r.targetId))}async function qD(t,e,n){const r=JD(t);try{const i=await function(o,a){const u=le(o),c=Je.now(),h=a.reduce((w,y)=>w.add(y.key),ye());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let y=ir(),P=ye();return u.ds.getEntries(w,h).next(k=>{y=k,y.forEach((C,_)=>{_.isValidDocument()||(P=P.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,y)).next(k=>{p=k;const C=[];for(const _ of a){const I=lO(_,p.get(_.key).overlayedDocument);I!=null&&C.push(new li(_.key,I,MC(I.value.mapValue),sn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,c,C,a)}).next(k=>{m=k;const C=k.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(w,k.batchId,C)})}).then(()=>({batchId:m.batchId,changes:WC(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Wa[o.currentUser.toKey()];c||(c=new ze(de)),c=c.insert(a,u),o.Wa[o.currentUser.toKey()]=c}(r,i.batchId,n),await al(r,i.changes),await th(r.remoteStore)}catch(i){const s=xm(i,"Failed to persist write");n.reject(s)}}async function PS(t,e){const n=le(t);try{const r=await sD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ua.get(s);o&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ba=!0:i.modifiedDocuments.size>0?Pe(o.Ba):i.removedDocuments.size>0&&(Pe(o.Ba),o.Ba=!1))}),await al(n,r,e)}catch(r){await io(r)}}function _0(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ka.forEach((s,o)=>{const a=o.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=le(o);u.onlineState=a;let c=!1;u.queries.forEach((h,p)=>{for(const m of p.ta)m.sa(a)&&(c=!0)}),c&&Tm(u)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function GD(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ua.get(e),s=i&&i.key;if(s){let o=new ze(ne.comparator);o=o.insert(s,Ct.newNoDocument(s,ae.min()));const a=ye().add(s),u=new Xc(ae.min(),new Map,new ze(de),o,a);await PS(r,u),r.$a=r.$a.remove(s),r.Ua.delete(e),bm(r)}else await Of(r.localStore,e,!1).then(()=>jf(r,e,n)).catch(io)}async function KD(t,e){const n=le(t),r=e.batch.batchId;try{const i=await iD(n.localStore,e);kS(n,r,null),bS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await al(n,i)}catch(i){await io(i)}}async function QD(t,e,n){const r=le(t);try{const i=await function(o,a){const u=le(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(p=>(Pe(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);kS(r,e,n),bS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await al(r,i)}catch(i){await io(i)}}function bS(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function kS(t,e,n){const r=le(t);let i=r.Wa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function jf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||LS(t,r)})}function LS(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(vm(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),bm(t))}function w0(t,e,n){for(const r of n)r instanceof SS?(t.Ka.addReference(r.key,e),ZD(t,r)):r instanceof TS?(K(Pm,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||LS(t,r.key)):oe()}function ZD(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(K(Pm,"New document in limbo: "+n),t.Qa.add(r),bm(t))}function bm(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new ne(Ne.fromString(e)),r=t.za.next();t.Ua.set(r,new UD(n)),t.$a=t.$a.insert(n,r),yS(t.remoteStore,new Ar(kn(Gc(n.path)),r,"TargetPurposeLimboResolution",Hc.ae))}}async function al(t,e,n){const r=le(t),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach((a,u)=>{o.push(r.Ha(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){i.push(c);const p=mm.Yi(u.targetId,c);s.push(p)}}))}),await Promise.all(o),r.La.p_(i),await async function(u,c){const h=le(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(c,m=>B.forEach(m.Hi,w=>h.persistence.referenceDelegate.addReference(p,m.targetId,w)).next(()=>B.forEach(m.Ji,w=>h.persistence.referenceDelegate.removeReference(p,m.targetId,w)))))}catch(p){if(!so(p))throw p;K(gm,"Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const w=h.Ts.get(m),y=w.snapshotVersion,P=w.withLastLimboFreeSnapshotVersion(y);h.Ts=h.Ts.insert(m,P)}}}(r.localStore,s))}async function YD(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){K(Pm,"User change. New user:",e.toKey());const r=await pS(n.localStore,e);n.currentUser=e,function(s,o){s.Ga.forEach(a=>{a.forEach(u=>{u.reject(new Q(z.CANCELLED,o))})}),s.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await al(n,r.Rs)}}function XD(t,e){const n=le(t),r=n.Ua.get(e);if(r&&r.Ba)return ye().add(r.key);{let i=ye();const s=n.qa.get(e);if(!s)return i;for(const o of s){const a=n.ka.get(o);i=i.unionWith(a.view.Sa)}return i}}function RS(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GD.bind(null,e),e.La.p_=OD.bind(null,e.eventManager),e.La.Ja=DD.bind(null,e.eventManager),e}function JD(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QD.bind(null,e),e}class yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return rD(this.persistence,new eD,e.initialUser,this.serializer)}Xa(e){return new fS(pm.ri,this.serializer)}Za(e){return new cD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yc.provider={build:()=>new yc};class e2 extends yc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){Pe(this.persistence.referenceDelegate instanceof gc);const r=this.persistence.referenceDelegate.garbageCollector;return new UO(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?At.withCacheSize(this.cacheSizeBytes):At.DEFAULT;return new fS(r=>gc.ri(r,n),this.serializer)}}class Uf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YD.bind(null,this.syncEngine),await AD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MD}()}createDatastore(e){const n=Jc(e.databaseInfo.databaseId),r=function(s){return new mD(s)}(e.databaseInfo);return function(s,o,a,u){return new _D(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new ED(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>_0(this.syncEngine,n,0),function(){return f0.D()?new f0:new hD}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,h){const p=new FD(i,s,o,a,u,c);return h&&(p.ja=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=le(i);K(Ui,"RemoteStore shutting down."),s.W_.add(5),await ol(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Uf.provider={build:()=>new Uf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="FirestoreClient";class t2{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=CC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{K(Jr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(Jr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function pd(t,e){t.asyncQueue.verifyOperationInProgress(),K(Jr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function E0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await n2(t);K(Jr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>m0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>m0(e.remoteStore,i)),t._onlineComponents=e}async function n2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(Jr,"Using user provided OfflineComponentProvider");try{await pd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;zs("Error using user provided cache. Falling back to memory cache: "+n),await pd(t,new yc)}}else K(Jr,"Using default OfflineComponentProvider"),await pd(t,new e2(void 0));return t._offlineComponents}async function AS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(Jr,"Using user provided OnlineComponentProvider"),await E0(t,t._uninitializedComponentsProvider._online)):(K(Jr,"Using default OnlineComponentProvider"),await E0(t,new Uf))),t._onlineComponents}function r2(t){return AS(t).then(e=>e.syncEngine)}async function _c(t){const e=await AS(t),n=e.eventManager;return n.onListen=zD.bind(null,e.syncEngine),n.onUnlisten=HD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=BD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=WD.bind(null,e.syncEngine),n}function i2(t,e,n={}){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new km({next:m=>{h.su(),o.enqueueAndForget(()=>Sm(s,p));const w=m.docs.has(a);!w&&m.fromCache?c.reject(new Q(z.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&m.fromCache&&u&&u.source==="server"?c.reject(new Q(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new Im(Gc(a.path),h,{includeMetadataChanges:!0,Ta:!0});return Cm(s,p)}(await _c(t),t.asyncQueue,e,n,r)),r.promise}function s2(t,e,n={}){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const h=new km({next:m=>{h.su(),o.enqueueAndForget(()=>Sm(s,p)),m.fromCache&&u.source==="server"?c.reject(new Q(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new Im(a,h,{includeMetadataChanges:!0,Ta:!0});return Cm(s,p)}(await _c(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t,e,n){if(!n)throw new Q(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function o2(t,e,n,r){if(e===!0&&r===!0)throw new Q(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function C0(t){if(!ne.isDocumentKey(t))throw new Q(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function S0(t){if(ne.isDocumentKey(t))throw new Q(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Ut(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nh(t);throw new Q(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="firestore.googleapis.com",T0=!0;class I0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OS,this.ssl=T0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:T0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VO)throw new Q(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}o2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new I0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new I0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gM;switch(r.type){case"firstParty":return new wM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=x0.get(n);r&&(K("ComponentProvider","Removing Datastore"),x0.delete(n),r.terminate())}(this),Promise.resolve()}}function a2(t,e,n,r={}){var i;const s=(t=Ut(t,rh))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;s.host!==OS&&s.host!==a&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!Mi(u,o)&&(t._setSettings(u),r.mockUserToken)){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=Et.MOCK_USER;else{c=LL(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Q(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Et(p)}t._authCredentials=new vM(new EC(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ui(this.firestore,e,this._query)}}class St{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}}class Wr extends ui{constructor(e,n,r){super(e,n,Gc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new ne(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function ei(t,e,...n){if(t=nt(t),MS("collection","path",e),t instanceof rh){const r=Ne.fromString(e,...n);return S0(r),new Wr(t,null,r)}{if(!(t instanceof St||t instanceof Wr))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return S0(r),new Wr(t.firestore,null,r)}}function dt(t,e,...n){if(t=nt(t),arguments.length===1&&(e=CC.newId()),MS("doc","path",e),t instanceof rh){const r=Ne.fromString(e,...n);return C0(r),new St(t,null,new ne(r))}{if(!(t instanceof St||t instanceof Wr))throw new Q(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return C0(r),new St(t.firestore,t instanceof Wr?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="AsyncQueue";class b0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new gS(this,"async_queue_retry"),this.Su=()=>{const r=fd();r&&K(P0,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=fd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=fd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Qn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!so(e))throw e;K(P0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw rr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const i=Em.createAndSchedule(this,e,n,r,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&oe()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function k0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class sr extends rh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new b0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b0(e),this._firestoreClient=void 0,await e}}}function l2(t,e){const n=typeof t=="object"?t:Ax(),r=typeof t=="string"?t:e||dc,i=qp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=bL("firestore");s&&a2(i,...s)}return i}function ih(t){if(t._terminated)throw new Q(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||u2(t),t._firestoreClient}function u2(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,c,h){return new OM(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,NS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new t2(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gs(mt.fromBase64String(e))}catch(n){throw new Q(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gs(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=/^__.*__$/;class h2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,n,this.fieldTransforms):new il(e,this.data,n,this.fieldTransforms)}}class DS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new li(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function VS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class Am{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Am(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return wc(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(VS(this.Lu)&&c2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class d2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Jc(e)}ju(e,n,r,i=!1){return new Am({Lu:e,methodName:n,zu:r,path:ct.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oh(t){const e=t._freezeSettings(),n=Jc(t._databaseId);return new d2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jS(t,e,n,r,i,s={}){const o=t.ju(s.merge||s.mergeFields?2:0,e,n,i);Om("Data must be an object, but it was:",o,r);const a=US(r,o);let u,c;if(s.merge)u=new Wt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const m=Ff(e,p,n);if(!o.contains(m))throw new Q(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);zS(h,m)||h.push(m)}u=new Wt(h),c=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=o.fieldTransforms;return new h2(new Mt(a),u,c)}class ah extends ll{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ah}}class Nm extends ll{_toFieldTransform(e){return new JC(e.path,new Ua)}isEqual(e){return e instanceof Nm}}class Mm extends ll{constructor(e,n){super(e),this.Ju=n}_toFieldTransform(e){const n=new Ba(e.serializer,KC(e.serializer,this.Ju));return new JC(e.path,n)}isEqual(e){return e instanceof Mm&&this.Ju===e.Ju}}function f2(t,e,n,r){const i=t.ju(1,e,n);Om("Data must be an object, but it was:",i,r);const s=[],o=Mt.empty();ai(r,(u,c)=>{const h=Dm(e,u,n);c=nt(c);const p=i.Uu(h);if(c instanceof ah)s.push(h);else{const m=ul(c,p);m!=null&&(s.push(h),o.set(h,m))}});const a=new Wt(s);return new DS(o,a,i.fieldTransforms)}function p2(t,e,n,r,i,s){const o=t.ju(1,e,n),a=[Ff(e,r,n)],u=[i];if(s.length%2!=0)throw new Q(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Ff(e,s[m])),u.push(s[m+1]);const c=[],h=Mt.empty();for(let m=a.length-1;m>=0;--m)if(!zS(c,a[m])){const w=a[m];let y=u[m];y=nt(y);const P=o.Uu(w);if(y instanceof ah)c.push(w);else{const k=ul(y,P);k!=null&&(c.push(w),h.set(w,k))}}const p=new Wt(c);return new DS(h,p,o.fieldTransforms)}function m2(t,e,n,r=!1){return ul(n,t.ju(r?4:3,e))}function ul(t,e){if(FS(t=nt(t)))return Om("Unsupported field value:",e,t),US(t,e);if(t instanceof ll)return function(r,i){if(!VS(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=ul(a,i.Ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Je.fromDate(r);return{timestampValue:mc(i.serializer,s)}}if(r instanceof Je){const s=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mc(i.serializer,s)}}if(r instanceof Lm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gs)return{bytesValue:sS(i.serializer,r._byteString)};if(r instanceof St){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Rm)return function(o,a){return{mapValue:{fields:{[RC]:{stringValue:NC},[fc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return lm(a.serializer,c)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${nh(r)}`)}(t,e)}function US(t,e){const n={};return TC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ai(t,(r,i)=>{const s=ul(i,e.qu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function FS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof Lm||t instanceof Gs||t instanceof St||t instanceof ll||t instanceof Rm)}function Om(t,e,n){if(!FS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=nh(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function Ff(t,e,n){if((e=nt(e))instanceof sh)return e._internalPath;if(typeof e=="string")return Dm(t,e);throw wc("Field path arguments must be of type string or ",t,!1,void 0,n)}const g2=new RegExp("[~\\*/\\[\\]]");function Dm(t,e,n){if(e.search(g2)>=0)throw wc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sh(...e.split("."))._internalPath}catch{throw wc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Q(z.INVALID_ARGUMENT,a+t+u)}function zS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class v2 extends BS{data(){return super.data()}}function lh(t,e){return typeof e=="string"?Dm(t,e):e instanceof sh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vm{}class HS extends Vm{}function uh(t,e,...n){let r=[];e instanceof Vm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof jm).length,a=s.filter(u=>u instanceof ch).length;if(o>1||o>0&&a>0)throw new Q(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ch extends HS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ch(e,n,r)}_apply(e){const n=this._parse(e);return WS(e._query,n),new ui(e.firestore,e.converter,kf(e._query,n))}_parse(e){const n=oh(e.firestore);return function(s,o,a,u,c,h,p){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Q(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){R0(p,h);const y=[];for(const P of p)y.push(L0(u,s,P));m={arrayValue:{values:y}}}else m=L0(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||R0(p,h),m=m2(a,o,p,h==="in"||h==="not-in");return Ze.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ks(t,e,n){const r=e,i=lh("where",t);return ch._create(i,r,n)}class jm extends Vm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)WS(o,u),o=kf(o,u)}(e._query,n),new ui(e.firestore,e.converter,kf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Um extends HS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Um(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Q(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Q(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ja(s,o)}(e._query,this._field,this._direction);return new ui(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new oo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function y2(t,e="asc"){const n=e,r=lh("orderBy",t);return Um._create(r,n)}function L0(t,e,n){if(typeof(n=nt(n))=="string"){if(n==="")throw new Q(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zC(e)&&n.indexOf("/")!==-1)throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!ne.isDocumentKey(r))throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return W_(t,new ne(r))}if(n instanceof St)return W_(t,n._key);throw new Q(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nh(n)}.`)}function R0(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WS(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _2{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ai(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[fc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>qe(o.doubleValue));return new Rm(s)}convertGeoPoint(e){return new Lm(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oa(e));default:return null}}convertTimestamp(e){const n=Qr(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);Pe(hS(r));const i=new Da(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||rr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class GS extends BS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class xu extends GS{data(e={}){return super.data(e)}}class KS{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xu(this._firestore,this._userDataWriter,r.key,r,new Zo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new xu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new xu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:w2(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function w2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t){t=Ut(t,St);const e=Ut(t.firestore,sr);return i2(ih(e),t._key).then(n=>YS(e,t,n))}class Fm extends _2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,n)}}function hh(t){t=Ut(t,ui);const e=Ut(t.firestore,sr),n=ih(e),r=new Fm(e);return $S(t._query),s2(n,t._query).then(i=>new KS(e,r,t,i))}function E2(t,e,n){t=Ut(t,St);const r=Ut(t.firestore,sr),i=qS(t.converter,e,n);return dh(r,[jS(oh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,sn.none())])}function $a(t,e,n,...r){t=Ut(t,St);const i=Ut(t.firestore,sr),s=oh(i);let o;return o=typeof(e=nt(e))=="string"||e instanceof sh?p2(s,"updateDoc",t._key,e,n,r):f2(s,"updateDoc",t._key,e),dh(i,[o.toMutation(t._key,sn.exists(!0))])}function x2(t){return dh(Ut(t.firestore,sr),[new um(t._key,sn.none())])}function QS(t,e){const n=Ut(t.firestore,sr),r=dt(t),i=qS(t.converter,e);return dh(n,[jS(oh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,sn.exists(!1))]).then(()=>r)}function ZS(t,...e){var n,r,i;t=nt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||k0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(k0(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,c,h;if(t instanceof St)c=Ut(t.firestore,sr),h=Gc(t._key.path),u={next:p=>{e[o]&&e[o](YS(c,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Ut(t,ui);c=Ut(p.firestore,sr),h=p._query;const m=new Fm(c);u={next:w=>{e[o]&&e[o](new KS(c,m,p,w))},error:e[o+1],complete:e[o+2]},$S(t._query)}return function(m,w,y,P){const k=new km(P),C=new Im(w,k,y);return m.asyncQueue.enqueueAndForget(async()=>Cm(await _c(m),C)),()=>{k.su(),m.asyncQueue.enqueueAndForget(async()=>Sm(await _c(m),C))}}(ih(c),h,a,u)}function dh(t,e){return function(r,i){const s=new Qn;return r.asyncQueue.enqueueAndForget(async()=>qD(await r2(r),i,s)),s.promise}(ih(t),e)}function YS(t,e,n){const r=n.docs.get(e._key),i=new Fm(t);return new GS(t,i,e._key,r,new Zo(n.hasPendingWrites,n.fromCache),e.converter)}function C2(){return new Nm("serverTimestamp")}function S2(t){return new Mm("increment",t)}(function(e,n=!0){(function(i){ro=i})(to),Fs(new Oi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new sr(new yM(r.getProvider("auth-internal")),new EM(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),$r(N_,M_,e),$r(N_,M_,"esm2017")})();var T2="firebase",I2="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(T2,I2,"app");const P2={apiKey:"AIzaSyCAWPXNlC25uAZ8pL4Cm4O_9dGTGPcXgGY",authDomain:"help-a-hand.firebaseapp.com",projectId:"help-a-hand",storageBucket:"help-a-hand.appspot.com",messagingSenderId:"804637525714",appId:"1:804637525714:web:279c08e1e280cd93ebcf0b",measurementId:"G-Q8LFVSHVFX"},XS=Rx(P2),ft=pM(XS),De=l2(XS);function b2(){const[t,e]=d.useState(""),[n,r]=d.useState(""),i=Mn(),s=async o=>{o.preventDefault();try{const u=(await JA(ft,t,n)).user,c=await or(dt(De,"users",u.uid));if(c.exists()){const h=c.data().role;h==="beneficiar"?i("/beneficiar"):h==="voluntar"?i("/voluntar"):alert("Unknown role.")}else alert("User data not found.")}catch(a){alert("Eroare la autentificare: "+a.message)}};return v.jsxs("form",{onSubmit:s,className:"space-y-5",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Email"}),v.jsx("input",{onChange:o=>e(o.target.value),type:"text",id:"username",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Email",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Parola"}),v.jsx("input",{onChange:o=>r(o.target.value),type:"password",id:"password",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Parola",required:!0})]}),v.jsx("button",{type:"submit",className:"w-full py-3 bg-[#70d299] text-white font-semibold rounded-lg hover:bg-[#429b7f] transition",children:"Sign In"})]})}function k2(){const[t,e]=d.useState(""),[n,r]=d.useState(""),[i,s]=d.useState(""),[o,a]=d.useState(""),[u,c]=d.useState(""),[h,p]=d.useState(""),[m,w]=d.useState(""),[y,P]=d.useState("beneficiar"),[k,C]=d.useState(""),[_,I]=d.useState(!1),A=Mn(),N=x=>{a(x.target.value),u&&x.target.value!==u?C("Passwords do not match"):C("")},O=x=>{c(x.target.value),o&&x.target.value!==o?C("Passwords do not match"):C("")},S=async x=>{if(x.preventDefault(),o!==u){C("Passwords do not match.");return}try{const b=(await XA(ft,i,o)).user;await E2(dt(De,"users",b.uid),{name:t,phone:n,email:i,role:y,createdAt:new Date,city:h,street:m}),I(!0),setTimeout(()=>{I(!1),y==="beneficiar"?A("/beneficiar"):y==="voluntar"&&A("/voluntar")},2e3)}catch(E){alert("Eroare: "+E.message)}};return v.jsxs("div",{className:"relative",children:[_&&v.jsx("div",{className:"fixed top-1/2 left-1/2 z-50 transform -translate-x-1/2 -translate-y-1/2 bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg animate-bounce text-xl font-semibold",children:"Înregistrare cu succes!"}),v.jsxs("form",{onSubmit:S,className:"space-y-5",children:[k&&v.jsx("div",{className:"text-red-500",children:k}),v.jsxs("div",{className:"grid grid-cols-2 gap-x-6 gap-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Nume Utilizator"}),v.jsx("input",{onChange:x=>e(x.target.value),type:"text",id:"username",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Nume Utilizator",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Telefon"}),v.jsx("input",{onChange:x=>r(x.target.value),type:"text",id:"phone",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Telefon",required:!0})]}),v.jsxs("div",{className:"col-span-2",children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),v.jsx("input",{onChange:x=>s(x.target.value),type:"email",id:"email",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Email",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),v.jsx("input",{onChange:N,type:"password",id:"password",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),v.jsx("input",{onChange:O,type:"password",id:"confirmPassword",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"Oras"}),v.jsx("input",{onChange:x=>p(x.target.value),type:"text",id:"city",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Orasul d-voastra",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Adresa"}),v.jsx("input",{onChange:x=>w(x.target.value),type:"text",id:"address",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Adresa d-voastra",required:!0})]}),v.jsxs("div",{className:"col-span-2",children:[v.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Rol"}),v.jsxs("select",{id:"role",value:y,onChange:x=>P(x.target.value),className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"beneficiar",children:"Beneficiar"}),v.jsx("option",{value:"voluntar",children:"Voluntar"})]})]})]}),v.jsx("button",{type:"submit",className:"w-full py-3 bg-[#70d299] text-white font-semibold rounded-lg hover:bg-[#429b7f] transition",children:"Register"})]})]})}function L2({xp:t,totalXP:e,level:n,setUserData:r}){const i=t/100*100,s=()=>i<=20?"bg-red-600":i<=60?"bg-yellow-500":"bg-green-600",o=a=>Math.floor(a/100);return d.useEffect(()=>{(async()=>{const u=ft.currentUser;if(!u||e==null||n==null)return;const c=o(e);if(c!==n){const h=dt(De,"users",u.uid);try{await $a(h,{level:c}),r&&r(p=>({...p,level:c}))}catch(p){console.error("Eroare la actualizarea nivelului:",p)}}})()},[e,n,r]),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("p",{className:"text-gray-700 font-medium",children:["Nivel: ",n??0]}),v.jsx("div",{className:"relative w-32 h-4 bg-gray-300 rounded-full",children:v.jsx("div",{className:`absolute top-0 left-0 h-full ${s()} rounded-full`,style:{width:`${i}%`}})})]})}function qi({role:t,onOpenCreateRequest:e,userData:n,setUserData:r}){const[i,s]=d.useState(!1),[o,a]=d.useState(null),[u,c]=d.useState(!1),[h,p]=d.useState(null),[m,w]=d.useState(null),y=Mn(),P=ii(),k={Silver:"/images/silver.jpg",Gold:"/images/gold.jpg",Diamond:"/images/diamond.jpg"};d.useEffect(()=>{const E=ft.onAuthStateChanged(async b=>{if(b){const R=dt(De,"users",b.uid),M=await or(R);M.exists()&&r({email:b.email,...M.data()})}else r(null)});return()=>E()},[]);const C=E=>E?E.split("@")[0].slice(0,2).toUpperCase():"??",_=async()=>{try{await rN(ft),y("/")}catch(E){console.error("Eroare la deconectare: ",E)}},I=E=>{const b=E.target.files[0];if(b){const R=new FileReader;R.onloadend=()=>{a(R.result)},R.readAsDataURL(b)}},A=()=>{a(null)},N=()=>{s(!0),m&&clearTimeout(m)},O=()=>{w(setTimeout(()=>{s(!1)},300))},S=async E=>{const b=dt(De,"users",ft.currentUser.uid);try{await $a(b,{package:E}),r(R=>({...R,package:E})),c(!1)}catch(R){console.error("Eroare la actualizarea pachetului:",R)}},x=P.pathname==="/voluntar/request"||P.pathname==="/beneficiar/request";return v.jsx("header",{className:"w-full fixed top-0 left-0 z-20 bg-white shadow-sm",children:v.jsxs("nav",{className:"max-w-screen-xl mx-auto flex items-center justify-between px-4 py-2 h-16",children:[v.jsx("div",{className:"flex float-left",children:v.jsx(nn,{to:"/",className:"text-green-500 text-3xl font-semibold float-left",children:"Help-a-Hand"})}),v.jsxs("div",{className:"flex items-center space-x-6 text-lg text-gray-700",children:[x&&v.jsx("button",{onClick:()=>y(-1),className:"bg-red-500 hover:bg-red-600 text-white font-semibold px-4 py-2 rounded-lg ml-4 transition duration-200",children:"← Înapoi"}),(n==null?void 0:n.role)==="beneficiar"&&v.jsxs("div",{className:"relative",onMouseEnter:()=>{h&&clearTimeout(h),c(!0)},onMouseLeave:()=>{const E=setTimeout(()=>c(!1),300);p(E)},children:[v.jsxs("button",{className:"flex items-center gap-2 border rounded-full px-3 py-1 hover:border-green-400 transition",children:[n.package?v.jsx("img",{src:k[n.package],alt:"Pachet",className:"w-8 h-8 rounded-full object-cover"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white border border-gray-300"}),v.jsx("span",{className:"text-sm text-gray-700",children:n.package||"Alege pachet"})]}),u&&v.jsx("div",{className:"absolute top-12 left-0 bg-white border rounded-xl shadow-lg p-3 grid grid-cols-3 gap-2 z-50 w-72",children:["Silver","Gold","Diamond"].map(E=>v.jsxs("div",{onClick:()=>S(E),className:`relative cursor-pointer overflow-hidden rounded-xl transition-all duration-300 border-2 ${n.package===E?"border-green-500 scale-105":"border-transparent hover:border-green-300"}`,children:[v.jsx("img",{src:k[E],alt:E,className:"w-full h-20 object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 text-white flex items-center justify-center text-sm font-semibold",children:E})]},E))})]}),(n==null?void 0:n.role)==="voluntar"&&v.jsx(L2,{xp:n==null?void 0:n.xp,totalXP:n==null?void 0:n.totalXP,level:n==null?void 0:n.level,setUserData:r}),v.jsxs("li",{className:"relative flex items-center space-x-2",onMouseEnter:N,onMouseLeave:O,children:[v.jsx("div",{className:"flex items-center justify-center hover:cursor-pointer p-3",children:v.jsx("button",{className:"hover:text-green-500",children:o?v.jsx("img",{src:o,alt:"User",className:"w-10 h-10 rounded-full object-cover"}):n&&v.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500 text-white flex items-center justify-center text-sm font-semibold group-hover:bg-green-600 transition-colors duration-300",children:C(n==null?void 0:n.email)})})}),n&&i&&v.jsxs("div",{className:"absolute left-1/2 top-full mt-2 bg-white border border-gray-300 rounded-lg shadow-lg p-4 transform -translate-x-1/2",children:[v.jsxs("div",{className:"flex flex-col space-y-2",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("p",{className:"text-sm cursor-pointer text-blue-500",onClick:()=>{o?A():document.getElementById("file-upload").click()},children:o?"Șterge imagine":"Adaugă imagine"}),v.jsx("input",{id:"file-upload",type:"file",accept:"image/*",onChange:I,className:"hidden"})]}),v.jsxs("div",{className:"flex justify-between text-sm",children:[v.jsx("span",{children:v.jsx("strong",{children:"Nume:"})}),v.jsx("span",{children:(n==null?void 0:n.name)||"N/A"})]}),v.jsxs("div",{className:"flex justify-between text-sm",children:[v.jsx("span",{children:v.jsx("strong",{children:"Email:"})}),v.jsx("span",{children:(n==null?void 0:n.email)||"N/A"})]}),v.jsxs("div",{className:"flex justify-between text-sm",children:[v.jsx("span",{children:v.jsx("strong",{children:"Rol:"})}),v.jsx("span",{children:(n==null?void 0:n.role)||"N/A"})]}),v.jsxs("div",{className:"flex justify-between text-sm",children:[v.jsx("span",{children:v.jsx("strong",{children:"Telefon:"})}),v.jsx("span",{children:(n==null?void 0:n.phone)||"N/A"})]}),v.jsxs("div",{className:"flex justify-between text-sm",children:[v.jsx("span",{children:v.jsx("strong",{children:"Oraș:"})}),v.jsx("span",{children:(n==null?void 0:n.city)||"N/A"})]}),v.jsxs("div",{className:"flex justify-between text-sm",children:[v.jsx("span",{children:v.jsx("strong",{children:"Adresă:"})}),v.jsx("span",{children:(n==null?void 0:n.street)||"N/A"})]})]}),v.jsx("p",{onClick:_,className:"w-full text-white bg-red-500 hover:bg-red-600 mt-2 py-1 rounded-lg text-center cursor-pointer transition-colors duration-300 text-sm",children:"Deconectare"})]})]})]})]})})}function Ec(){return Ec=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ec.apply(this,arguments)}var A0=function(t){var e=d.useRef(t);return e.current=t,e},R2=function(t,e){var n;return function(){for(var r=this,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];n!==null&&(clearTimeout(n),n=null),n=setTimeout(function(){return t.apply(r,s)},e)}},A2="💡 use-places-autocomplete: Google Maps Places API library must be loaded. See: https://github.com/wellyshen/use-places-autocomplete#load-the-library",N2=function(e){var n=e===void 0?{}:e,r=n.requestOptions,i=n.debounce,s=i===void 0?200:i,o=n.cache,a=o===void 0?24*60*60:o,u=n.cacheKey,c=u===void 0?"upa":u,h=n.googleMaps,p=n.callbackName,m=n.defaultValue,w=m===void 0?"":m,y=n.initOnMount,P=y===void 0?!0:y,k=d.useState(!1),C=k[0],_=k[1],I=d.useState(w),A=I[0],N=I[1],O=d.useState({loading:!1,status:"",data:[]}),S=O[0],x=O[1],E=d.useRef(),b=A0(r),R=A0(h),M=d.useCallback(function(){var te;if(!E.current){var U=window,H=U.google,W=R.current,Y=(W==null?void 0:W.places)||(H==null||(te=H.maps)==null?void 0:te.places);if(!Y){console.error(A2);return}E.current=new Y.AutocompleteService,_(!0)}},[R]),L=d.useCallback(function(){x({loading:!1,status:"",data:[]})},[]),J=d.useCallback(function(te){te===void 0&&(te=c);try{sessionStorage.removeItem(te)}catch{}},[c]),re=d.useCallback(R2(function(te){var U;if(!te){L();return}x(function(W){return Ec({},W,{loading:!0})});var H={};try{H=JSON.parse(sessionStorage.getItem(c)||"{}")}catch{}if(a&&(H=Object.keys(H).reduce(function(W,Y){return H[Y].maxAge-Date.now()>=0&&(W[Y]=H[Y]),W},{}),H[te])){x({loading:!1,status:"OK",data:H[te].data});return}(U=E.current)==null||U.getPlacePredictions(Ec({},b.current,{input:te}),function(W,Y){if(x({loading:!1,status:Y,data:W||[]}),a&&Y==="OK"){H[te]={data:W,maxAge:Date.now()+a*1e3};try{sessionStorage.setItem(c,JSON.stringify(H))}catch{}}})},s),[a,c,L,b]),ue=d.useCallback(function(te,U){U===void 0&&(U=!0),N(te),E.current&&U&&re(te)},[re]);return d.useEffect(function(){if(!P)return function(){return null};var te=window,U=te.google;return!R.current&&!(U!=null&&U.maps)&&p?window[p]=M:M(),function(){window[p]&&delete window[p]}},[p,R,M,P]),{ready:C,value:A,suggestions:S,setValue:ue,clearSuggestions:L,clearCache:J,init:M}},M2="💡 use-places-autocomplete: Please provide an address when using getGeocode() with the componentRestrictions.",O2=function(e){var n=new window.google.maps.Geocoder;return new Promise(function(r,i){n.geocode(e,function(s,o){o!=="OK"&&i(o),!e.address&&e.componentRestrictions&&(console.error(M2),r(s)),r(s)})})},D2=function(e){var n=e.geometry.location,r=n.lat,i=n.lng;return{lat:r(),lng:i()}};function V2({onClose:t}){const[e,n]=d.useState({category:"",description:"",time:"",address:"",location:null}),[r,i]=d.useState(!1),{ready:s,value:o,suggestions:{status:a,data:u},setValue:c,clearSuggestions:h}=N2(),p=y=>{const{name:P,value:k}=y.target;n(C=>({...C,[P]:k}))},m=async y=>{c(y,!1),h(),n(P=>({...P,address:y}));try{const P=await O2({address:y}),{lat:k,lng:C}=await D2(P[0]);n(_=>({..._,location:{lat:k,lng:C}}))}catch(P){console.error("Eroare geocodificare:",P)}},w=async y=>{y.preventDefault();const P=ft.currentUser;if(!P){console.error("User not logged in");return}try{const k=dt(De,"users",P.uid),C=await or(k),_=C.exists()?C.data():{},I=_.package||"None",N={Diamond:1,Gold:2,Silver:3}[I]||4;await QS(ei(De,"requests"),{...e,uid:P.uid,email:P.email,createdAt:new Date,phone:_.phone,priority:N,package:I,status:"pending"}),i(!0),setTimeout(()=>{i(!1),t&&t()},2e3),n({category:"",description:"",time:"",address:"",location:null}),c("")}catch(k){console.error("Eroare la trimiterea cererii:",k)}};return r?v.jsxs("div",{className:"flex flex-col items-center justify-center p-10",children:[v.jsx("div",{className:"w-16 h-16 border-4 border-green-500 rounded-full flex items-center justify-center animate-bounce",children:v.jsx("svg",{className:"w-10 h-10 text-green-500",fill:"none",stroke:"currentColor",strokeWidth:3,viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),v.jsx("p",{className:"mt-4 text-green-600 font-semibold",children:"Cerere trimisă!"})]}):v.jsxs("div",{className:"max-w-md mx-auto mt-8 p-4 shadow-lg rounded-2xl bg-white",children:[v.jsx("h2",{className:"text-xl font-bold mb-4",children:"Creează un request"}),v.jsxs("form",{onSubmit:w,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block font-medium mb-1",children:"Categorie"}),v.jsx("input",{type:"text",name:"category",value:e.category,onChange:p,className:"w-full border border-gray-300 p-2 rounded-lg",placeholder:"Ex: Mâncare, Transport, etc.",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block font-medium mb-1",children:"Descriere"}),v.jsx("textarea",{name:"description",value:e.description,onChange:p,className:"w-full border border-gray-300 p-2 rounded-lg",placeholder:"Descrie cererea ta",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block font-medium mb-1",children:"Ora"}),v.jsx("input",{type:"time",name:"time",value:e.time,onChange:p,className:"w-full border border-gray-300 p-2 rounded-lg",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block font-medium mb-1",children:"Adresă"}),v.jsx("input",{type:"text",name:"address",value:o,onChange:y=>c(y.target.value),disabled:!s,className:"w-full border border-gray-300 p-2 rounded-lg",placeholder:"Scrie o adresă",required:!0}),a==="OK"&&v.jsx("ul",{className:"border border-gray-300 rounded-md mt-1 bg-white max-h-40 overflow-y-auto",children:u.map(({place_id:y,description:P})=>v.jsx("li",{onClick:()=>m(P),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",children:P},y))})]}),v.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition",children:"Trimite cererea"})]})]})}function j2(){var p,m;const[t,e]=d.useState(!1),[n,r]=d.useState(null),[i,s]=d.useState(!0),[o,a]=d.useState(!1),u=Mn();d.useEffect(()=>{const w=ft.onAuthStateChanged(async y=>{if(y){a(!0);try{const P=dt(De,"users",y.uid),k=await or(P);if(k.exists()){const C=k.data();r({...C,email:y.email,role:"beneficiar"})}}catch(P){console.error("Eroare la citirea datelor:",P)}}else a(!1);s(!1)});return()=>w()},[]),d.useEffect(()=>{!i&&!o&&u("/")},[i,o,u]);const c=()=>e(!0),h=()=>e(!1);return i||!n?v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsx("p",{className:"text-gray-500",children:"Se încarcă..."})}):v.jsxs("div",{className:"min-h-screen bg-[#f9fafb]",children:[v.jsx(qi,{role:"beneficiar",onOpenCreateRequest:c,userData:n,setUserData:r}),v.jsxs("main",{className:"pt-20 px-6 flex flex-col items-center",children:[v.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md w-full max-w-2xl text-center",children:[v.jsxs("h1",{className:"text-3xl font-bold text-green-700 mb-2",children:["Salut, ",((p=n.name)==null?void 0:p.charAt(0).toUpperCase())+((m=n.name)==null?void 0:m.slice(1))||"utilizator","! ",v.jsx("span",{className:"animate-bounce inline-block",children:"👋"})]}),v.jsx("p",{className:"text-gray-600 mb-6",children:"Cu ce te putem ajuta azi?"}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[v.jsx("button",{onClick:c,className:"bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-3 rounded-lg transition shadow-md shadow-green-300",children:"🖐 Cere Ajutor"}),v.jsx(nn,{to:"/beneficiar/requests",className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg transition text-center",children:"📋 Cererile Mele"}),v.jsx("button",{className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold px-6 py-3 rounded-lg transition",children:"🧑‍🤝‍🧑 Voluntari Aproape"}),v.jsx(nn,{to:"/beneficiar/istoric",className:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold px-6 py-3 rounded-lg transition text-center",children:"📜 Istoric Cereri"})]})]}),v.jsxs("div",{className:"mt-8 w-full max-w-6xl grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow text-center",children:[v.jsx("p",{className:"text-lg font-medium text-gray-800",children:"📦 Ultima cerere"}),v.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"„Colet din Poștă”"}),v.jsx("p",{className:"text-sm text-gray-400",children:"Status: Așteaptă voluntar"})]}),v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow text-center",children:[v.jsx("p",{className:"text-lg font-medium text-gray-800",children:"👥 Voluntari disponibili"}),v.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"3 voluntari în zona ta"})]}),v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow text-center",children:[v.jsx("p",{className:"text-lg font-medium text-gray-800",children:"❤️ Voluntari preferați"}),v.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Niciunul salvat momentan"})]}),v.jsxs("div",{className:"bg-[#f0fdf4] p-6 rounded-xl shadow text-center",children:[v.jsx("p",{className:"text-lg font-medium text-gray-800",children:"ℹ️ Ai nevoie de ajutor?"}),v.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Cere ajutor cu încredere, suntem aici zilnic pentru tine."})]}),v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow text-center",children:[v.jsx("p",{className:"text-lg font-medium text-gray-800",children:"📞 Contact suport"}),v.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"0720 123 456 (L-V 9:00–17:00)"})]}),v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow text-center",children:[v.jsx("p",{className:"text-lg font-medium text-gray-800",children:"📘 Ghid de utilizare"}),v.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Află cum funcționează aplicația și ce poți cere"})]})]}),v.jsx("p",{className:"text-xs text-gray-400 text-center mt-10",children:"Ai sugestii? Spune-ne ce ai vrea să adăugăm 💡"})]}),t&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:v.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg relative",children:[v.jsx("button",{onClick:h,className:"absolute top-2 right-2 text-gray-500 hover:text-black text-2xl",children:"×"}),v.jsx(V2,{onClose:h})]})})]})}function U2(){const[t,e]=d.useState(null);return d.useEffect(()=>{const n=ft.onAuthStateChanged(async r=>{if(r)try{const i=dt(De,"users",r.uid),s=await or(i);if(s.exists()){const o=s.data();e({...o,email:r.email})}}catch(i){console.error("Eroare la citirea datelor:",i)}});return()=>n()},[]),v.jsxs("div",{className:"min-h-screen bg-[#f9fafb]",children:[v.jsx(qi,{role:"voluntar",userData:t,setUserData:e}),v.jsxs("main",{className:"pt-24 pb-16 px-6 flex flex-col items-center",children:[v.jsxs("section",{className:"bg-white p-10 rounded-xl shadow-md w-full max-w-4xl text-center mb-12",children:[v.jsxs("h1",{className:"text-4xl font-bold text-green-700 mb-3",children:["Salut, ",(t==null?void 0:t.name)||"Voluntar","! ",v.jsx("span",{className:"animate-bounce inline-block",children:"🤝"})]}),v.jsx("p",{className:"text-gray-600 text-lg",children:"Gata să faci o diferență azi?"})]}),v.jsxs("section",{className:"w-full max-w-4xl grid grid-cols-1 sm:grid-cols-2 gap-4 mb-12",children:[v.jsx(nn,{to:"/voluntar/requests",className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold px-6 py-4 rounded-lg transition text-center",children:"📋 Cereri disponibile"}),v.jsx(nn,{to:"/voluntar/cereriacceptate",className:"bg-green-500 hover:bg-green-600 text-white font-semibold px-6 py-4 rounded-lg transition text-center",children:"✅ Cererile mele acceptate"}),v.jsx("button",{className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold px-6 py-4 rounded-lg transition",children:"📍 Voluntariat în zona ta"}),v.jsx(nn,{to:"/voluntar/istoric",className:"bg-yellow-500 hover:bg-yellow-600 text-white font-semibold px-6 py-3 rounded-lg transition w-full sm:w-auto min-w-[150px] text-center block",children:"🕓 Istoric ajutor"})]}),v.jsxs("section",{className:"w-full max-w-6xl",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"📊 Activitate & Informații"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow text-center hover:shadow-lg transition h-full",children:[v.jsx("p",{className:"text-lg font-medium text-gray-800",children:"🧾 Ultima cerere acceptată"}),v.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"„Farmacie pentru vecina Maria”"}),v.jsx("p",{className:"text-sm text-gray-400",children:"Status: În curs de finalizare"})]}),v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow text-center hover:shadow-lg transition h-full",children:[v.jsx("p",{className:"text-lg font-medium text-gray-800",children:"📍 Cereri apropiate"}),v.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["5 cereri la ",v.jsx("strong",{children:"sub 1 km"})," de tine"]})]}),v.jsxs("div",{className:"bg-[#f0fdf4] p-6 rounded-xl shadow text-center hover:shadow-lg transition h-full",children:[v.jsxs("p",{className:"text-lg font-medium text-gray-800",children:["🎉 Ai ajutat ",(t==null?void 0:t.completedCount)||0," persoan",((t==null?void 0:t.completedCount)||0)===1?"ă":"e","!"]}),v.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Felicitări, contribuția ta contează!"})]}),v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow text-center hover:shadow-lg transition h-full",children:[v.jsx("p",{className:"text-lg font-medium text-gray-800",children:"ℹ️ Ai nevoie de ajutor?"}),v.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Dacă ai întrebări despre cereri sau voluntariat, suntem aici pentru tine."})]}),v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow text-center hover:shadow-lg transition h-full",children:[v.jsx("p",{className:"text-lg font-medium text-gray-800",children:"📞 Contact suport"}),v.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["0720 123 456",v.jsx("br",{}),"support@helpa.ro"]})]}),v.jsxs("div",{className:"bg-white p-6 rounded-xl shadow text-center hover:shadow-lg transition h-full",children:[v.jsx("p",{className:"text-lg font-medium text-gray-800",children:"🧠 Sfaturi utile"}),v.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Zâmbește, ascultă și oferă ajutorul cu empatie. Uneori, o vorbă bună contează enorm."})]})]})]}),v.jsx("p",{className:"text-xs text-gray-400 text-center mt-12",children:"Vrei să vezi un istoric complet al ajutoarelor? Funcționalitate în curând 🔧"})]})]})}function zm({request:t,onDelete:e,onAccept:n,onComplete:r,onChat:i}){const s=h=>!h||!h.seconds?"N/A":new Date(h.seconds*1e3).toLocaleString("ro-RO"),o={Diamond:{image:"/images/diamond.jpg",badge:"bg-blue-600 text-white"},Gold:{image:"/images/gold.jpg",badge:"bg-yellow-500 text-white"},Silver:{image:"/images/silver.jpg",badge:"bg-gray-600 text-white"},Default:{image:null,badge:"bg-gray-400 text-white"}},a=t.package||"Default",u=o[a]||o.Default,c=u.image!==null;return v.jsxs("div",{className:`relative rounded-2xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 flex flex-col justify-between ${c?"":"bg-white border border-gray-200"}`,style:c?{backgroundImage:`url(${u.image})`,backgroundSize:"cover",backgroundPosition:"center",minHeight:"300px"}:{minHeight:"300px"},children:[c&&v.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),v.jsxs("div",{className:`relative z-10 p-5 flex flex-col justify-between h-full ${c?"text-white":"text-gray-800"}`,children:[v.jsxs("div",{className:"grid gap-1 text-sm mb-4",children:[v.jsxs("p",{children:[v.jsx("span",{className:"font-semibold",children:"Categorie:"})," ",t.category]}),v.jsxs("p",{children:[v.jsx("span",{className:"font-semibold",children:"Descriere:"})," ",t.description]}),v.jsxs("p",{children:[v.jsx("span",{className:"font-semibold",children:"Adresă:"})," ",t.address]}),v.jsxs("p",{children:[v.jsx("span",{className:"font-semibold",children:"Telefon:"})," ",t.phone||"-"]}),v.jsxs("p",{children:[v.jsx("span",{className:"font-semibold",children:"Ora:"})," ",t.time]}),v.jsxs("p",{children:[v.jsx("span",{className:"font-semibold",children:"Data:"})," ",s(t.createdAt)]})]}),v.jsxs("div",{className:"mt-auto flex flex-wrap justify-between items-center gap-2",children:[e&&v.jsx("button",{onClick:()=>e(t.id),className:"text-red-600 text-2xl cursor-pointer hover:text-red-800",title:"Șterge cererea",children:"×"}),n&&v.jsx("button",{onClick:()=>n(t.id),className:"ml-auto bg-green-600 hover:bg-green-700 text-white text-sm font-semibold px-4 py-2 rounded-md transition",children:"Acceptă cererea"}),r&&v.jsx("button",{onClick:()=>r(t.id),className:"ml-auto bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold px-4 py-2 rounded-md transition",children:"Cerere finalizată"}),i&&v.jsx("button",{onClick:()=>i(t.id),className:"ml-auto bg-indigo-500 hover:bg-indigo-600 text-white text-sm font-semibold px-4 py-2 rounded-md transition",children:"💬 Deschide chat"})]})]})]})}function F2(){const[t,e]=d.useState([]),[n,r]=d.useState([]),[i,s]=d.useState(!0),[o,a]=d.useState(""),[u,c]=d.useState(""),h=Mn();d.useEffect(()=>{(async()=>{try{const y=(await hh(ei(De,"requests"))).docs.map(C=>({id:C.id,...C.data()})).filter(C=>C.status==="pending"),P={Diamond:1,Gold:2,Silver:3},k=y.sort((C,_)=>{const I=P[C.package]||999,A=P[_.package]||999;return I-A});e(k),r(k),s(!1)}catch(w){console.error("Eroare la încărcarea cererilor:",w)}})()},[]),d.useEffect(()=>{const m=y=>y==null?void 0:y.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/ș|ş/g,"s").replace(/ț|ţ/g,"t").replace(/ă/g,"a").replace(/î/g,"i").replace(/â/g,"a").toLowerCase();let w=[...t];if(o.trim()!==""){const y=m(o);w=w.filter(P=>m(P.category).includes(y))}if(u.trim()!==""){const y=m(u);w=w.filter(P=>m(P.address).includes(y))}r(w)},[o,u,t]);const p=async m=>{try{const w=ft.currentUser;if(!w){alert("Trebuie să fii autentificat pentru a accepta o cerere.");return}const y=dt(De,"requests",m);await $a(y,{status:"accepted",volunteerId:w.uid}),alert("✅ Cererea a fost acceptată cu succes!"),r(P=>P.filter(k=>k.id!==m)),e(P=>P.filter(k=>k.id!==m))}catch(w){console.error("Eroare la acceptarea cererii:",w),alert("❌ A apărut o eroare la acceptare.")}};return i?v.jsx("p",{className:"p-6",children:"Se încarcă cererile..."}):v.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 p-6",children:[v.jsx(qi,{}),v.jsxs("aside",{className:"w-full lg:w-64 bg-white shadow-md rounded-2xl p-4 h-fit mt-24",children:[v.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Filtrare"}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Categorie:"}),v.jsx("input",{type:"text",placeholder:"Ex: Medicamente",value:o,onChange:m=>a(m.target.value),className:"w-full p-2 border rounded-lg"})]}),v.jsxs("div",{className:"mb-2",children:[v.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Adresă:"}),v.jsx("input",{type:"text",placeholder:"Ex: Str. Florilor",value:u,onChange:m=>c(m.target.value),className:"w-full p-2 border rounded-lg"})]})]}),v.jsxs("section",{className:"flex-1 mt-24",children:[v.jsx("button",{onClick:()=>h(-1),className:"mb-4 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded-lg transition",children:"← Înapoi"}),n.length===0?v.jsx("p",{className:"text-gray-600",children:"Nicio cerere găsită."}):v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6",children:n.map(m=>v.jsx(zm,{request:m,onAccept:p},m.id))})]})]})}function JS({requestId:t,onClose:e}){const[n,r]=d.useState([]),[i,s]=d.useState(""),[o,a]=d.useState(""),u=d.useRef(null),c=ft.currentUser;d.useEffect(()=>{(async()=>{const m=await or(dt(De,"requests",t));if(m.exists()){const w=m.data(),y=w.volunteerId===c.uid?w.uid:w.volunteerId,P=await or(dt(De,"users",y));if(P.exists()){const k=P.data();a(k.name||"Utilizator")}}})()},[t,c.uid]),d.useEffect(()=>{const p=ei(De,"chats",t,"messages"),m=uh(p,y2("timestamp")),w=ZS(m,y=>{const P=y.docs.map(k=>({id:k.id,...k.data()}));r(P)});return()=>w()},[t]);const h=async p=>{if(p.preventDefault(),!i.trim())return;const m=ei(De,"chats",t,"messages");await QS(m,{text:i,senderId:c.uid,timestamp:C2()}),s("")};return d.useEffect(()=>{var p;(p=u.current)==null||p.scrollIntoView({behavior:"smooth"})},[n]),v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg p-6 relative",children:[v.jsx("button",{onClick:e,className:"absolute top-2 right-4 text-gray-600 hover:text-black text-3xl","aria-label":"Închide chatul",children:"×"}),v.jsxs("h2",{className:"text-2xl font-bold mb-4 text-center text-green-700",children:["Chat cu ",o]}),v.jsxs("div",{className:"h-72 overflow-y-auto border border-gray-300 rounded-md p-4 bg-gray-50 text-base leading-relaxed",children:[n.map(p=>v.jsx("div",{className:`my-2 py-2 px-3 rounded-xl max-w-[80%] break-words shadow-md text-[17px] tracking-wide ${p.senderId===c.uid?"ml-auto bg-green-100 text-right":"mr-auto bg-gray-200 text-left"}`,children:p.text},p.id)),v.jsx("div",{ref:u})]}),v.jsxs("form",{onSubmit:h,className:"mt-4 flex gap-3",children:[v.jsx("input",{type:"text",className:"flex-1 border border-gray-400 rounded-lg px-4 py-3 text-lg placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Scrie un mesaj...",value:i,onChange:p=>s(p.target.value)}),v.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-bold px-6 py-3 rounded-lg text-lg",children:"Trimite"})]})]})})}function z2(){const[t,e]=d.useState([]),[n,r]=d.useState([]),[i,s]=d.useState(!0),[o,a]=d.useState("pending"),[u,c]=d.useState(""),[h,p]=d.useState(null),m=Mn();d.useEffect(()=>{(async()=>{const _=ft.currentUser;if(_)try{const I=dt(De,"users",_.uid),A=await or(I);if(A.exists()){const N=A.data();c(N.role)}}catch(I){console.error("Error fetching user role:",I)}})()},[]),d.useEffect(()=>{(async()=>{try{const _=ft.currentUser;if(!_)return;const N=(await hh(ei(De,"requests"))).docs.map(O=>({id:O.id,...O.data()})).filter(O=>{var S,x;return((S=O.email)==null?void 0:S.toLowerCase())===((x=_.email)==null?void 0:x.toLowerCase())});e(N),r(N.filter(O=>O.status===o)),s(!1)}catch(_){console.error("Error loading requests:",_)}})()},[o]);const w=async C=>{try{await x2(dt(De,"requests",C)),e(_=>_.filter(I=>I.id!==C)),r(_=>_.filter(I=>I.id!==C))}catch(_){console.error("Error deleting request:",_)}},y=C=>{a(C),r(t.filter(_=>_.status===C))},P=C=>{p(C)},k=()=>{p(null)};return i?v.jsx("p",{className:"p-6",children:"Se încarcă cererile..."}):v.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 p-6",children:[v.jsx(qi,{}),v.jsxs("aside",{className:"w-full lg:w-64 bg-white shadow-md rounded-2xl p-4 h-fit mt-24",children:[v.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Filtrare cereri"}),v.jsxs("div",{className:"flex flex-col gap-2",children:[v.jsx("button",{onClick:()=>y("pending"),className:`text-left px-3 py-2 rounded-lg font-medium ${o==="pending"?"bg-green-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Cereri în așteptare"}),v.jsx("button",{onClick:()=>y("accepted"),className:`text-left px-3 py-2 rounded-lg font-medium ${o==="accepted"?"bg-green-500 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Cereri acceptate"})]})]}),v.jsxs("section",{className:"flex-1 mt-24",children:[v.jsx("button",{onClick:()=>m(-1),className:"mb-4 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold px-4 py-2 rounded-lg transition",children:"← Înapoi"}),n.length===0?v.jsx("p",{className:"text-gray-600",children:"Nu există cereri în această categorie."}):v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6",children:n.map(C=>v.jsx(zm,{request:C,onDelete:u==="beneficiar"&&o==="pending"?w:null,onChat:o==="accepted"?P:null},C.id))})]}),h&&v.jsx(JS,{requestId:h,onClose:k,role:u})]})}function B2(){const[t,e]=d.useState([]),[n,r]=d.useState(!1),[i,s]=d.useState(null),[o,a]=d.useState(null),[u,c]=d.useState(""),h=Mn();d.useEffect(()=>{let y;const P=nN(ft,async k=>{if(k){await p(k.uid);const C=uh(ei(De,"requests"),Ks("status","==","accepted"),Ks("volunteerId","==",k.uid));y=ZS(C,_=>{const I=_.docs.map(A=>({id:A.id,...A.data()}));e(I)})}});return()=>{P(),y&&y()}},[]);const p=async y=>{const P=dt(De,"users",y),k=await or(P);k.exists()&&a(k.data())},m=async y=>{try{const P=dt(De,"requests",y);await $a(P,{status:"completed"});const k=ft.currentUser,C=dt(De,"users",k.uid);let _=(o.xp||0)+20;_>=100&&(_=0);const I=(o.totalXP||0)+20,A=Math.floor(I/100)+1;await $a(C,{xp:_,level:A,totalXP:I,completedCount:S2(1)}),a(N=>({...N,xp:_,totalXP:I,level:A})),c("✅ Cererea a fost finalizată. Ai primit 20 XP!"),setTimeout(()=>c(""),3e3)}catch(P){console.error("Eroare la finalizare cerere:",P)}},w=y=>{s(y),r(!0)};return v.jsxs("div",{className:"min-h-screen bg-[#f9fafb]",children:[v.jsx(qi,{role:"voluntar",userData:o,setUserData:a}),v.jsxs("main",{className:"pt-28 px-6 flex flex-col items-center",children:[v.jsxs("div",{className:"w-full max-w-4xl text-center mb-6",children:[v.jsx("h1",{className:"text-3xl font-bold text-green-700 mb-2",children:"Cererile Mele Acceptate"}),v.jsx("p",{className:"text-gray-600",children:"Aici vezi cererile pe care le-ai acceptat"})]}),v.jsx("button",{onClick:()=>h("/voluntar"),className:"mb-8 bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg transition",children:"← Înapoi la Home"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 w-full max-w-6xl",children:t.length===0?v.jsx("p",{className:"text-gray-600 col-span-full",children:"Nicio cerere acceptată momentan."}):t.map(y=>v.jsxs("div",{className:"bg-white p-5 rounded-lg shadow flex flex-col justify-between min-h-[360px]",children:[v.jsxs("div",{className:"mb-4 space-y-1 text-sm text-gray-800",children:[v.jsxs("p",{children:[v.jsx("strong",{children:"Categorie:"})," ",y.category]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Descriere:"})," ",y.description]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Adresă:"})," ",y.address]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Ora:"})," ",y.time]})]}),v.jsxs("div",{className:"flex flex-col gap-2 mt-auto",children:[v.jsx("button",{onClick:()=>w(y.id),className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition",children:"💬 Chat cu beneficiar"}),v.jsx("button",{onClick:()=>m(y.id),className:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg transition",children:"✅ Cerere Finalizată"})]})]},y.id))})]}),n&&i&&v.jsx(JS,{requestId:i,onClose:()=>{r(!1),s(null)}}),u&&v.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-green-600 text-white text-sm font-medium px-6 py-3 rounded-xl shadow-lg animate-fade-in-out z-50",children:u})]})}function $2(){const[t,e]=d.useState([]),n=Mn();return d.useEffect(()=>{(async()=>{const i=ft.currentUser;if(!i)return;const s=uh(ei(De,"requests"),Ks("status","==","completed"),Ks("volunteerId","==",i.uid)),a=(await hh(s)).docs.map(u=>({id:u.id,...u.data()}));e(a)})()},[]),v.jsxs("div",{className:"min-h-screen bg-[#f9fafb]",children:[v.jsx(qi,{role:"voluntar"}),v.jsxs("main",{className:"pt-28 px-6 flex flex-col items-center",children:[v.jsxs("div",{className:"w-full max-w-4xl text-center mb-6",children:[v.jsx("h1",{className:"text-3xl font-bold text-green-700 mb-2",children:"Istoric Ajutor"}),v.jsx("p",{className:"text-gray-600",children:"Cererile finalizate de tine"})]}),v.jsx("button",{onClick:()=>n("/voluntar"),className:"mb-8 bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg transition",children:"← Înapoi la Home"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 w-full max-w-6xl",children:t.length===0?v.jsx("p",{className:"text-gray-600 col-span-full",children:"Nu ai cereri finalizate momentan."}):t.map(r=>v.jsxs("div",{className:"bg-white p-5 rounded-lg shadow text-sm space-y-1",children:[v.jsxs("p",{children:[v.jsx("strong",{children:"Categorie:"})," ",r.category]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Descriere:"})," ",r.description]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Adresă:"})," ",r.address]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Ora:"})," ",r.time]}),v.jsx("p",{className:"text-green-600 font-semibold mt-2",children:"✅ Finalizată"})]},r.id))})]})]})}function H2(){const[t,e]=d.useState([]),[n,r]=d.useState(!0),i=Mn();return d.useEffect(()=>{(async()=>{const o=ft.currentUser;if(!o)return;const a=uh(ei(De,"requests"),Ks("email","==",o.email.toLowerCase()),Ks("status","==","completed")),c=(await hh(a)).docs.map(h=>({id:h.id,...h.data()}));e(c),r(!1)})()},[]),v.jsxs("div",{className:"min-h-screen bg-[#f9fafb]",children:[v.jsx(qi,{role:"beneficiar"}),v.jsxs("main",{className:"pt-28 px-6 flex flex-col items-center",children:[v.jsxs("div",{className:"w-full max-w-4xl text-center mb-6",children:[v.jsx("h1",{className:"text-3xl font-bold text-green-700 mb-2",children:"Istoric Cereri"}),v.jsx("p",{className:"text-gray-600 mb-4",children:"Aici găsești cererile tale finalizate"}),v.jsx("button",{onClick:()=>i("/beneficiar"),className:"mb-4 bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg transition",children:"← Înapoi la Pagina Principală"})]}),n?v.jsx("p",{className:"text-gray-500",children:"Se încarcă cererile..."}):t.length===0?v.jsx("p",{className:"text-gray-600",children:"Nu există cereri finalizate momentan."}):v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 w-full max-w-6xl",children:t.map(s=>v.jsx(zm,{request:s},s.id))})]})]})}function W2(){return v.jsxs(Uk,{children:[v.jsx(cn,{path:"/",element:v.jsx(_L,{})}),v.jsx(cn,{path:"/register",element:v.jsxs("div",{className:"relative min-h-screen flex items-center justify-center",children:[v.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-50",style:{backgroundImage:"url('/images/background_logo_register.png')",backgroundAttachment:"fixed"}}),v.jsxs("div",{className:"relative z-10 w-full max-w-4xl bg-white bg-opacity-90 p-10 rounded-xl shadow-lg",children:[v.jsx("h1",{className:"text-2xl font-bold mb-4 text-center",children:"Înregistrare"}),v.jsx(k2,{})]})]})}),v.jsx(cn,{path:"/login",element:v.jsxs("div",{className:"relative min-h-screen flex items-center justify-center",children:[v.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-50",style:{backgroundImage:"url('/images/background_logo_register.png')",backgroundAttachment:"fixed"}}),v.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white bg-opacity-90 p-10 rounded-xl shadow-lg",children:[v.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Login"}),v.jsx(b2,{})]})]})}),v.jsx(cn,{path:"/beneficiar",element:v.jsx(j2,{})}),v.jsx(cn,{path:"/voluntar",element:v.jsx(U2,{})}),v.jsx(cn,{path:"/voluntar/requests",element:v.jsx(F2,{})}),v.jsx(cn,{path:"/beneficiar/requests",element:v.jsx(z2,{})}),v.jsx(cn,{path:"/voluntar/cereriacceptate",element:v.jsx(B2,{})}),v.jsx(cn,{path:"/voluntar/istoric",element:v.jsx($2,{})}),v.jsx(cn,{path:"/beneficiar/istoric",element:v.jsx(H2,{})})]})}function q2(){return v.jsx(V1,{children:v.jsx(W2,{})})}md.createRoot(document.getElementById("root")).render(v.jsx(UT.StrictMode,{children:v.jsx(uL,{children:v.jsx(q2,{})})}));
